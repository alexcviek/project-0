"use strict";$(function(){function e(){A.removeClass("hidden"),R.addClass("hidden")}function a(){A.addClass("hidden"),R.removeClass("hidden")}function t(){R.addClass("hidden"),q.removeClass("hidden")}function n(){q.addClass("hidden"),G.removeClass("hidden")}function i(){G.addClass("hidden"),J.removeClass("hidden"),s(),r(),l()}function c(){x=$(this).val(),0===x.length&&alert("You must provide your name"),$("#name").text("Hello "+x+"!"),$(".player1-name").text(x)}function o(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("id");e&&F.attr("disabled",!1),w=j[e],b=z[e],$(".chosen-character img, .player1").attr("src",w.image),$(".villian").attr("src",b.image),$(".villian-name").text(b.name)}function s(){setInterval(function(){$("#player-health").html(T),$("#villian-score").html(M)},500)}function l(){setInterval(function(){$("#round-no").text("Round "+I)},500)}function r(){setInterval(function(){$("#player-score").html(N)},500)}function d(){!0===Y&&(Math.random()<w.accuracy?(M-=w.attack,N+=5,H="You have hit him!"):H="Whooops! A miss...",$("#battle-text").text(""+H),Y=!1,g(),h(),setTimeout(function(){u()},3e3))}function u(){!1===Y&&(Math.random()<b.accuracy?(T-=b.attack,H="He hit you!"):H="You are safe!",$("#battle-text").text(""+H),h(),Y=!0,g())}function m(){Y=!1,g(),b.attack-=w.defend,setTimeout(function(){u(),b.attack+=w.defend},2e3)}function f(){Y=!1,g(),console.log(w.attack),w.attack+=w.warCry,console.log(w.attack),setTimeout(function(){u()},2e3),setTimeout(function(){d(),w.attack-=w.warCry,console.log(w.attack)},3e3)}function h(){T<=0&&(v(),Y=!0),M<=0&&($("#winner").text("You won this round!!! Ta-da!!").css({color:"red","font-size":"30px"}),Y=!0,setTimeout(function(){k()},2e3))}function g(){!1===Y&&(console.log("not your turn"),$(".player-section img").removeClass("img-active")),!0===Y&&(console.log("your turn"),$(".player-section img").addClass("img-active"))}function k(){I+=1,M=25*I,T=20*I,H="",$("#winner").text(""),$("#battle-text").text(""+H)}function v(){J.addClass("hidden"),L.removeClass("hidden")}function y(){H="",$("#battle-text").text(""+H),T=20,M=20,I=1,N=0}function C(){L.addClass("hidden"),y(),i()}function p(){L.addClass("hidden"),R.removeClass("hidden"),y()}var x=void 0,w=void 0,b=void 0,T=20,M=20,Y=!0,H=void 0,I=1,N=0,j={one:{name:"Nick",image:"public/assets/images/player1.gif",attack:4,warCry:2,defend:4,accuracy:.4},two:{name:"Ellen",image:"public/assets/images/player2.gif",attack:1,warCry:2,defend:5,accuracy:.3},three:{name:"Mutant Nick",image:"public/assets/images/player3.gif",attack:6,warCry:1,defend:2,accuracy:.5}},z={one:{name:"Henry",image:"public/assets/images/villian3.jpg",attack:5,accuracy:.5},two:{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:20,accuracy:.9},three:{name:"Medusa",image:"public/assets/images/villian3.gif",attack:4,accuracy:.56}},A=$(".instructions"),E=$("#instructions"),R=$(".welcome"),W=$("#back"),X=$("#play"),q=$(".character-screen"),B=$(".character"),D=$(".name"),F=$("#start"),G=$(".chosen-character"),J=$(".game-window"),K=$("#kick-off"),L=$(".game-over");E.on("click",e),W.on("click",a),X.on("click",t),F.on("click",n),D.on("keyup",c),B.on("click",o),K.on("click",i),$("#attack").on("click",d),$("#warcry").on("click",f),$("#defend").on("click",m),$("#yes").on("click",C),$("#no").on("click",p)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiaGlkZVdpbmRvdzEiLCIkaW5zdHJ1Y3Rpb25zIiwicmVtb3ZlQ2xhc3MiLCJoaWRlV2luZG93MiIsImFkZENsYXNzIiwiZ29Ub0Nob2ljZVNjcmVlbiIsIiR3ZWxjb21lIiwidG9UaGVHYW1lIiwiJGNoYXJhY3RlclNjcmVlbiIsInN0YXJ0VGhlR2FtZSIsIiRjaG9zZW5DaGFyYWN0ZXIiLCIkZ2FtZVdpbmRvdyIsImRpc3BsYXlIZWFsdGgiLCJkaXNwbGF5U2NvcmUiLCJnZXRUaGVOYW1lIiwicGxheWVyTmFtZSIsInZhbCIsImxlbmd0aCIsImFsZXJ0IiwidGV4dCIsInNlbGVjdENoYXJhY3RlciIsInRoaXMiLCJzaWJsaW5ncyIsImlkIiwiYXR0ciIsIiRzdGFydEJ0biIsInBsYXllckNob3NlbiIsImNoYXJhY3RlcnMiLCJ2aWxsaWFuQ2hvc2VuIiwiaW1hZ2UiLCJzZXRJbnRlcnZhbCIsImh0bWwiLCJwbGF5ZXJMaWZlIiwiZGlzcGxheVJvdW5kIiwicm91bmQiLCJzY29yZSIsImF0dGFja1ZpbGxpYW4iLCJ0dXJuIiwiYWNjdXJhY3kiLCJ2aWxsaWFuTGlmZSIsInJvdW5kVGV4dCIsIndob3NlVHVybiIsImNoZWNrRm9yV2lubmVyIiwic2V0VGltZW91dCIsImF0dGFja1BsYXllciIsImRlZmVuZCIsIndhckNyeSIsImNvbnNvbGUiLCJnYW1lT3ZlciIsImNzcyIsImNvbG9yIiwiZm9udC1zaXplIiwibmV4dFJvdW5kIiwicmVzZXREYXRhIiwibmV3R2FtZSIsIiRnYW1lT3ZlclNjcmVlbiIsImJhY2tUb01lbnUiLCJvbmUiLCJuYW1lIiwiYXR0YWNrIiwidHdvIiwidGhyZWUiLCJ2aWxsaWFucyIsIiRpbnN0cnVjdGlvbnNCdG4iLCIkYmFja0J0biIsIiRwbGF5QnRuIiwiJGNoYXJhY3RlciIsIiRuYW1lIiwib24iLCIka2lja09mZkJ0biJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0E0RUEsUUFBU0MsS0FBVEMsRUFBU0QsWUFBYSxVQUNwQkMsRUFBQUEsU0FBY0MsVUFFZixRQUFBQyxLQUNERixFQUFTRSxTQUFhLFVBQ3BCRixFQUFBQSxZQUFjRyxVQUVmLFFBQUFDLEtBQ0RDLEVBQVNELFNBQUFBLFVBQ1BDLEVBQUFKLFlBQUEsVUFFRCxRQUFBSyxLQUNEQyxFQUFBSixTQUFvQixVQUNsQkksRUFBaUJKLFlBQVMsVUFFM0IsUUFBQUssS0FDREMsRUFBU0QsU0FBYyxVQUNyQkMsRUFBQUEsWUFBaUJOLFVBQ2pCTyxJQUNBQyxJQUNBQyxJQUVELFFBQUFDLEtBQ0RDLEVBQVNELEVBQUFBLE1BQVlFLE1BQ25CLElBQUFELEVBQWVFLFFBQ2ZDLE1BQUlILDhCQUVIaEIsRUFBQSxTQUFBb0IsS0FBQSxTQUFBSixFQUFBLEtBQ0RoQixFQUFFLGlCQUFGb0IsS0FBQUosR0FJRixRQUFTSyxLQUFUckIsRUFBQXNCLE1BQVNELFNBQUFBLFVBQWlCRSxXQUFBcEIsWUFBQSxTQUN4QkgsSUFBQXdCLEdBQVFuQixFQUFBQSxNQUFTb0IsS0FBQSxLQUNqQkQsSUFDQUUsRUFBTUQsS0FBQSxZQUFBLEdBRUxFLEVBQUFDLEVBQUFKLEdBQ0RHLEVBQWVDLEVBQUFBLEdBQ2ZDLEVBQUFBLG1DQUFBSixLQUFBLE1BQUFFLEVBQUFHLE9BQ0E5QixFQUFFLFlBQUF5QixLQUFBLE1BQUFJLEVBQW1DSixPQUNyQ3pCLEVBQUUsaUJBQWlCb0IsS0FBbkJTLEVBQTBCQSxNQUUzQixRQUFBaEIsS0FDRGtCLFlBQVNsQixXQUNQa0IsRUFBQUEsa0JBQVlDLEtBQU1DLEdBQ2hCakMsRUFBRSxrQkFBa0JnQyxLQUFLQyxJQUN6QmpDLEtBRUgsUUFBQWtDLEtBQ0RILFlBQVNHLFdBQ1BILEVBQUFBLGFBQVlYLEtBQVpXLFNBQWtCSSxJQUNoQm5DLEtBRUgsUUFBQWMsS0FDRGlCLFlBQVNqQixXQUNQaUIsRUFBQUEsaUJBQVlDLEtBQU1JLElBQ2hCcEMsS0FJSixRQUFTcUMsTUFBQUEsSUFBVEMsSUFDS0EsS0FBQUEsU0FBY1gsRUFBQVksVUFDZkMsR0FBR2IsRUFBZ0JBLE9BQ2pCYSxHQUFBQSxFQUNBSixFQUFBLHFCQUZGSyxFQUlNLHFCQUVMekMsRUFBQSxnQkFBQW9CLEtBQUEsR0FBQXFCLEdBQ0R6QyxHQUFFLEVBQ0ZzQyxJQUNBSSxJQUNBQyxXQUFBQSxXQUNBQyxLQUNFQyxNQUdMLFFBQUFBLE1BQ1FBLElBQVRQLElBQ0tBLEtBQUFBLFNBQWVULEVBQUFVLFVBQ2hCTixHQUFHSixFQUFnQkEsT0FDakJJLEVBQUFBLGVBREZRLEVBR00sZ0JBRUx6QyxFQUFBLGdCQUFBb0IsS0FBQSxHQUFBcUIsR0FDRHpDLElBQ0EyQyxHQUFBQSxFQUNBTCxLQUdILFFBQUFRLEtBQ0RSLEdBQVNRLEVBQ1BSLElBQ0FJLEVBQUFBLFFBQUFBLEVBQUFBLE9BQ0FiLFdBQUFBLFdBQ0FlLElBQ0VDLEVBQUFBLFFBQUFBLEVBQUFBLFFBQ0FoQixLQUVILFFBQUFrQixLQUNEVCxHQUFTUyxFQUNQVCxJQUNBSSxRQUFBQSxJQUFBQSxFQUFBQSxRQUNBTSxFQUFZckIsUUFBQUEsRUFBWm9CLE9BQ0FwQixRQUFBQSxJQUFBQSxFQUF1QkEsUUFDdkJxQixXQUFBLFdBQ0FKLEtBQ0VDLEtBQ0RELFdBRkQsV0FHQUEsSUFDRVAsRUFBQUEsUUFBQUEsRUFBQUEsT0FDQVYsUUFBQUEsSUFBQUEsRUFBdUJBLFNBQ3ZCcUIsS0FFSCxRQUFBTCxLQUNEVixHQUFTVSxJQUNQTSxJQUNFQSxHQUFBQSxHQUVEVCxHQUFBLElBQ0R4QyxFQUFHd0MsV0FBQUEsS0FBSCxpQ0FBb0JVLEtBQUFDLE1BQUEsTUFBQUMsWUFBQSxTQUNsQnBELEdBQUUsRUFDRnNDLFdBQUEsV0FDQU0sS0FDRVMsTUFHTCxRQUFBWCxNQUNRQSxJQUFUSixJQUNFVSxRQUFJVixJQUFTLGlCQUNYVSxFQUFBQSx1QkFBWTdDLFlBQVosZ0JBRUQsSUFBQW1DLElBQ0RVLFFBQUlWLElBQVMsYUFDWFUsRUFBQUEsdUJBQUEzQyxTQUFBLGVBR0gsUUFBQWdELEtBQ0RsQixHQUFTa0IsRUFDUGxCLEVBQUEsR0FBQUEsRUFDQUssRUFBQUEsR0FBbUJMLEVBQ25CRixFQUFBQSxHQUNBUSxFQUFBQSxXQUFZckIsS0FBWixJQUNBcEIsRUFBRSxnQkFBZ0JvQixLQUFsQnBCLEdBQUF5QyxHQUVELFFBQUFRLEtBQ0RyQyxFQUFTcUMsU0FBVSxVQUNqQnJDLEVBQVlQLFlBQVMsVUFFdEIsUUFBQWlELEtBQ0RiLEVBQVNhLEdBQ1BiLEVBQUFBLGdCQUFBckIsS0FBQXFCLEdBQUFBLEdBQ0F6QyxFQUFFLEdBQ0ZpQyxFQUFhLEdBQ2JPLEVBQUFBLEVBQ0FMLEVBQVEsRUFFVCxRQUFBb0IsS0FDREMsRUFBQW5ELFNBQWtCLFVBQ2hCbUQsSUFDQUYsSUFFRCxRQUFBRyxLQUNERCxFQUFTQyxTQUFZLFVBQ25CRCxFQUFBQSxZQUFnQm5ELFVBQ2hCRSxJQWxQRixHQUFJUyxPQUFBQSxHQURKVyxNQUFBQSxHQUNJWCxNQUFBQSxHQUNBVyxFQUFBQSxHQUNBRSxFQUFBQSxHQUNBSSxHQUFBQSxFQUNBTyxNQUFBQSxHQUNBRixFQUFPLEVBQ1BHLEVBQUFBLEVBS0piLEdBR0U4QixLQURJOUIsS0FBQUEsT0FDSjhCLE1BQUssbUNBQ0hDLE9BQU0sRUFDTjdCLE9BQU8sRUFDUDhCLE9BQVEsRUFDUmIsU0FKRyxJQU1IUixLQVBlb0IsS0FBQSxRQVNqQkUsTUFBSyxtQ0FDSEYsT0FBTSxFQUNON0IsT0FBTyxFQUNQOEIsT0FBUSxFQUNSYixTQUpHLElBTUhSLE9BZmVvQixLQUFBLGNBaUJqQkcsTUFBTyxtQ0FDTEgsT0FBTSxFQUNON0IsT0FBTyxFQUNQOEIsT0FBUSxFQUNSYixTQUpLLEtBQUFnQixHQWpCVEwsS0EwQk1LLEtBQUFBLFFBQ0pMLE1BQUssb0NBQ0hDLE9BQU0sRUFDTjdCLFNBQU8sSUFFUFMsS0FMYW9CLEtBQUEsWUFPZkUsTUFBSyxvQ0FDSEYsT0FBTSxHQUNON0IsU0FBTyxJQUVQUyxPQVhhb0IsS0FBQSxTQWFmRyxNQUFPLG9DQUNMSCxPQUFNLEVBQ043QixTQUFPLE1BZlg1QixFQUFBRixFQUFBLGlCQXNCTWdFLEVBQW1CaEUsRUFBRSxpQkFEckJFLEVBQUFBLEVBQUFBLFlBQ0E4RCxFQUFBQSxFQUFBQSxTQUNBekQsRUFBYVAsRUFBQSxTQUNiaUUsRUFBTmpFLEVBQUEscUJBQ01rRSxFQUFhbEUsRUFBQSxjQUNiUyxFQUFBQSxFQUFBQSxTQUNBMEQsRUFBYW5FLEVBQUUsVUFDZm9FLEVBQU5wRSxFQUFBLHFCQUNNMEIsRUFBYzFCLEVBQUEsZ0JBQ2RXLEVBQUFBLEVBQUFBLGFBQ0FDLEVBQWdCWixFQUFBLGFBOEtyQmdFLEdBQUFLLEdBQUEsUUFBQXBFLEdBQ0QrRCxFQUFBQSxHQUFBQSxRQUFvQjVELEdBQ3BCNkQsRUFBU0ksR0FBRyxRQUFTakUsR0FDckI4RCxFQUFTRyxHQUFHLFFBQVMvRCxHQUNyQm9CLEVBQUFBLEdBQUFBLFFBQWFYLEdBQ2JxRCxFQUFTQyxHQUFBLFFBQVN0RCxHQUNsQm9ELEVBQVdFLEdBQUcsUUFBU2hELEdBQ3ZCaUQsRUFBQUEsV0FBWUQsR0FBRyxRQUFTM0QsR0FDeEJWLEVBQUUsV0FBV3FFLEdBQUcsUUFBU2hDLEdBQ3pCckMsRUFBRSxXQUFXcUUsR0FBRyxRQUFTdEIsR0FDekIvQyxFQUFFLFFBQUFxRSxHQUFXQSxRQUFHZCxHQUNoQnZELEVBQUUsT0FBRnFFLEdBQUEsUUFBQVoiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGxldCBwbGF5ZXJOYW1lO1xuICBsZXQgcGxheWVyQ2hvc2VuO1xuICBsZXQgdmlsbGlhbkNob3NlbjtcbiAgbGV0IHBsYXllckxpZmUgPSAyMDtcbiAgbGV0IHZpbGxpYW5MaWZlID0gMjA7XG4gIGxldCB0dXJuID0gdHJ1ZTtcbiAgbGV0IHJvdW5kVGV4dDtcbiAgbGV0IHJvdW5kID0gMTtcbiAgbGV0IHNjb3JlID0gMDtcbiAgLy8gY29uc3QgJGhpZ2hTY29yZSA9ICQoJy5oaWdoLXNjb3JlJyk7XG4gIC8vIGxldCBoaWdoU2NvcmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGlnaFNjb3JlJykgfHwgMDtcbiAgLy8gJGhpZ2hTY29yZS50ZXh0KGhpZ2hTY29yZSk7XG5cbiAgY29uc3QgY2hhcmFjdGVycyA9IHtcbiAgICBvbmU6IHtcbiAgICAgIG5hbWU6ICdOaWNrJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMS5naWYnLFxuICAgICAgYXR0YWNrOiA0LFxuICAgICAgd2FyQ3J5OiAyLFxuICAgICAgZGVmZW5kOiA0LFxuICAgICAgYWNjdXJhY3k6IDAuNFxuICAgIH0sXG4gICAgdHdvOiB7XG4gICAgICBuYW1lOiAnRWxsZW4nLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIyLmdpZicsXG4gICAgICBhdHRhY2s6IDEsXG4gICAgICB3YXJDcnk6IDIsXG4gICAgICBkZWZlbmQ6IDUsXG4gICAgICBhY2N1cmFjeTogMC4zXG4gICAgfSxcbiAgICB0aHJlZToge1xuICAgICAgbmFtZTogJ011dGFudCBOaWNrJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMy5naWYnLFxuICAgICAgYXR0YWNrOiA2LFxuICAgICAgd2FyQ3J5OiAxLFxuICAgICAgZGVmZW5kOiAyLFxuICAgICAgYWNjdXJhY3k6IDAuNVxuICAgIH1cbiAgfTtcbiAgY29uc3QgdmlsbGlhbnMgPSB7XG4gICAgb25lOiB7XG4gICAgICBuYW1lOiAnSGVucnknLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMy5qcGcnLFxuICAgICAgYXR0YWNrOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuNVxuICAgIH0sXG4gICAgdHdvOiB7XG4gICAgICBuYW1lOiAnWGVub21vcnBoJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjIuZ2lmJyxcbiAgICAgIGF0dGFjazogMjAsXG4gICAgICBhY2N1cmFjeTogMC45XG4gICAgfSxcbiAgICB0aHJlZToge1xuICAgICAgbmFtZTogJ01lZHVzYScsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4zLmdpZicsXG4gICAgICBhdHRhY2s6IDQsXG4gICAgICBhY2N1cmFjeTogMC41NlxuICAgIH1cbiAgfTtcblxuICBjb25zdCAkaW5zdHJ1Y3Rpb25zID0gJCgnLmluc3RydWN0aW9ucycpO1xuICBjb25zdCAkaW5zdHJ1Y3Rpb25zQnRuID0gJCgnI2luc3RydWN0aW9ucycpO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRiYWNrQnRuID0gJCgnI2JhY2snKTtcbiAgY29uc3QgJHBsYXlCdG4gPSAkKCcjcGxheScpO1xuICBjb25zdCAkY2hhcmFjdGVyU2NyZWVuID0gJCgnLmNoYXJhY3Rlci1zY3JlZW4nKTtcbiAgY29uc3QgJGNoYXJhY3RlciA9ICQoJy5jaGFyYWN0ZXInKTtcbiAgY29uc3QgJG5hbWUgPSAkKCcubmFtZScpO1xuICBjb25zdCAkc3RhcnRCdG4gPSAkKCcjc3RhcnQnKTtcbiAgY29uc3QgJGNob3NlbkNoYXJhY3RlciA9ICQoJy5jaG9zZW4tY2hhcmFjdGVyJyk7XG4gIGNvbnN0ICRnYW1lV2luZG93ID0gJCgnLmdhbWUtd2luZG93Jyk7XG4gIGNvbnN0ICRraWNrT2ZmQnRuID0gJCgnI2tpY2stb2ZmJyk7XG4gIGNvbnN0ICRnYW1lT3ZlclNjcmVlbiA9ICQoJy5nYW1lLW92ZXInKTtcblxuXG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cxKCl7XG4gICAgJGluc3RydWN0aW9ucy5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cyKCl7XG4gICAgJGluc3RydWN0aW9ucy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGdvVG9DaG9pY2VTY3JlZW4oKXtcbiAgICAkd2VsY29tZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gdG9UaGVHYW1lKCl7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gc3RhcnRUaGVHYW1lKCl7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGdhbWVXaW5kb3cucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIGRpc3BsYXlIZWFsdGgoKTtcbiAgICBkaXNwbGF5U2NvcmUoKTtcbiAgICBkaXNwbGF5Um91bmQoKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRUaGVOYW1lKCl7XG4gICAgcGxheWVyTmFtZSA9ICQodGhpcykudmFsKCk7XG4gICAgaWYgKHBsYXllck5hbWUubGVuZ3RoID09PSAwKXtcbiAgICAgIGFsZXJ0KCdZb3UgbXVzdCBwcm92aWRlIHlvdXIgbmFtZScpO1xuICAgIH1cbiAgICAkKCcjbmFtZScpLnRleHQoYEhlbGxvICR7cGxheWVyTmFtZX0hYCk7XG4gICAgJCgnLnBsYXllcjEtbmFtZScpLnRleHQocGxheWVyTmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3RDaGFyYWN0ZXIoKXtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICBjb25zdCBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICBpZihpZCl7XG4gICAgICAkc3RhcnRCdG4uYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIHBsYXllckNob3NlbiA9IGNoYXJhY3RlcnNbaWRdO1xuICAgIHZpbGxpYW5DaG9zZW4gPSB2aWxsaWFuc1tpZF07XG4gICAgJCgnLmNob3Nlbi1jaGFyYWN0ZXIgaW1nLCAucGxheWVyMScpLmF0dHIoJ3NyYycsIHBsYXllckNob3Nlbi5pbWFnZSk7XG4gICAgJCgnLnZpbGxpYW4nKS5hdHRyKCdzcmMnLCB2aWxsaWFuQ2hvc2VuLmltYWdlKTtcbiAgICAkKCcudmlsbGlhbi1uYW1lJykudGV4dCh2aWxsaWFuQ2hvc2VuLm5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlIZWFsdGgoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAkKCcjcGxheWVyLWhlYWx0aCcpLmh0bWwocGxheWVyTGlmZSk7XG4gICAgICAkKCcjdmlsbGlhbi1zY29yZScpLmh0bWwodmlsbGlhbkxpZmUpO1xuICAgIH0sIDUwMCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVJvdW5kKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgJCgnI3JvdW5kLW5vJykudGV4dChgUm91bmQgJHtyb3VuZH1gKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlTY29yZSgpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNwbGF5ZXItc2NvcmUnKS5odG1sKHNjb3JlKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgZnVuY3Rpb24gYXR0YWNrVmlsbGlhbigpe1xuICAgIGlmKHR1cm4gPT09IHRydWUpe1xuICAgICAgaWYoTWF0aC5yYW5kb20oKSA8IHBsYXllckNob3Nlbi5hY2N1cmFjeSl7XG4gICAgICAgIHZpbGxpYW5MaWZlIC09IHBsYXllckNob3Nlbi5hdHRhY2s7XG4gICAgICAgIHNjb3JlICs9IDU7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdZb3UgaGF2ZSBoaXQgaGltISc7XG4gICAgICB9IGVsc2V7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdXaG9vb3BzISBBIG1pc3MuLi4nO1xuICAgICAgfVxuICAgICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgICB0dXJuID0gZmFsc2U7XG4gICAgICB3aG9zZVR1cm4oKTtcbiAgICAgIGNoZWNrRm9yV2lubmVyKCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXR0YWNrUGxheWVyKCl7XG4gICAgaWYodHVybiA9PT0gZmFsc2Upe1xuICAgICAgaWYoTWF0aC5yYW5kb20oKSA8IHZpbGxpYW5DaG9zZW4uYWNjdXJhY3kpe1xuICAgICAgICBwbGF5ZXJMaWZlIC09IHZpbGxpYW5DaG9zZW4uYXR0YWNrO1xuICAgICAgICByb3VuZFRleHQgPSAnSGUgaGl0IHlvdSEnO1xuICAgICAgfSBlbHNle1xuICAgICAgICByb3VuZFRleHQgPSAnWW91IGFyZSBzYWZlISc7XG4gICAgICB9XG4gICAgICAkKCcjYmF0dGxlLXRleHQnKS50ZXh0KGAke3JvdW5kVGV4dH1gKTtcbiAgICAgIGNoZWNrRm9yV2lubmVyKCk7XG4gICAgICB0dXJuID0gdHJ1ZTtcbiAgICAgIHdob3NlVHVybigpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBkZWZlbmQoKXtcbiAgICB0dXJuID0gZmFsc2U7XG4gICAgd2hvc2VUdXJuKCk7XG4gICAgdmlsbGlhbkNob3Nlbi5hdHRhY2sgLT0gcGxheWVyQ2hvc2VuLmRlZmVuZDtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGF0dGFja1BsYXllcigpO1xuICAgICAgdmlsbGlhbkNob3Nlbi5hdHRhY2sgKz0gcGxheWVyQ2hvc2VuLmRlZmVuZDtcbiAgICB9LCAyMDAwKTtcbiAgfVxuICBmdW5jdGlvbiB3YXJDcnkoKXtcbiAgICB0dXJuID0gZmFsc2U7XG4gICAgd2hvc2VUdXJuKCk7XG4gICAgY29uc29sZS5sb2cocGxheWVyQ2hvc2VuLmF0dGFjayk7XG4gICAgcGxheWVyQ2hvc2VuLmF0dGFjayArPSBwbGF5ZXJDaG9zZW4ud2FyQ3J5O1xuICAgIGNvbnNvbGUubG9nKHBsYXllckNob3Nlbi5hdHRhY2spO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgfSwgMjAwMCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tWaWxsaWFuKCk7XG4gICAgICBwbGF5ZXJDaG9zZW4uYXR0YWNrIC09IHBsYXllckNob3Nlbi53YXJDcnk7XG4gICAgICBjb25zb2xlLmxvZyhwbGF5ZXJDaG9zZW4uYXR0YWNrKTtcbiAgICB9LCAzMDAwKTtcbiAgfVxuICBmdW5jdGlvbiBjaGVja0Zvcldpbm5lcigpe1xuICAgIGlmIChwbGF5ZXJMaWZlIDw9IDApe1xuICAgICAgZ2FtZU92ZXIoKTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgIH1cbiAgICBpZih2aWxsaWFuTGlmZSA8PSAwKXtcbiAgICAgICQoJyN3aW5uZXInKS50ZXh0KCdZb3Ugd29uIHRoaXMgcm91bmQhISEgVGEtZGEhIScpLmNzcyh7J2NvbG9yJzogJ3JlZCcsICdmb250LXNpemUnOiAnMzBweCd9KTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG5leHRSb3VuZCgpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHdob3NlVHVybigpe1xuICAgIGlmICh0dXJuID09PSBmYWxzZSl7XG4gICAgICBjb25zb2xlLmxvZygnbm90IHlvdXIgdHVybicpO1xuICAgICAgJCgnLnBsYXllci1zZWN0aW9uIGltZycpLnJlbW92ZUNsYXNzKCdpbWctYWN0aXZlJyk7XG4gICAgfVxuICAgIGlmICh0dXJuID09PSB0cnVlKXtcbiAgICAgIGNvbnNvbGUubG9nKCd5b3VyIHR1cm4nKTtcbiAgICAgICQoJy5wbGF5ZXItc2VjdGlvbiBpbWcnKS5hZGRDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBuZXh0Um91bmQoKXtcbiAgICByb3VuZCArPSAxO1xuICAgIHZpbGxpYW5MaWZlID0gMjUgKiByb3VuZDtcbiAgICBwbGF5ZXJMaWZlID0gMjAgICogcm91bmQ7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI3dpbm5lcicpLnRleHQoJycpO1xuICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICB9XG4gIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgJGdhbWVXaW5kb3cuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRnYW1lT3ZlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gcmVzZXREYXRhKCl7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgcGxheWVyTGlmZSA9IDIwO1xuICAgIHZpbGxpYW5MaWZlID0gMjA7XG4gICAgcm91bmQgPSAxO1xuICAgIHNjb3JlID0gMDtcbiAgfVxuICBmdW5jdGlvbiBuZXdHYW1lKCl7XG4gICAgJGdhbWVPdmVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICByZXNldERhdGEoKTtcbiAgICBzdGFydFRoZUdhbWUoKTtcbiAgfVxuICBmdW5jdGlvbiBiYWNrVG9NZW51KCl7XG4gICAgJGdhbWVPdmVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkd2VsY29tZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgcmVzZXREYXRhKCk7XG4gIH1cbiAgJGluc3RydWN0aW9uc0J0bi5vbignY2xpY2snLCBoaWRlV2luZG93MSk7XG4gICRiYWNrQnRuLm9uKCdjbGljaycsIGhpZGVXaW5kb3cyKTtcbiAgJHBsYXlCdG4ub24oJ2NsaWNrJywgZ29Ub0Nob2ljZVNjcmVlbik7XG4gICRzdGFydEJ0bi5vbignY2xpY2snLCB0b1RoZUdhbWUpO1xuICAkbmFtZS5vbigna2V5dXAnLCBnZXRUaGVOYW1lKTtcbiAgJGNoYXJhY3Rlci5vbignY2xpY2snLCBzZWxlY3RDaGFyYWN0ZXIpO1xuICAka2lja09mZkJ0bi5vbignY2xpY2snLCBzdGFydFRoZUdhbWUpO1xuICAkKCcjYXR0YWNrJykub24oJ2NsaWNrJywgYXR0YWNrVmlsbGlhbik7XG4gICQoJyN3YXJjcnknKS5vbignY2xpY2snLCB3YXJDcnkpO1xuICAkKCcjZGVmZW5kJykub24oJ2NsaWNrJywgZGVmZW5kKTtcbiAgJCgnI3llcycpLm9uKCdjbGljaycsIG5ld0dhbWUpO1xuICAkKCcjbm8nKS5vbignY2xpY2snLCBiYWNrVG9NZW51KTtcbn0pO1xuIl19
