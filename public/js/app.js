"use strict";var playerName=void 0,playerChosen=void 0,villianChosen=void 0,playerLife=20,villianLife=20,turn=!0,roundText=void 0,round=1,score=0,characters={one:{name:"Nick",image:"public/assets/images/player1.gif",attack:4,warCry:2,defend:4,accuracy:.4},two:{name:"Ellen",image:"public/assets/images/player2.gif",attack:10,warCry:2,defend:5,accuracy:.7},three:{name:"Mutant Nick",image:"public/assets/images/player3.gif",attack:6,warCry:1,defend:2,accuracy:.5}},villians={one:{name:"Henry",image:"public/assets/images/villian3.jpg",attack:5,accuracy:.5},two:{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:1,accuracy:.6},three:{name:"Medusa",image:"public/assets/images/villian3.gif",attack:4,accuracy:.56}};$(function(){function e(){$(".instructions").removeClass("hidden"),$(".welcome").addClass("hidden")}function a(){$(".instructions").addClass("hidden"),$(".welcome").removeClass("hidden")}function n(){$(".welcome").addClass("hidden"),$(".character").removeClass("hidden")}function t(){$(".character").addClass("hidden"),$(".chosen-character").removeClass("hidden")}function i(){$(".chosen-character").fadeOut("slow").addClass("hidden"),$(".game-window").fadeIn("slow").removeClass("hidden"),l(),s(),c()}function o(){playerName=$(this).val(),0===playerName.length&&(playerName=playerChosen.name),$("#name").text("Hello "+playerName+"!"),$(".player1-name").text(playerName)}function r(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("id");e&&$("#start").attr("disabled",!1),playerChosen=characters[e],villianChosen=villians[e],$(".chosen-character img, .player1").attr("src",playerChosen.image),$(".villian").attr("src",villianChosen.image),$(".villian-name").text(villianChosen.name)}function l(){setInterval(function(){$("#player-health").html(playerLife),$("#villian-score").html(villianLife),$("h1").text("Round "+round)},500)}function c(){setInterval(function(){$("h1").text("Round "+round)},500)}function s(){setInterval(function(){$("#player-score").html(score)},500)}function u(){!0===turn&&(Math.random()<playerChosen.accuracy?(villianLife-=playerChosen.attack,score+=5,roundText="You have hit him!"):roundText="Whooops! A miss...",$("#battle-text").text(""+roundText),turn=!1,y(),setTimeout(function(){d()},3e3))}function d(){f(),!1===turn&&(Math.random()<villianChosen.accuracy?(playerLife-=villianChosen.attack,roundText="Crap! He hit you!"):roundText="Lucky u! This time it is a miss and you are safe!",$("#battle-text").text(""+roundText),y(),turn=!0,f())}function h(){turn=!1,villianChosen.attack-=playerChosen.defend,setTimeout(function(){d(),villianChosen.attack+=playerChosen.defend},2e3)}function m(){turn=!1,console.log(playerChosen.attack),playerChosen.attack+=playerChosen.warCry,console.log(playerChosen.attack),setTimeout(function(){d()},2e3),setTimeout(function(){u(),playerChosen.attack-=playerChosen.warCry,console.log(playerChosen.attack)},3e3)}function y(){playerLife<=0&&($("#winner").text("GAME OVER").css({color:"red","font-size":"30px"}),$("#attack, #warcry, #defend").attr("disabled",!0),$(".game-over").removeClass("hidden"),turn=!0),villianLife<=0&&($("#winner").text("You won this round!!! Ta-da!!").css({color:"red","font-size":"30px"}),turn=!0,setTimeout(function(){p()},2e3))}function f(){!1===turn?console.log("not your turn"):console.log("your turn babe")}function p(){console.log("Round 2!"),round+=1,villianLife=25*round,playerLife=20*round,roundText="",$("#winner").text(""),$("#battle-text").text(""+roundText)}$("#instructions").on("click",e),$("#back").on("click",a),$("#play").on("click",n),$("#start").on("click",t),$(".name").on("keyup",o),$(".person").on("click",r),$("#kick-off").on("click",i),$("#attack").on("click",u),$("#warcry").on("click",m),$("#defend").on("click",h)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJwbGF5ZXJOYW1lIiwicGxheWVyQ2hvc2VuIiwidmlsbGlhbkNob3NlbiIsInBsYXllckxpZmUiLCJ2aWxsaWFuTGlmZSIsInR1cm4iLCJyb3VuZFRleHQiLCJjaGFyYWN0ZXJzIiwib25lIiwibmFtZSIsImltYWdlIiwiYXR0YWNrIiwid2FyQ3J5IiwiYWNjdXJhY3kiLCJ0d28iLCJ0aHJlZSIsInZpbGxpYW5zIiwiJCIsImhpZGVXaW5kb3cxIiwicmVtb3ZlQ2xhc3MiLCJoaWRlV2luZG93MiIsImFkZENsYXNzIiwiZ29Ub1BsYXlTY3JlZW4iLCJ0b1RoZUdhbWUiLCJzdGFydFRoZUdhbWUiLCJmYWRlT3V0IiwiZGlzcGxheUhlYWx0aCIsImRpc3BsYXlSb3VuZCIsInRoaXMiLCJ2YWwiLCJnZXRUaGVOYW1lIiwidGV4dCIsInNlbGVjdENoYXJhY3RlciIsInNpYmxpbmdzIiwiaWQiLCJhdHRyIiwic2V0SW50ZXJ2YWwiLCJodG1sIiwicm91bmQiLCJkaXNwbGF5U2NvcmUiLCJzY29yZSIsImF0dGFja1ZpbGxpYW4iLCJNYXRoIiwicmFuZG9tIiwiY2hlY2tGb3JXaW5uZXIiLCJzZXRUaW1lb3V0IiwiYXR0YWNrUGxheWVyIiwid2hvc2VUdXJuIiwiZGVmZW5kIiwiY29uc29sZSIsImxvZyIsImNzcyIsImNvbG9yIiwiZm9udC1zaXplIiwibmV4dFJvdW5kIiwib24iXSwibWFwcGluZ3MiOiJZQUFBLElBQUlBLGdCQUFBQSxHQUNBQyxpQkFBQUEsR0FEQUQsa0JBQUFBLEdBQ0FDLFdBQUFBLEdBQ0FDLFlBQUFBLEdBQ0FDLE1BQUFBLEVBQ0FDLGNBQUFBLEdBQ0FDLE1BQU8sRUFDUEMsTUFBQUEsRUFLSkMsWUFHRUMsS0FESUQsS0FBQUEsT0FDSkMsTUFBSyxtQ0FDSEMsT0FBTSxFQUNOQyxPQUFPLEVBQ1BDLE9BQVEsRUFDUkMsU0FKRyxJQU1IQyxLQVBlSixLQUFBLFFBU2pCSyxNQUFLLG1DQUNITCxPQUFNLEdBQ05D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b250ZW50IjpbImxldCBwbGF5ZXJOYW1lO1xubGV0IHBsYXllckNob3NlbjtcbmxldCB2aWxsaWFuQ2hvc2VuO1xubGV0IHBsYXllckxpZmUgPSAyMDtcbmxldCB2aWxsaWFuTGlmZSA9IDIwO1xubGV0IHR1cm4gPSB0cnVlO1xubGV0IHJvdW5kVGV4dDtcbmxldCByb3VuZCA9IDE7XG5sZXQgc2NvcmUgPSAwO1xuLy8gY29uc3QgJGhpZ2hTY29yZSA9ICQoJy5oaWdoLXNjb3JlJyk7XG4vLyBsZXQgaGlnaFNjb3JlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZ2hTY29yZScpIHx8IDA7XG4vLyAkaGlnaFNjb3JlLnRleHQoaGlnaFNjb3JlKTtcblxuY29uc3QgY2hhcmFjdGVycyA9IHtcbiAgb25lOiB7XG4gICAgbmFtZTogJ05pY2snLFxuICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMS5naWYnLFxuICAgIGF0dGFjazogNCxcbiAgICB3YXJDcnk6IDIsXG4gICAgZGVmZW5kOiA0LFxuICAgIGFjY3VyYWN5OiAwLjRcbiAgfSxcbiAgdHdvOiB7XG4gICAgbmFtZTogJ0VsbGVuJyxcbiAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3BsYXllcjIuZ2lmJyxcbiAgICBhdHRhY2s6IDEwLFxuICAgIHdhckNyeTogMixcbiAgICBkZWZlbmQ6IDUsXG4gICAgYWNjdXJhY3k6IDAuN1xuICB9LFxuICB0aHJlZToge1xuICAgIG5hbWU6ICdNdXRhbnQgTmljaycsXG4gICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIzLmdpZicsXG4gICAgYXR0YWNrOiA2LFxuICAgIHdhckNyeTogMSxcbiAgICBkZWZlbmQ6IDIsXG4gICAgYWNjdXJhY3k6IDAuNVxuICB9XG59O1xuY29uc3QgdmlsbGlhbnMgPSB7XG4gIG9uZToge1xuICAgIG5hbWU6ICdIZW5yeScsXG4gICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMy5qcGcnLFxuICAgIGF0dGFjazogNSxcbiAgICBhY2N1cmFjeTogMC41XG4gIH0sXG4gIHR3bzoge1xuICAgIG5hbWU6ICdYZW5vbW9ycGgnLFxuICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjIuZ2lmJyxcbiAgICBhdHRhY2s6IDEsXG4gICAgYWNjdXJhY3k6IDAuNlxuICB9LFxuICB0aHJlZToge1xuICAgIG5hbWU6ICdNZWR1c2EnLFxuICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjMuZ2lmJyxcbiAgICBhdHRhY2s6IDQsXG4gICAgYWNjdXJhY3k6IDAuNTZcbiAgfVxufTtcbiQoKCkgPT4ge1xuICBmdW5jdGlvbiBoaWRlV2luZG93MSgpe1xuICAgICQoJy5pbnN0cnVjdGlvbnMnKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgJCgnLndlbGNvbWUnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gaGlkZVdpbmRvdzIoKXtcbiAgICAkKCcuaW5zdHJ1Y3Rpb25zJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICQoJy53ZWxjb21lJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGdvVG9QbGF5U2NyZWVuKCl7XG4gICAgJCgnLndlbGNvbWUnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJCgnLmNoYXJhY3RlcicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfVxuICBmdW5jdGlvbiB0b1RoZUdhbWUoKXtcbiAgICAkKCcuY2hhcmFjdGVyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICQoJy5jaG9zZW4tY2hhcmFjdGVyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIHN0YXJ0VGhlR2FtZSgpe1xuICAgICQoJy5jaG9zZW4tY2hhcmFjdGVyJykuZmFkZU91dCgnc2xvdycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkKCcuZ2FtZS13aW5kb3cnKS5mYWRlSW4oJ3Nsb3cnKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgZGlzcGxheUhlYWx0aCgpO1xuICAgIGRpc3BsYXlTY29yZSgpO1xuICAgIGRpc3BsYXlSb3VuZCgpO1xuICB9XG4gIGZ1bmN0aW9uIGdldFRoZU5hbWUoKXtcbiAgICBwbGF5ZXJOYW1lID0gJCh0aGlzKS52YWwoKTtcbiAgICBpZiAocGxheWVyTmFtZS5sZW5ndGggPT09IDApe1xuICAgICAgcGxheWVyTmFtZSA9IHBsYXllckNob3Nlbi5uYW1lO1xuICAgIH1cbiAgICAkKCcjbmFtZScpLnRleHQoYEhlbGxvICR7cGxheWVyTmFtZX0hYCk7XG4gICAgJCgnLnBsYXllcjEtbmFtZScpLnRleHQocGxheWVyTmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3RDaGFyYWN0ZXIoKXtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICBjb25zdCBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICBpZihpZCl7XG4gICAgICAkKCcjc3RhcnQnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gICAgcGxheWVyQ2hvc2VuID0gY2hhcmFjdGVyc1tpZF07XG4gICAgdmlsbGlhbkNob3NlbiA9IHZpbGxpYW5zW2lkXTtcbiAgICAkKCcuY2hvc2VuLWNoYXJhY3RlciBpbWcsIC5wbGF5ZXIxJykuYXR0cignc3JjJywgcGxheWVyQ2hvc2VuLmltYWdlKTtcbiAgICAkKCcudmlsbGlhbicpLmF0dHIoJ3NyYycsIHZpbGxpYW5DaG9zZW4uaW1hZ2UpO1xuICAgICQoJy52aWxsaWFuLW5hbWUnKS50ZXh0KHZpbGxpYW5DaG9zZW4ubmFtZSk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheUhlYWx0aCgpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNwbGF5ZXItaGVhbHRoJykuaHRtbChwbGF5ZXJMaWZlKTtcbiAgICAgICQoJyN2aWxsaWFuLXNjb3JlJykuaHRtbCh2aWxsaWFuTGlmZSk7XG4gICAgICAkKCdoMScpLnRleHQoYFJvdW5kICR7cm91bmR9YCk7XG4gICAgfSwgNTAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5Um91bmQoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAkKCdoMScpLnRleHQoYFJvdW5kICR7cm91bmR9YCk7XG4gICAgfSwgNTAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5U2NvcmUoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAkKCcjcGxheWVyLXNjb3JlJykuaHRtbChzY29yZSk7XG4gICAgfSwgNTAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGF0dGFja1ZpbGxpYW4oKXtcbiAgICBpZih0dXJuID09PSB0cnVlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCBwbGF5ZXJDaG9zZW4uYWNjdXJhY3kpe1xuICAgICAgICB2aWxsaWFuTGlmZSAtPSBwbGF5ZXJDaG9zZW4uYXR0YWNrO1xuICAgICAgICBzY29yZSArPSA1O1xuICAgICAgICByb3VuZFRleHQgPSAnWW91IGhhdmUgaGl0IGhpbSEnO1xuICAgICAgfSBlbHNle1xuICAgICAgICByb3VuZFRleHQgPSAnV2hvb29wcyEgQSBtaXNzLi4uJztcbiAgICAgIH1cbiAgICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgICAgdHVybiA9IGZhbHNlO1xuICAgICAgY2hlY2tGb3JXaW5uZXIoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBhdHRhY2tQbGF5ZXIoKXtcbiAgICB3aG9zZVR1cm4oKTtcbiAgICBpZih0dXJuID09PSBmYWxzZSl7XG4gICAgICBpZihNYXRoLnJhbmRvbSgpIDwgdmlsbGlhbkNob3Nlbi5hY2N1cmFjeSl7XG4gICAgICAgIHBsYXllckxpZmUgLT0gdmlsbGlhbkNob3Nlbi5hdHRhY2s7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdDcmFwISBIZSBoaXQgeW91ISc7XG4gICAgICB9IGVsc2V7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdMdWNreSB1ISBUaGlzIHRpbWUgaXQgaXMgYSBtaXNzIGFuZCB5b3UgYXJlIHNhZmUhJztcbiAgICAgIH1cbiAgICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgICAgY2hlY2tGb3JXaW5uZXIoKTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgICAgd2hvc2VUdXJuKCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlZmVuZCgpe1xuICAgIHR1cm4gPSBmYWxzZTtcbiAgICB2aWxsaWFuQ2hvc2VuLmF0dGFjayAtPSBwbGF5ZXJDaG9zZW4uZGVmZW5kO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgICB2aWxsaWFuQ2hvc2VuLmF0dGFjayArPSBwbGF5ZXJDaG9zZW4uZGVmZW5kO1xuICAgIH0sIDIwMDApO1xuICB9XG4gIGZ1bmN0aW9uIHdhckNyeSgpe1xuICAgIHR1cm4gPSBmYWxzZTtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJDaG9zZW4uYXR0YWNrKTtcbiAgICBwbGF5ZXJDaG9zZW4uYXR0YWNrICs9IHBsYXllckNob3Nlbi53YXJDcnk7XG4gICAgY29uc29sZS5sb2cocGxheWVyQ2hvc2VuLmF0dGFjayk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICB9LCAyMDAwKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGF0dGFja1ZpbGxpYW4oKTtcbiAgICAgIHBsYXllckNob3Nlbi5hdHRhY2sgLT0gcGxheWVyQ2hvc2VuLndhckNyeTtcbiAgICAgIGNvbnNvbGUubG9nKHBsYXllckNob3Nlbi5hdHRhY2spO1xuICAgIH0sIDMwMDApO1xuICB9XG4gIGZ1bmN0aW9uIGNoZWNrRm9yV2lubmVyKCl7XG4gICAgaWYgKHBsYXllckxpZmUgPD0gMCl7XG4gICAgICAkKCcjd2lubmVyJykudGV4dCgnR0FNRSBPVkVSJykuY3NzKHsnY29sb3InOiAncmVkJywgJ2ZvbnQtc2l6ZSc6ICczMHB4J30pO1xuICAgICAgJCgnI2F0dGFjaywgI3dhcmNyeSwgI2RlZmVuZCcpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAkKCcuZ2FtZS1vdmVyJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgdHVybiA9IHRydWU7XG4gICAgfVxuICAgIGlmKHZpbGxpYW5MaWZlIDw9IDApe1xuICAgICAgJCgnI3dpbm5lcicpLnRleHQoJ1lvdSB3b24gdGhpcyByb3VuZCEhISBUYS1kYSEhJykuY3NzKHsnY29sb3InOiAncmVkJywgJ2ZvbnQtc2l6ZSc6ICczMHB4J30pO1xuICAgICAgdHVybiA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbmV4dFJvdW5kKCk7XG4gICAgICB9LCAyMDAwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gd2hvc2VUdXJuKCl7XG4gICAgaWYgKHR1cm4gPT09IGZhbHNlKXtcbiAgICAgIGNvbnNvbGUubG9nKCdub3QgeW91ciB0dXJuJyk7XG4gICAgICAvLyAkKCcucGxheWVyLWNvcm5lciBpbWcnKS5yZW1vdmVDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZygneW91ciB0dXJuIGJhYmUnKTtcbiAgICAgIC8vICQoJy5wbGF5ZXItY29ybmVyJykuYXBwZW5kKCc8cD5Zb3VyIHR1cm48L3A+Jyk7XG4gICAgICAvLyAkKCcucGxheWVyLWNvcm5lciBpbWcnKS5hZGRDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBuZXh0Um91bmQoKXtcbiAgICBjb25zb2xlLmxvZygnUm91bmQgMiEnKTtcbiAgICByb3VuZCArPSAxO1xuICAgIHZpbGxpYW5MaWZlID0gMjUgKiByb3VuZDtcbiAgICBwbGF5ZXJMaWZlID0gMjAgICogcm91bmQ7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI3dpbm5lcicpLnRleHQoJycpO1xuICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICB9XG4gICQoJyNpbnN0cnVjdGlvbnMnKS5vbignY2xpY2snLCBoaWRlV2luZG93MSk7XG4gICQoJyNiYWNrJykub24oJ2NsaWNrJywgaGlkZVdpbmRvdzIpO1xuICAkKCcjcGxheScpLm9uKCdjbGljaycsIGdvVG9QbGF5U2NyZWVuKTtcbiAgJCgnI3N0YXJ0Jykub24oJ2NsaWNrJywgdG9UaGVHYW1lKTtcbiAgJCgnLm5hbWUnKS5vbigna2V5dXAnLCBnZXRUaGVOYW1lKTtcbiAgJCgnLnBlcnNvbicpLm9uKCdjbGljaycsIHNlbGVjdENoYXJhY3Rlcik7XG4gICQoJyNraWNrLW9mZicpLm9uKCdjbGljaycsIHN0YXJ0VGhlR2FtZSk7XG4gICQoJyNhdHRhY2snKS5vbignY2xpY2snLCBhdHRhY2tWaWxsaWFuKTtcbiAgJCgnI3dhcmNyeScpLm9uKCdjbGljaycsIHdhckNyeSk7XG4gICQoJyNkZWZlbmQnKS5vbignY2xpY2snLCBkZWZlbmQpO1xufSk7XG4iXX0=
