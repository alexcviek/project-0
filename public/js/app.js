"use strict";$(function(){function a(){F.removeClass("hidden").addClass("animated fadeIn"),X.addClass("hidden")}function e(){F.addClass("hidden").removeClass("animated fadeIn"),X.removeClass("hidden").addClass("animated fadeIn")}function t(){for(var a=0;a<R.length;a++){var e='\n      <div class="character" data-id='+a+'>\n      <img src="'+R[a].image+'">\n      <p class="underlined">'+R[a].name+"</p>\n      <p>Attack: "+R[a].attack+"</p>\n      <p>WarCry: "+R[a].warCry+"</p>\n      <p>Defend: "+R[a].defend+"</p>\n      <p>Accuracy: "+R[a].accuracy+"</p>\n      </div>\n      ";G.append(e)}}function c(){X.addClass("hidden"),B.removeClass("hidden").addClass("animated fadeIn"),t()}function n(){B.addClass("hidden"),L.removeClass("hidden").addClass("animated fadeIn")}function i(){L.addClass("hidden"),O.removeClass("hidden").addClass("animated fadeIn"),ca.text(N),setInterval(function(){o(),m(),l(),u()},500)}function r(){N=M>N?M:N,ca.text(N)}function s(){I=$(this).val(),0!==I.length&&Q.attr("disabled",!1).addClass("animated infinite pulse"),fa.text(I)}function d(){$(this).addClass("active").siblings().removeClass("active");var a=$(this).attr("data-id");a&&K.attr("disabled",!1).addClass("animated infinite pulse"),T=R[a],D=W[a],$(".chosen-character img, .player-img").attr("src",T.image),$(".hexagon").css("background-image","url("+T.image+")"),ga.attr("src",D.image),pa.text(D.name),$a.text(D.attack)}function o(){ha.html(E),Ca.html(S)}function l(){Aa.text("Round "+H)}function u(){ka.text(T.currentAttack)}function m(){ta.html(M)}function f(){va.text(""+z)}function y(){console.log(T.currentAccuracy),!0===Y&&(Math.random()<T.currentAccuracy?(S-=T.currentAttack,M+=T.currentAttack,z="You have hit him!",ga.addClass("animated shake"),na.play()):(ra.play(),z="Whooops! A miss..."),T.currentAttack=T.attack,f(),ya.removeClass("animated shake"),Y=!1,C(),p(),r(),setTimeout(function(){h()},3e3))}function h(){console.log(D.currentAccuracy),!1===Y&&(Math.random()<D.currentAccuracy?(E-=D.attack,z="He hit you!",ia.play(),ya.addClass("animated shake")):(sa.play(),z="You are safe!"),ga.removeClass("animated shake"),f(),p(),Y=!0,setTimeout(function(){C()},1e3))}function k(){va.text("DEFEND!!!"),Y=!1,C(),D.attack-=T.defend,setTimeout(function(){h(),D.attack+=T.defend},2e3)}function g(){"Nick the Cat"===T.name?la.play():"Catzilla"===T.name?ua.play():"Ellen Ripley"===T.name&&ma.play(),va.text("You have used WarCry"),Y=!1,C(),T.currentAttack+=T.warCry,setTimeout(function(){h()},2e3)}function p(){E<=0&&(da.play(),A()),S<=0&&(S=0,xa.text("You won this round!!! Ta-da!!").css({color:"#C5D200","font-size":"28px"}),oa.play(),Y=!0,setTimeout(function(){v()},2e3))}function C(){!1===Y&&ya.removeClass("img-active"),!0===Y&&ya.addClass("img-active")}function v(){T.currentAccuracy+=.01,D.currentAccuracy+=.05,H+=1,S=20,E=20+H,z="",xa.text(""),f(),C()}function A(){localStorage.setItem("highScore",N),O.addClass("hidden"),U.removeClass("hidden").addClass("animated fadeIn"),x()}function x(){z="",f(),E=20,S=20,H=1,M=0,T.currentAttack=T.attack,T.currentAccuracy=T.accuracy,D.currentAccuracy=D.accuracy,Y=!0,G.empty(),ya.removeClass("animated shake"),K.removeClass("animated infinite pulse")}function b(){U.addClass("hidden"),i()}function w(){U.addClass("hidden"),X.removeClass("hidden").addClass("animated fadeIn")}var I=void 0,T=void 0,D=void 0,E=20,S=20,Y=!0,z=void 0,H=1,M=0,N=localStorage.getItem("highScore")||0,R=[{name:"Nick the Cat",image:"public/assets/images/player1.gif",attack:4,currentAttack:4,warCry:3,defend:4,accuracy:.5,currentAccuracy:.5},{name:"Ellen Ripley",image:"public/assets/images/player2.gif",attack:5,currentAttack:5,warCry:2,defend:5,accuracy:.5,currentAccuracy:.5},{name:"Catzilla",image:"public/assets/images/player3.gif",attack:4,currentAttack:4,warCry:5,defend:2,accuracy:.5,currentAccuracy:.5}],W=[{name:"Henry the Hoover",image:"public/assets/images/villian1.gif",attack:5,accuracy:.3,currentAccuracy:.3},{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:5,accuracy:.3,currentAccuracy:.3},{name:"Pink Medusa",image:"public/assets/images/villian3.gif",attack:5,accuracy:.3,currentAccuracy:.3}],F=$(".instructions"),P=$("#instructions"),X=$(".welcome"),j=$("#back"),q=$("#play"),B=$(".character-screen"),G=$(".choices"),J=$(".name"),K=$("#start"),L=$(".chosen-character"),O=$(".game-window"),Q=$("#kick-off"),U=$(".game-over"),V=$("#attack"),Z=$("#warcry"),_=$("#defend"),aa=$("#new-game"),ea=$("#back-to-menu"),ta=$("#player-score"),ca=$(".high-score"),na=$("audio")[0],ia=$("audio")[1],ra=$("audio")[2],sa=$("audio")[3],da=$("audio")[4],oa=$("audio")[5],la=$("audio")[6],ua=$("audio")[7],ma=$("audio")[8],fa=$(".player-name"),ya=$(".player-img"),ha=$("#player-life"),ka=$("#player-current-attack"),ga=$(".villian-img"),pa=$(".villian-name"),Ca=$("#villian-life"),$a=$("#villian-attack"),va=$("#turn-result"),Aa=$("#round-no"),xa=$("#round-message");P.on("click",a),j.on("click",e),q.on("click",c),K.on("click",n),J.on("keyup",s),G.on("click",".character",d),Q.on("click",i),V.on("click",y),Z.on("click",g),_.on("click",k),aa.on("click",b),ea.on("click",w)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiJHdlbGNvbWUiLCIkaW5zdHJ1Y3Rpb25zIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNyZWF0ZUNob2ljZXMiLCJjb250ZW50IiwiJGNob2ljZXMiLCJhcHBlbmQiLCJnb1RvQ2hvaWNlU2NyZWVuIiwiY2hhcmFjdGVycyIsImxlbmd0aCIsImkiLCIkY2hhcmFjdGVyU2NyZWVuIiwiaW1hZ2UiLCJuYW1lIiwiYXR0YWNrIiwiJGNob3NlbkNoYXJhY3RlciIsIndhckNyeSIsImRlZmVuZCIsInN0YXJ0VGhlR2FtZSIsImFjY3VyYWN5IiwiJGhpZ2hTY29yZSIsInRleHQiLCJoaWdoU2NvcmUiLCJkaXNwbGF5U2NvcmUiLCJkaXNwbGF5Um91bmQiLCJkaXNwbGF5Q3VycmVudEF0dGFjayIsInVwZGF0ZUhpZ2hTY29yZSIsInNjb3JlIiwiZ2V0VGhlTmFtZSIsInBsYXllck5hbWUiLCIkZ2FtZVdpbmRvdyIsIiRraWNrT2ZmQnRuIiwiYXR0ciIsInNldEludGVydmFsIiwiJHBsYXllck5hbWUiLCIkc3RhcnRCdG4iLCJ2aWxsaWFuQ2hvc2VuIiwidGhpcyIsInZhbCIsImNzcyIsIiR2aWxsaWFuSW1nIiwiJHZpbGxpYW5BdHRhY2siLCIkcGxheWVyTGlmZSIsIiR2aWxsaWFuTGlmZSIsInZpbGxpYW5MaWZlIiwiaWQiLCIkcm91bmROdW1iZXIiLCJyb3VuZCIsInBsYXllckNob3NlbiIsIiRwbGF5ZXJDdXJyZW50QXR0YWNrIiwiJHNjb3JlIiwiJHZpbGxpYW5OYW1lIiwidHVyblJlc3VsdFRleHQiLCJkaXNwbGF5SGVhbHRoIiwiaHRtbCIsInBsYXllckxpZmUiLCJhdHRhY2tWaWxsaWFuIiwidHVybiIsInJhbmRvbSIsInJvdW5kVGV4dCIsImN1cnJlbnRBdHRhY2siLCIkc2xhcEF1ZGlvIiwiJHR1cm5SZXN1bHQiLCIkcGxheWVySW1nIiwiY3VycmVudEFjY3VyYWN5Iiwid2hvc2VUdXJuIiwiY2hlY2tGb3JXaW5uZXIiLCJzZXRUaW1lb3V0IiwiYXR0YWNrUGxheWVyIiwicGxheSIsIiRzd29vc2hBdWRpbyIsImNvbnNvbGUiLCIkcHVuY2hBdWRpbyIsIiRzd29vc2hBdWRpbzIiLCJNYXRoIiwiJG1lb3ciLCIkZ2V0QXdheSIsIiRnYW1lT3ZlckF1ZGlvIiwiZ2FtZU92ZXIiLCIkcm91bmRNZXNzYWdlIiwiJGxldmVsVXBBdWRpbyIsIm5leHRSb3VuZCIsImNvbG9yIiwiZm9udC1zaXplIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInJlc2V0RGF0YSIsImVtcHR5IiwiJGdhbWVPdmVyU2NyZWVuIiwiYmFja1RvTWVudSIsIiRpbnN0cnVjdGlvbnNCdG4iLCJoaWRlV2luZG93MSIsIiRiYWNrQnRuIiwiJHBsYXlCdG4iLCIkbmFtZSIsInNlbGVjdENoYXJhY3RlciIsIiR3YXJDcnkiLCJvbiIsIiRkZWZlbmQiLCIkbmV3R2FtZSIsImdldEl0ZW0iLCIkYXR0YWNrIiwiJGJhY2tUb01lbnUiLCIkcm9hciIsImhpZGVXaW5kb3cyIiwidG9UaGVHYW1lIiwibmV3R2FtZSJdLCJtYXBwaW5ncyI6IllBQUFBLEdBQUUsV0FtSEVDLFFBQUFBLEtBQ0RDLEVBQUFDLFlBQUEsVUFBQUMsU0FBQSxtQkFDREgsRUFBU0ksU0FBQUEsVUFFTCxRQUFNQyxLQVVOQyxFQUFTQyxTQUFPRixVQUFoQkgsWUFBQSxtQkFDREYsRUFBQUUsWUFBQSxVQUFBQyxTQUFBLG1CQUVILFFBQVNLLEtBQ1BSLElBQUFBLEdBQUFBLEdBQVNHLEVBQUFBLEVBQVNNLEVBQWxCQyxPQUFBQyxJQUFBLENBQ0FDLEdBQUFBLEdBQUFBLDBDQUNBUixFQURBUSxzQkFFREgsRUFBQUUsR0FBQUUsTUFGQ0QsbUNBR2tCSCxFQUFBRSxHQUFBRyxLQUhsQkYsMEJBSUFBLEVBQTBCRCxHQUFBSSxPQUoxQkgsMEJBS0FJLEVBQWlCZCxHQUFZZSxPQUw3QkwsMEJBTURILEVBQUFFLEdBQUFPLE9BTkNOLDRCQU9PTyxFQUFjUixHQUFBUyxTQVByQlIsNEJBVUFT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bnRlbnQiOlsiJCgoKSA9PiB7XG4gIGxldCBwbGF5ZXJOYW1lO1xuICBsZXQgcGxheWVyQ2hvc2VuO1xuICBsZXQgdmlsbGlhbkNob3NlbjtcbiAgbGV0IHBsYXllckxpZmUgPSAyMDtcbiAgbGV0IHZpbGxpYW5MaWZlID0gMjA7XG4gIGxldCB0dXJuID0gdHJ1ZTtcbiAgbGV0IHJvdW5kVGV4dDtcbiAgbGV0IHJvdW5kID0gMTtcbiAgbGV0IHNjb3JlID0gMDtcbiAgbGV0IGhpZ2hTY29yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaWdoU2NvcmUnKSB8fCAwO1xuXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ05pY2sgdGhlIENhdCcsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3BsYXllcjEuZ2lmJyxcbiAgICAgIGF0dGFjazogNCxcbiAgICAgIGN1cnJlbnRBdHRhY2s6IDQsXG4gICAgICB3YXJDcnk6IDMsXG4gICAgICBkZWZlbmQ6IDQsXG4gICAgICBhY2N1cmFjeTogMC41LFxuICAgICAgY3VycmVudEFjY3VyYWN5OiAwLjVcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdFbGxlbiBSaXBsZXknLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIyLmdpZicsXG4gICAgICBhdHRhY2s6IDUsXG4gICAgICBjdXJyZW50QXR0YWNrOiA1LFxuICAgICAgd2FyQ3J5OiAyLFxuICAgICAgZGVmZW5kOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuNSxcbiAgICAgIGN1cnJlbnRBY2N1cmFjeTogMC41XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnQ2F0emlsbGEnLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIzLmdpZicsXG4gICAgICBhdHRhY2s6IDQsXG4gICAgICBjdXJyZW50QXR0YWNrOiA0LFxuICAgICAgd2FyQ3J5OiA1LFxuICAgICAgZGVmZW5kOiAyLFxuICAgICAgYWNjdXJhY3k6IDAuNSxcbiAgICAgIGN1cnJlbnRBY2N1cmFjeTogMC41XG4gICAgfVxuICBdO1xuICBjb25zdCB2aWxsaWFucyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnSGVucnkgdGhlIEhvb3ZlcicsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4xLmdpZicsXG4gICAgICBhdHRhY2s6IDUsXG4gICAgICBhY2N1cmFjeTogMC4zLFxuICAgICAgY3VycmVudEFjY3VyYWN5OiAwLjNcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdYZW5vbW9ycGgnLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMi5naWYnLFxuICAgICAgYXR0YWNrOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuMyxcbiAgICAgIGN1cnJlbnRBY2N1cmFjeTogMC4zXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnUGluayBNZWR1c2EnLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMy5naWYnLFxuICAgICAgYXR0YWNrOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuMyxcbiAgICAgIGN1cnJlbnRBY2N1cmFjeTogMC4zXG4gICAgfVxuICBdO1xuXG4gIGNvbnN0ICRpbnN0cnVjdGlvbnMgPSAkKCcuaW5zdHJ1Y3Rpb25zJyk7XG4gIGNvbnN0ICRpbnN0cnVjdGlvbnNCdG4gPSAkKCcjaW5zdHJ1Y3Rpb25zJyk7XG4gIGNvbnN0ICR3ZWxjb21lID0gJCgnLndlbGNvbWUnKTtcbiAgY29uc3QgJGJhY2tCdG4gPSAkKCcjYmFjaycpO1xuICBjb25zdCAkcGxheUJ0biA9ICQoJyNwbGF5Jyk7XG4gIGNvbnN0ICRjaGFyYWN0ZXJTY3JlZW4gPSAkKCcuY2hhcmFjdGVyLXNjcmVlbicpO1xuICBjb25zdCAkY2hvaWNlcyA9ICQoJy5jaG9pY2VzJyk7XG4gIGNvbnN0ICRuYW1lID0gJCgnLm5hbWUnKTtcbiAgY29uc3QgJHN0YXJ0QnRuID0gJCgnI3N0YXJ0Jyk7XG4gIGNvbnN0ICRjaG9zZW5DaGFyYWN0ZXIgPSAkKCcuY2hvc2VuLWNoYXJhY3RlcicpO1xuICBjb25zdCAkZ2FtZVdpbmRvdyA9ICQoJy5nYW1lLXdpbmRvdycpO1xuICBjb25zdCAka2lja09mZkJ0biA9ICQoJyNraWNrLW9mZicpO1xuICBjb25zdCAkZ2FtZU92ZXJTY3JlZW4gPSAkKCcuZ2FtZS1vdmVyJyk7XG4gIGNvbnN0ICRhdHRhY2sgPSAkKCcjYXR0YWNrJyk7XG4gIGNvbnN0ICR3YXJDcnkgPSAkKCcjd2FyY3J5Jyk7XG4gIGNvbnN0ICRkZWZlbmQgPSAkKCcjZGVmZW5kJyk7XG4gIGNvbnN0ICRuZXdHYW1lID0gJCgnI25ldy1nYW1lJyk7XG4gIGNvbnN0ICRiYWNrVG9NZW51ID0gJCgnI2JhY2stdG8tbWVudScpO1xuICBjb25zdCAkc2NvcmUgPSAkKCcjcGxheWVyLXNjb3JlJyk7XG4gIGNvbnN0ICRoaWdoU2NvcmUgPSAkKCcuaGlnaC1zY29yZScpO1xuICBjb25zdCAkc2xhcEF1ZGlvID0gJCgnYXVkaW8nKVswXTtcbiAgY29uc3QgJHB1bmNoQXVkaW8gPSAkKCdhdWRpbycpWzFdO1xuICBjb25zdCAkc3dvb3NoQXVkaW8gPSAkKCdhdWRpbycpWzJdO1xuICBjb25zdCAkc3dvb3NoQXVkaW8yID0gJCgnYXVkaW8nKVszXTtcbiAgY29uc3QgJGdhbWVPdmVyQXVkaW8gPSAkKCdhdWRpbycpWzRdO1xuICBjb25zdCAkbGV2ZWxVcEF1ZGlvID0gJCgnYXVkaW8nKVs1XTtcbiAgY29uc3QgJG1lb3cgPSAkKCdhdWRpbycpWzZdO1xuICBjb25zdCAkcm9hciA9ICQoJ2F1ZGlvJylbN107XG4gIGNvbnN0ICRnZXRBd2F5ID0gJCgnYXVkaW8nKVs4XTtcbiAgY29uc3QgJHBsYXllck5hbWUgPSAkKCcucGxheWVyLW5hbWUnKTtcbiAgY29uc3QgJHBsYXllckltZyA9ICQoJy5wbGF5ZXItaW1nJyk7XG4gIGNvbnN0ICRwbGF5ZXJMaWZlID0gJCgnI3BsYXllci1saWZlJyk7XG4gIGNvbnN0ICRwbGF5ZXJDdXJyZW50QXR0YWNrID0gJCgnI3BsYXllci1jdXJyZW50LWF0dGFjaycpO1xuICBjb25zdCAkdmlsbGlhbkltZyA9ICQoJy52aWxsaWFuLWltZycpO1xuICBjb25zdCAkdmlsbGlhbk5hbWUgPSAkKCcudmlsbGlhbi1uYW1lJyk7XG4gIGNvbnN0ICR2aWxsaWFuTGlmZSA9ICQoJyN2aWxsaWFuLWxpZmUnKTtcbiAgY29uc3QgJHZpbGxpYW5BdHRhY2sgPSAkKCcjdmlsbGlhbi1hdHRhY2snKTtcbiAgY29uc3QgJHR1cm5SZXN1bHQgPSAkKCcjdHVybi1yZXN1bHQnKTtcbiAgY29uc3QgJHJvdW5kTnVtYmVyID0gJCgnI3JvdW5kLW5vJyk7XG4gIGNvbnN0ICRyb3VuZE1lc3NhZ2UgPSAkKCcjcm91bmQtbWVzc2FnZScpO1xuXG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cxKCl7XG4gICAgJGluc3RydWN0aW9ucy5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZhZGVJbicpO1xuICAgICR3ZWxjb21lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfVxuICBmdW5jdGlvbiBoaWRlV2luZG93Migpe1xuICAgICRpbnN0cnVjdGlvbnMuYWRkQ2xhc3MoJ2hpZGRlbicpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgICAkd2VsY29tZS5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZhZGVJbicpO1xuICB9XG4gIGZ1bmN0aW9uIGNyZWF0ZUNob2ljZXMoKXtcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgY2hhcmFjdGVycy5sZW5ndGg7IGkrKyl7XG4gICAgICBjb25zdCBjb250ZW50ID0gYFxuICAgICAgPGRpdiBjbGFzcz1cImNoYXJhY3RlclwiIGRhdGEtaWQ9JHtpfT5cbiAgICAgIDxpbWcgc3JjPVwiJHtjaGFyYWN0ZXJzW2ldLmltYWdlfVwiPlxuICAgICAgPHAgY2xhc3M9XCJ1bmRlcmxpbmVkXCI+JHtjaGFyYWN0ZXJzW2ldLm5hbWV9PC9wPlxuICAgICAgPHA+QXR0YWNrOiAke2NoYXJhY3RlcnNbaV0uYXR0YWNrfTwvcD5cbiAgICAgIDxwPldhckNyeTogJHtjaGFyYWN0ZXJzW2ldLndhckNyeX08L3A+XG4gICAgICA8cD5EZWZlbmQ6ICR7Y2hhcmFjdGVyc1tpXS5kZWZlbmR9PC9wPlxuICAgICAgPHA+QWNjdXJhY3k6ICR7Y2hhcmFjdGVyc1tpXS5hY2N1cmFjeX08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIGA7XG4gICAgICAkY2hvaWNlcy5hcHBlbmQoY29udGVudCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGdvVG9DaG9pY2VTY3JlZW4oKXtcbiAgICAkd2VsY29tZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZhZGVJbicpO1xuICAgIGNyZWF0ZUNob2ljZXMoKTtcbiAgfVxuICBmdW5jdGlvbiB0b1RoZUdhbWUoKXtcbiAgICAkY2hhcmFjdGVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkY2hvc2VuQ2hhcmFjdGVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluJyk7XG4gIH1cbiAgZnVuY3Rpb24gc3RhcnRUaGVHYW1lKCl7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGdhbWVXaW5kb3cucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgICAkaGlnaFNjb3JlLnRleHQoaGlnaFNjb3JlKTtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBkaXNwbGF5SGVhbHRoKCk7XG4gICAgICBkaXNwbGF5U2NvcmUoKTtcbiAgICAgIGRpc3BsYXlSb3VuZCgpO1xuICAgICAgZGlzcGxheUN1cnJlbnRBdHRhY2soKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIHVwZGF0ZUhpZ2hTY29yZSgpe1xuICAgIGhpZ2hTY29yZSA9IHNjb3JlID4gaGlnaFNjb3JlID8gc2NvcmUgOiBoaWdoU2NvcmU7XG4gICAgJGhpZ2hTY29yZS50ZXh0KGhpZ2hTY29yZSk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0VGhlTmFtZSgpe1xuICAgIHBsYXllck5hbWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgIGlmIChwbGF5ZXJOYW1lLmxlbmd0aCAhPT0gMCl7XG4gICAgICAka2lja09mZkJ0bi5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKS5hZGRDbGFzcygnYW5pbWF0ZWQgaW5maW5pdGUgcHVsc2UnKTtcbiAgICB9XG4gICAgJHBsYXllck5hbWUudGV4dChwbGF5ZXJOYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdENoYXJhY3Rlcigpe1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgaWYoaWQpe1xuICAgICAgJHN0YXJ0QnRuLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpLmFkZENsYXNzKCdhbmltYXRlZCBpbmZpbml0ZSBwdWxzZScpO1xuICAgIH1cbiAgICBwbGF5ZXJDaG9zZW4gPSBjaGFyYWN0ZXJzW2lkXTtcbiAgICB2aWxsaWFuQ2hvc2VuID0gdmlsbGlhbnNbaWRdO1xuICAgICQoJy5jaG9zZW4tY2hhcmFjdGVyIGltZywgLnBsYXllci1pbWcnKS5hdHRyKCdzcmMnLCBwbGF5ZXJDaG9zZW4uaW1hZ2UpO1xuICAgICQoJy5oZXhhZ29uJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybCgke3BsYXllckNob3Nlbi5pbWFnZX0pYCk7XG4gICAgJHZpbGxpYW5JbWcuYXR0cignc3JjJywgdmlsbGlhbkNob3Nlbi5pbWFnZSk7XG4gICAgJHZpbGxpYW5OYW1lLnRleHQodmlsbGlhbkNob3Nlbi5uYW1lKTtcbiAgICAkdmlsbGlhbkF0dGFjay50ZXh0KHZpbGxpYW5DaG9zZW4uYXR0YWNrKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVhbHRoKCl7XG4gICAgJHBsYXllckxpZmUuaHRtbChwbGF5ZXJMaWZlKTtcbiAgICAkdmlsbGlhbkxpZmUuaHRtbCh2aWxsaWFuTGlmZSk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVJvdW5kKCl7XG4gICAgJHJvdW5kTnVtYmVyLnRleHQoYFJvdW5kICR7cm91bmR9YCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheUN1cnJlbnRBdHRhY2soKXtcbiAgICAkcGxheWVyQ3VycmVudEF0dGFjay50ZXh0KHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5U2NvcmUoKXtcbiAgICAkc2NvcmUuaHRtbChzY29yZSk7XG4gIH1cbiAgZnVuY3Rpb24gdHVyblJlc3VsdFRleHQoKXtcbiAgICAkdHVyblJlc3VsdC50ZXh0KGAke3JvdW5kVGV4dH1gKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGF0dGFja1ZpbGxpYW4oKXtcbiAgICBjb25zb2xlLmxvZyhwbGF5ZXJDaG9zZW4uY3VycmVudEFjY3VyYWN5KTtcbiAgICBpZih0dXJuID09PSB0cnVlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCBwbGF5ZXJDaG9zZW4uY3VycmVudEFjY3VyYWN5KXtcbiAgICAgICAgdmlsbGlhbkxpZmUgLT0gcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2s7XG4gICAgICAgIHNjb3JlICs9IHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrO1xuICAgICAgICByb3VuZFRleHQgPSAnWW91IGhhdmUgaGl0IGhpbSEnO1xuICAgICAgICAkdmlsbGlhbkltZy5hZGRDbGFzcygnYW5pbWF0ZWQgc2hha2UnKTtcbiAgICAgICAgJHNsYXBBdWRpby5wbGF5KCk7XG4gICAgICB9IGVsc2V7XG4gICAgICAgICRzd29vc2hBdWRpby5wbGF5KCk7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdXaG9vb3BzISBBIG1pc3MuLi4nO1xuICAgICAgfVxuICAgICAgcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2sgPSBwbGF5ZXJDaG9zZW4uYXR0YWNrO1xuICAgICAgdHVyblJlc3VsdFRleHQoKTtcbiAgICAgICRwbGF5ZXJJbWcucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNoYWtlJyk7XG4gICAgICB0dXJuID0gZmFsc2U7XG4gICAgICB3aG9zZVR1cm4oKTtcbiAgICAgIGNoZWNrRm9yV2lubmVyKCk7XG4gICAgICB1cGRhdGVIaWdoU2NvcmUoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBhdHRhY2tQbGF5ZXIoKXtcbiAgICBjb25zb2xlLmxvZyh2aWxsaWFuQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeSk7XG4gICAgaWYodHVybiA9PT0gZmFsc2Upe1xuICAgICAgaWYoTWF0aC5yYW5kb20oKSA8IHZpbGxpYW5DaG9zZW4uY3VycmVudEFjY3VyYWN5KXtcbiAgICAgICAgcGxheWVyTGlmZSAtPSB2aWxsaWFuQ2hvc2VuLmF0dGFjaztcbiAgICAgICAgcm91bmRUZXh0ID0gJ0hlIGhpdCB5b3UhJztcbiAgICAgICAgJHB1bmNoQXVkaW8ucGxheSgpO1xuICAgICAgICAkcGxheWVySW1nLmFkZENsYXNzKCdhbmltYXRlZCBzaGFrZScpO1xuICAgICAgfSBlbHNle1xuICAgICAgICAkc3dvb3NoQXVkaW8yLnBsYXkoKTtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1lvdSBhcmUgc2FmZSEnO1xuICAgICAgfVxuICAgICAgJHZpbGxpYW5JbWcucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNoYWtlJyk7XG4gICAgICB0dXJuUmVzdWx0VGV4dCgpO1xuICAgICAgY2hlY2tGb3JXaW5uZXIoKTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHdob3NlVHVybigpO1xuICAgICAgfSwxMDAwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZGVmZW5kKCl7XG4gICAgJHR1cm5SZXN1bHQudGV4dCgnREVGRU5EISEhJyk7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrIC09IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrICs9IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgfSwgMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gd2FyQ3J5KCl7XG4gICAgaWYgKHBsYXllckNob3Nlbi5uYW1lID09PSAnTmljayB0aGUgQ2F0Jyl7XG4gICAgICAkbWVvdy5wbGF5KCk7XG4gICAgfSBlbHNlIGlmIChwbGF5ZXJDaG9zZW4ubmFtZSA9PT0gJ0NhdHppbGxhJyl7XG4gICAgICAkcm9hci5wbGF5KCk7XG4gICAgfSBlbHNlIGlmIChwbGF5ZXJDaG9zZW4ubmFtZSA9PT0gJ0VsbGVuIFJpcGxleScpe1xuICAgICAgJGdldEF3YXkucGxheSgpO1xuICAgIH1cbiAgICAkdHVyblJlc3VsdC50ZXh0KCdZb3UgaGF2ZSB1c2VkIFdhckNyeScpO1xuICAgIHR1cm4gPSBmYWxzZTtcbiAgICB3aG9zZVR1cm4oKTtcbiAgICBwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjayArPSBwbGF5ZXJDaG9zZW4ud2FyQ3J5O1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgfSwgMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gY2hlY2tGb3JXaW5uZXIoKXtcbiAgICBpZiAocGxheWVyTGlmZSA8PSAwKXtcbiAgICAgICRnYW1lT3ZlckF1ZGlvLnBsYXkoKTtcbiAgICAgIGdhbWVPdmVyKCk7XG4gICAgfVxuICAgIGlmKHZpbGxpYW5MaWZlIDw9IDApe1xuICAgICAgdmlsbGlhbkxpZmUgPSAwO1xuICAgICAgJHJvdW5kTWVzc2FnZS50ZXh0KCdZb3Ugd29uIHRoaXMgcm91bmQhISEgVGEtZGEhIScpLmNzcyh7J2NvbG9yJzogJyNDNUQyMDAnLCAnZm9udC1zaXplJzogJzI4cHgnfSk7XG4gICAgICAkbGV2ZWxVcEF1ZGlvLnBsYXkoKTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG5leHRSb3VuZCgpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHdob3NlVHVybigpe1xuICAgIGlmICh0dXJuID09PSBmYWxzZSl7XG4gICAgICAkcGxheWVySW1nLnJlbW92ZUNsYXNzKCdpbWctYWN0aXZlJyk7XG4gICAgfVxuICAgIGlmICh0dXJuID09PSB0cnVlKXtcbiAgICAgICRwbGF5ZXJJbWcuYWRkQ2xhc3MoJ2ltZy1hY3RpdmUnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbmV4dFJvdW5kKCl7XG4gICAgcGxheWVyQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeSArPSAwLjAxO1xuICAgIHZpbGxpYW5DaG9zZW4uY3VycmVudEFjY3VyYWN5ICs9IDAuMDU7XG4gICAgcm91bmQgKz0gMTtcbiAgICB2aWxsaWFuTGlmZSA9IDIwO1xuICAgIHBsYXllckxpZmUgPSAyMCAgKyByb3VuZDtcbiAgICByb3VuZFRleHQgPSAnJztcbiAgICAkcm91bmRNZXNzYWdlLnRleHQoJycpO1xuICAgIHR1cm5SZXN1bHRUZXh0KCk7XG4gICAgd2hvc2VUdXJuKCk7XG5cbiAgfVxuICBmdW5jdGlvbiBnYW1lT3Zlcigpe1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoaWdoU2NvcmUnLCBoaWdoU2NvcmUpO1xuICAgICRnYW1lV2luZG93LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkZ2FtZU92ZXJTY3JlZW4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgICByZXNldERhdGEoKTtcbiAgfVxuICBmdW5jdGlvbiByZXNldERhdGEoKXtcbiAgICByb3VuZFRleHQgPSAnJztcbiAgICB0dXJuUmVzdWx0VGV4dCgpO1xuICAgIHBsYXllckxpZmUgPSAyMDtcbiAgICB2aWxsaWFuTGlmZSA9IDIwO1xuICAgIHJvdW5kID0gMTtcbiAgICBzY29yZSA9IDA7XG4gICAgcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2sgPSBwbGF5ZXJDaG9zZW4uYXR0YWNrO1xuICAgIHBsYXllckNob3Nlbi5jdXJyZW50QWNjdXJhY3kgPSBwbGF5ZXJDaG9zZW4uYWNjdXJhY3k7XG4gICAgdmlsbGlhbkNob3Nlbi5jdXJyZW50QWNjdXJhY3kgPSB2aWxsaWFuQ2hvc2VuLmFjY3VyYWN5O1xuICAgIHR1cm4gPSB0cnVlO1xuICAgICRjaG9pY2VzLmVtcHR5KCk7XG4gICAgKCR2aWxsaWFuSW1nLCAkcGxheWVySW1nKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgc2hha2UnKTtcbiAgICAoJGtpY2tPZmZCdG4sICRzdGFydEJ0bikucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIGluZmluaXRlIHB1bHNlJyk7XG4gIH1cbiAgZnVuY3Rpb24gbmV3R2FtZSgpe1xuICAgICRnYW1lT3ZlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgc3RhcnRUaGVHYW1lKCk7XG4gIH1cbiAgZnVuY3Rpb24gYmFja1RvTWVudSgpe1xuICAgICRnYW1lT3ZlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgfVxuICAkaW5zdHJ1Y3Rpb25zQnRuLm9uKCdjbGljaycsIGhpZGVXaW5kb3cxKTtcbiAgJGJhY2tCdG4ub24oJ2NsaWNrJywgaGlkZVdpbmRvdzIpO1xuICAkcGxheUJ0bi5vbignY2xpY2snLCBnb1RvQ2hvaWNlU2NyZWVuKTtcbiAgJHN0YXJ0QnRuLm9uKCdjbGljaycsIHRvVGhlR2FtZSk7XG4gICRuYW1lLm9uKCdrZXl1cCcsIGdldFRoZU5hbWUpO1xuICAkY2hvaWNlcy5vbignY2xpY2snLCAnLmNoYXJhY3RlcicsIHNlbGVjdENoYXJhY3Rlcik7XG4gICRraWNrT2ZmQnRuLm9uKCdjbGljaycsIHN0YXJ0VGhlR2FtZSk7XG4gICRhdHRhY2sub24oJ2NsaWNrJywgYXR0YWNrVmlsbGlhbik7XG4gICR3YXJDcnkub24oJ2NsaWNrJywgd2FyQ3J5KTtcbiAgJGRlZmVuZC5vbignY2xpY2snLCBkZWZlbmQpO1xuICAkbmV3R2FtZS5vbignY2xpY2snLCBuZXdHYW1lKTtcbiAgJGJhY2tUb01lbnUub24oJ2NsaWNrJywgYmFja1RvTWVudSk7XG59KTtcbiJdfQ==
