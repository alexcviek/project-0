"use strict";$(function(){function e(){z.removeClass("hidden"),G.addClass("hidden")}function t(){z.addClass("hidden"),G.removeClass("hidden")}function a(){G.addClass("hidden"),X.removeClass("hidden")}function n(){X.addClass("hidden"),F.removeClass("hidden")}function c(){F.addClass("hidden"),J.removeClass("hidden"),s(),l(),r()}function i(){x=$(this).val(),0===x.length&&alert("You must provide your name"),$("#name").text("Get ready, "+x+"!"),$(".player-name").text(x)}function o(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("id");e&&D.attr("disabled",!1),b=N[e],w=j[e],$(".chosen-character img, .player").attr("src",b.image),$(".villian").attr("src",w.image),$(".villian-name").text(w.name)}function s(){setInterval(function(){$("#player-health").html(A),$("#villian-score").html(T)},500)}function r(){setInterval(function(){$("#round-no").text("Round "+I)},500)}function l(){setInterval(function(){$("#player-score").html(H)},500)}function d(){!0===M&&(Math.random()<b.accuracy?(console.log(b.currentAttack),T-=b.currentAttack,b.currentAttack=b.attack,console.log(b.currentAttack),H+=5,Y="You have hit him!"):Y="Whooops! A miss...",$("#battle-text").text(""+Y),M=!1,k(),h(),setTimeout(function(){u()},3e3))}function u(){!1===M&&(Math.random()<w.accuracy?(A-=w.attack,Y="He hit you!"):Y="You are safe!",$("#battle-text").text(""+Y),h(),M=!0,k())}function m(){M=!1,k(),w.attack-=b.defend,setTimeout(function(){u(),w.attack+=b.defend},2e3)}function f(){M=!1,k(),b.currentAttack+=b.warCry,setTimeout(function(){u()},2e3)}function h(){A<=0&&(v(),M=!0),T<=0&&($("#winner").text("You won this round!!! Ta-da!!").css({color:"red","font-size":"30px"}),M=!0,setTimeout(function(){g()},2e3))}function k(){!1===M&&(console.log("not your turn"),$(".player-section img").removeClass("img-active")),!0===M&&(console.log("your turn"),$(".player-section img").addClass("img-active"))}function g(){I+=1,T=25*I,A=20*I,Y="",$("#winner").text(""),$("#battle-text").text(""+Y)}function v(){J.addClass("hidden"),L.removeClass("hidden")}function y(){Y="",$("#battle-text").text(""+Y),A=20,T=20,I=1,H=0}function C(){L.addClass("hidden"),y(),c()}function p(){L.addClass("hidden"),G.removeClass("hidden"),y()}var x=void 0,b=void 0,w=void 0,A=20,T=20,M=!0,Y=void 0,I=1,H=0,N={one:{name:"Nick",image:"public/assets/images/player1.gif",attack:4,currentAttack:4,warCry:2,defend:4,accuracy:.4},two:{name:"Ellen",image:"public/assets/images/player2.gif",attack:10,currentAttack:10,warCry:5,defend:5,accuracy:.7},three:{name:"Mutant Nick",image:"public/assets/images/player3.gif",attack:6,currentAttack:6,warCry:1,defend:2,accuracy:.5}},j={one:{name:"Henry",image:"public/assets/images/villian3.jpg",attack:5,accuracy:.5},two:{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:3,accuracy:.3},three:{name:"Medusa",image:"public/assets/images/villian3.gif",attack:4,accuracy:.56}},z=$(".instructions"),E=$("#instructions"),G=$(".welcome"),R=$("#back"),W=$("#play"),X=$(".character-screen"),q=$(".character"),B=$(".name"),D=$("#start"),F=$(".chosen-character"),J=$(".game-window"),K=$("#kick-off"),L=$(".game-over");E.on("click",e),R.on("click",t),W.on("click",a),D.on("click",n),B.on("keyup",i),q.on("click",o),K.on("click",c),$("#attack").on("click",d),$("#warcry").on("click",f),$("#defend").on("click",m),$("#yes").on("click",C),$("#no").on("click",p)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiaGlkZVdpbmRvdzEiLCIkaW5zdHJ1Y3Rpb25zIiwicmVtb3ZlQ2xhc3MiLCJoaWRlV2luZG93MiIsImFkZENsYXNzIiwiZ29Ub0Nob2ljZVNjcmVlbiIsIiR3ZWxjb21lIiwidG9UaGVHYW1lIiwiJGNoYXJhY3RlclNjcmVlbiIsInN0YXJ0VGhlR2FtZSIsIiRjaG9zZW5DaGFyYWN0ZXIiLCIkZ2FtZVdpbmRvdyIsImRpc3BsYXlIZWFsdGgiLCJkaXNwbGF5U2NvcmUiLCJnZXRUaGVOYW1lIiwicGxheWVyTmFtZSIsInZhbCIsImxlbmd0aCIsImFsZXJ0IiwidGV4dCIsInNlbGVjdENoYXJhY3RlciIsInRoaXMiLCJzaWJsaW5ncyIsImlkIiwiYXR0ciIsIiRzdGFydEJ0biIsInBsYXllckNob3NlbiIsImNoYXJhY3RlcnMiLCJ2aWxsaWFuQ2hvc2VuIiwiaW1hZ2UiLCJzZXRJbnRlcnZhbCIsImh0bWwiLCJwbGF5ZXJMaWZlIiwiZGlzcGxheVJvdW5kIiwicm91bmQiLCJzY29yZSIsImF0dGFja1ZpbGxpYW4iLCJ0dXJuIiwiYWNjdXJhY3kiLCJjb25zb2xlIiwicmFuZG9tIiwiY3VycmVudEF0dGFjayIsInZpbGxpYW5MaWZlIiwiYXR0YWNrIiwibG9nIiwicm91bmRUZXh0Iiwid2hvc2VUdXJuIiwiY2hlY2tGb3JXaW5uZXIiLCJzZXRUaW1lb3V0IiwiYXR0YWNrUGxheWVyIiwiZGVmZW5kIiwid2FyQ3J5IiwiZ2FtZU92ZXIiLCJjc3MiLCJjb2xvciIsImZvbnQtc2l6ZSIsIm5leHRSb3VuZCIsInJlc2V0RGF0YSIsIm5ld0dhbWUiLCIkZ2FtZU92ZXJTY3JlZW4iLCJiYWNrVG9NZW51Iiwib25lIiwibmFtZSIsInR3byIsInRocmVlIiwidmlsbGlhbnMiLCIkaW5zdHJ1Y3Rpb25zQnRuIiwiJGJhY2tCdG4iLCIkcGxheUJ0biIsIiRjaGFyYWN0ZXIiLCIkbmFtZSIsIm9uIiwiJGtpY2tPZmZCdG4iXSwibWFw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QUFBLGlCQXNCTW1FLEVBQW1CbkUsRUFBRSxpQkFEckJFLEVBQUFBLEVBQUFBLFlBQ0FpRSxFQUFBQSxFQUFBQSxTQUNBNUQsRUFBYVAsRUFBQSxTQUNib0UsRUFBTnBFLEVBQUEscUJBQ01xRSxFQUFhckUsRUFBQSxjQUNiUyxFQUFBQSxFQUFBQSxTQUNBNkQsRUFBYXRFLEVBQUUsVUFDZnVFLEVBQU52RSxFQUFBLHFCQUNNMEIsRUFBYzFCLEVBQUEsZ0JBQ2RXLEVBQUFBLEVBQUFBLGFBQ0FDLEVBQWdCWixFQUFBLGFBMEtyQm1FLEdBQUFLLEdBQUEsUUFBQXZFLEdBQ0RrRSxFQUFBQSxHQUFBQSxRQUFvQi9ELEdBQ3BCZ0UsRUFBU0ksR0FBRyxRQUFTcEUsR0FDckJpRSxFQUFTRyxHQUFHLFFBQVNsRSxHQUNyQm9CLEVBQUFBLEdBQUFBLFFBQWFYLEdBQ2J3RCxFQUFTQyxHQUFBLFFBQVN6RCxHQUNsQnVELEVBQVdFLEdBQUcsUUFBU25ELEdBQ3ZCb0QsRUFBQUEsV0FBWUQsR0FBRyxRQUFTOUQsR0FDeEJWLEVBQUUsV0FBV3dFLEdBQUcsUUFBU25DLEdBQ3pCckMsRUFBRSxXQUFXd0UsR0FBRyxRQUFTcEIsR0FDekJwRCxFQUFFLFFBQUF3RSxHQUFXQSxRQUFHYixHQUNoQjNELEVBQUUsT0FBRndFLEdBQUEsUUFBQVgiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJCgoKSA9PiB7XG4gIGxldCBwbGF5ZXJOYW1lO1xuICBsZXQgcGxheWVyQ2hvc2VuO1xuICBsZXQgdmlsbGlhbkNob3NlbjtcbiAgbGV0IHBsYXllckxpZmUgPSAyMDtcbiAgbGV0IHZpbGxpYW5MaWZlID0gMjA7XG4gIGxldCB0dXJuID0gdHJ1ZTtcbiAgbGV0IHJvdW5kVGV4dDtcbiAgbGV0IHJvdW5kID0gMTtcbiAgbGV0IHNjb3JlID0gMDtcbiAgLy8gY29uc3QgJGhpZ2hTY29yZSA9ICQoJy5oaWdoLXNjb3JlJyk7XG4gIC8vIGxldCBoaWdoU2NvcmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGlnaFNjb3JlJykgfHwgMDtcbiAgLy8gJGhpZ2hTY29yZS50ZXh0KGhpZ2hTY29yZSk7XG5cbiAgY29uc3QgY2hhcmFjdGVycyA9IHtcbiAgICBvbmU6IHtcbiAgICAgIG5hbWU6ICdOaWNrJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMS5naWYnLFxuICAgICAgYXR0YWNrOiA0LFxuICAgICAgY3VycmVudEF0dGFjazogNCxcbiAgICAgIHdhckNyeTogMixcbiAgICAgIGRlZmVuZDogNCxcbiAgICAgIGFjY3VyYWN5OiAwLjRcbiAgICB9LFxuICAgIHR3bzoge1xuICAgICAgbmFtZTogJ0VsbGVuJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMi5naWYnLFxuICAgICAgYXR0YWNrOiAxMCxcbiAgICAgIGN1cnJlbnRBdHRhY2s6IDEwLFxuICAgICAgd2FyQ3J5OiA1LFxuICAgICAgZGVmZW5kOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuN1xuICAgIH0sXG4gICAgdGhyZWU6IHtcbiAgICAgIG5hbWU6ICdNdXRhbnQgTmljaycsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3BsYXllcjMuZ2lmJyxcbiAgICAgIGF0dGFjazogNixcbiAgICAgIGN1cnJlbnRBdHRhY2s6IDYsXG4gICAgICB3YXJDcnk6IDEsXG4gICAgICBkZWZlbmQ6IDIsXG4gICAgICBhY2N1cmFjeTogMC41XG4gICAgfVxuICB9O1xuICBjb25zdCB2aWxsaWFucyA9IHtcbiAgICBvbmU6IHtcbiAgICAgIG5hbWU6ICdIZW5yeScsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4zLmpwZycsXG4gICAgICBhdHRhY2s6IDUsXG4gICAgICBhY2N1cmFjeTogMC41XG4gICAgfSxcbiAgICB0d286IHtcbiAgICAgIG5hbWU6ICdYZW5vbW9ycGgnLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMi5naWYnLFxuICAgICAgYXR0YWNrOiAzLFxuICAgICAgYWNjdXJhY3k6IDAuM1xuICAgIH0sXG4gICAgdGhyZWU6IHtcbiAgICAgIG5hbWU6ICdNZWR1c2EnLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMy5naWYnLFxuICAgICAgYXR0YWNrOiA0LFxuICAgICAgYWNjdXJhY3k6IDAuNTZcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgJGluc3RydWN0aW9ucyA9ICQoJy5pbnN0cnVjdGlvbnMnKTtcbiAgY29uc3QgJGluc3RydWN0aW9uc0J0biA9ICQoJyNpbnN0cnVjdGlvbnMnKTtcbiAgY29uc3QgJHdlbGNvbWUgPSAkKCcud2VsY29tZScpO1xuICBjb25zdCAkYmFja0J0biA9ICQoJyNiYWNrJyk7XG4gIGNvbnN0ICRwbGF5QnRuID0gJCgnI3BsYXknKTtcbiAgY29uc3QgJGNoYXJhY3RlclNjcmVlbiA9ICQoJy5jaGFyYWN0ZXItc2NyZWVuJyk7XG4gIGNvbnN0ICRjaGFyYWN0ZXIgPSAkKCcuY2hhcmFjdGVyJyk7XG4gIGNvbnN0ICRuYW1lID0gJCgnLm5hbWUnKTtcbiAgY29uc3QgJHN0YXJ0QnRuID0gJCgnI3N0YXJ0Jyk7XG4gIGNvbnN0ICRjaG9zZW5DaGFyYWN0ZXIgPSAkKCcuY2hvc2VuLWNoYXJhY3RlcicpO1xuICBjb25zdCAkZ2FtZVdpbmRvdyA9ICQoJy5nYW1lLXdpbmRvdycpO1xuICBjb25zdCAka2lja09mZkJ0biA9ICQoJyNraWNrLW9mZicpO1xuICBjb25zdCAkZ2FtZU92ZXJTY3JlZW4gPSAkKCcuZ2FtZS1vdmVyJyk7XG5cblxuICBmdW5jdGlvbiBoaWRlV2luZG93MSgpe1xuICAgICRpbnN0cnVjdGlvbnMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICR3ZWxjb21lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgfVxuICBmdW5jdGlvbiBoaWRlV2luZG93Migpe1xuICAgICRpbnN0cnVjdGlvbnMuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICR3ZWxjb21lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfVxuICBmdW5jdGlvbiBnb1RvQ2hvaWNlU2NyZWVuKCl7XG4gICAgJHdlbGNvbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRjaGFyYWN0ZXJTY3JlZW4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIHRvVGhlR2FtZSgpe1xuICAgICRjaGFyYWN0ZXJTY3JlZW4uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRjaG9zZW5DaGFyYWN0ZXIucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIHN0YXJ0VGhlR2FtZSgpe1xuICAgICRjaG9zZW5DaGFyYWN0ZXIuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRnYW1lV2luZG93LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICBkaXNwbGF5SGVhbHRoKCk7XG4gICAgZGlzcGxheVNjb3JlKCk7XG4gICAgZGlzcGxheVJvdW5kKCk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0VGhlTmFtZSgpe1xuICAgIHBsYXllck5hbWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgIGlmIChwbGF5ZXJOYW1lLmxlbmd0aCA9PT0gMCl7XG4gICAgICBhbGVydCgnWW91IG11c3QgcHJvdmlkZSB5b3VyIG5hbWUnKTtcbiAgICB9XG4gICAgJCgnI25hbWUnKS50ZXh0KGBHZXQgcmVhZHksICR7cGxheWVyTmFtZX0hYCk7XG4gICAgJCgnLnBsYXllci1uYW1lJykudGV4dChwbGF5ZXJOYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdENoYXJhY3Rlcigpe1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgIGlmKGlkKXtcbiAgICAgICRzdGFydEJ0bi5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gICAgcGxheWVyQ2hvc2VuID0gY2hhcmFjdGVyc1tpZF07XG4gICAgdmlsbGlhbkNob3NlbiA9IHZpbGxpYW5zW2lkXTtcbiAgICAkKCcuY2hvc2VuLWNoYXJhY3RlciBpbWcsIC5wbGF5ZXInKS5hdHRyKCdzcmMnLCBwbGF5ZXJDaG9zZW4uaW1hZ2UpO1xuICAgICQoJy52aWxsaWFuJykuYXR0cignc3JjJywgdmlsbGlhbkNob3Nlbi5pbWFnZSk7XG4gICAgJCgnLnZpbGxpYW4tbmFtZScpLnRleHQodmlsbGlhbkNob3Nlbi5uYW1lKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVhbHRoKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgJCgnI3BsYXllci1oZWFsdGgnKS5odG1sKHBsYXllckxpZmUpO1xuICAgICAgJCgnI3ZpbGxpYW4tc2NvcmUnKS5odG1sKHZpbGxpYW5MaWZlKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlSb3VuZCgpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNyb3VuZC1ubycpLnRleHQoYFJvdW5kICR7cm91bmR9YCk7XG4gICAgfSwgNTAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5U2NvcmUoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAkKCcjcGxheWVyLXNjb3JlJykuaHRtbChzY29yZSk7XG4gICAgfSwgNTAwKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGF0dGFja1ZpbGxpYW4oKXtcbiAgICBpZih0dXJuID09PSB0cnVlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCBwbGF5ZXJDaG9zZW4uYWNjdXJhY3kpe1xuICAgICAgICBjb25zb2xlLmxvZyhwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjayk7XG4gICAgICAgIHZpbGxpYW5MaWZlIC09IHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrO1xuICAgICAgICBwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjayA9IHBsYXllckNob3Nlbi5hdHRhY2s7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrKTtcbiAgICAgICAgc2NvcmUgKz0gNTtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1lvdSBoYXZlIGhpdCBoaW0hJztcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1dob29vcHMhIEEgbWlzcy4uLic7XG4gICAgICB9XG4gICAgICAkKCcjYmF0dGxlLXRleHQnKS50ZXh0KGAke3JvdW5kVGV4dH1gKTtcbiAgICAgIHR1cm4gPSBmYWxzZTtcbiAgICAgIHdob3NlVHVybigpO1xuICAgICAgY2hlY2tGb3JXaW5uZXIoKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBhdHRhY2tQbGF5ZXIoKXtcbiAgICBpZih0dXJuID09PSBmYWxzZSl7XG4gICAgICBpZihNYXRoLnJhbmRvbSgpIDwgdmlsbGlhbkNob3Nlbi5hY2N1cmFjeSl7XG4gICAgICAgIHBsYXllckxpZmUgLT0gdmlsbGlhbkNob3Nlbi5hdHRhY2s7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdIZSBoaXQgeW91ISc7XG4gICAgICB9IGVsc2V7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdZb3UgYXJlIHNhZmUhJztcbiAgICAgIH1cbiAgICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgICAgY2hlY2tGb3JXaW5uZXIoKTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgICAgd2hvc2VUdXJuKCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlZmVuZCgpe1xuICAgIHR1cm4gPSBmYWxzZTtcbiAgICB3aG9zZVR1cm4oKTtcbiAgICB2aWxsaWFuQ2hvc2VuLmF0dGFjayAtPSBwbGF5ZXJDaG9zZW4uZGVmZW5kO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgICB2aWxsaWFuQ2hvc2VuLmF0dGFjayArPSBwbGF5ZXJDaG9zZW4uZGVmZW5kO1xuICAgIH0sIDIwMDApO1xuICB9XG4gIGZ1bmN0aW9uIHdhckNyeSgpe1xuICAgIHR1cm4gPSBmYWxzZTtcbiAgICB3aG9zZVR1cm4oKTtcbiAgICBwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjayArPSBwbGF5ZXJDaG9zZW4ud2FyQ3J5O1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgfSwgMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gY2hlY2tGb3JXaW5uZXIoKXtcbiAgICBpZiAocGxheWVyTGlmZSA8PSAwKXtcbiAgICAgIGdhbWVPdmVyKCk7XG4gICAgICB0dXJuID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYodmlsbGlhbkxpZmUgPD0gMCl7XG4gICAgICAkKCcjd2lubmVyJykudGV4dCgnWW91IHdvbiB0aGlzIHJvdW5kISEhIFRhLWRhISEnKS5jc3Moeydjb2xvcic6ICdyZWQnLCAnZm9udC1zaXplJzogJzMwcHgnfSk7XG4gICAgICB0dXJuID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBuZXh0Um91bmQoKTtcbiAgICAgIH0sIDIwMDApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB3aG9zZVR1cm4oKXtcbiAgICBpZiAodHVybiA9PT0gZmFsc2Upe1xuICAgICAgY29uc29sZS5sb2coJ25vdCB5b3VyIHR1cm4nKTtcbiAgICAgICQoJy5wbGF5ZXItc2VjdGlvbiBpbWcnKS5yZW1vdmVDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgICBpZiAodHVybiA9PT0gdHJ1ZSl7XG4gICAgICBjb25zb2xlLmxvZygneW91ciB0dXJuJyk7XG4gICAgICAkKCcucGxheWVyLXNlY3Rpb24gaW1nJykuYWRkQ2xhc3MoJ2ltZy1hY3RpdmUnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbmV4dFJvdW5kKCl7XG4gICAgcm91bmQgKz0gMTtcbiAgICB2aWxsaWFuTGlmZSA9IDI1ICogcm91bmQ7XG4gICAgcGxheWVyTGlmZSA9IDIwICAqIHJvdW5kO1xuICAgIHJvdW5kVGV4dCA9ICcnO1xuICAgICQoJyN3aW5uZXInKS50ZXh0KCcnKTtcbiAgICAkKCcjYmF0dGxlLXRleHQnKS50ZXh0KGAke3JvdW5kVGV4dH1gKTtcbiAgfVxuICBmdW5jdGlvbiBnYW1lT3Zlcigpe1xuICAgICRnYW1lV2luZG93LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkZ2FtZU92ZXJTY3JlZW4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc2V0RGF0YSgpe1xuICAgIHJvdW5kVGV4dCA9ICcnO1xuICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgIHBsYXllckxpZmUgPSAyMDtcbiAgICB2aWxsaWFuTGlmZSA9IDIwO1xuICAgIHJvdW5kID0gMTtcbiAgICBzY29yZSA9IDA7XG4gIH1cbiAgZnVuY3Rpb24gbmV3R2FtZSgpe1xuICAgICRnYW1lT3ZlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgcmVzZXREYXRhKCk7XG4gICAgc3RhcnRUaGVHYW1lKCk7XG4gIH1cbiAgZnVuY3Rpb24gYmFja1RvTWVudSgpe1xuICAgICRnYW1lT3ZlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIHJlc2V0RGF0YSgpO1xuICB9XG4gICRpbnN0cnVjdGlvbnNCdG4ub24oJ2NsaWNrJywgaGlkZVdpbmRvdzEpO1xuICAkYmFja0J0bi5vbignY2xpY2snLCBoaWRlV2luZG93Mik7XG4gICRwbGF5QnRuLm9uKCdjbGljaycsIGdvVG9DaG9pY2VTY3JlZW4pO1xuICAkc3RhcnRCdG4ub24oJ2NsaWNrJywgdG9UaGVHYW1lKTtcbiAgJG5hbWUub24oJ2tleXVwJywgZ2V0VGhlTmFtZSk7XG4gICRjaGFyYWN0ZXIub24oJ2NsaWNrJywgc2VsZWN0Q2hhcmFjdGVyKTtcbiAgJGtpY2tPZmZCdG4ub24oJ2NsaWNrJywgc3RhcnRUaGVHYW1lKTtcbiAgJCgnI2F0dGFjaycpLm9uKCdjbGljaycsIGF0dGFja1ZpbGxpYW4pO1xuICAkKCcjd2FyY3J5Jykub24oJ2NsaWNrJywgd2FyQ3J5KTtcbiAgJCgnI2RlZmVuZCcpLm9uKCdjbGljaycsIGRlZmVuZCk7XG4gICQoJyN5ZXMnKS5vbignY2xpY2snLCBuZXdHYW1lKTtcbiAgJCgnI25vJykub24oJ2NsaWNrJywgYmFja1RvTWVudSk7XG59KTtcbiJdfQ==
