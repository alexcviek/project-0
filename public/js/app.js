"use strict";$(function(){function t(){E.removeClass("hidden"),W.addClass("hidden")}function e(){E.addClass("hidden"),W.removeClass("hidden")}function a(){W.addClass("hidden"),B.removeClass("hidden")}function n(){B.addClass("hidden"),J.removeClass("hidden")}function c(){J.addClass("hidden"),K.removeClass("hidden"),o(),d(),r(),l()}function i(){b=$(this).val(),0===b.length&&alert("You must provide your name"),$(".player-name").text(b)}function s(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).attr("id");t&&G.attr("disabled",!1),w=j[t],A=z[t],$(".chosen-character img, .player").attr("src",w.image),$(".villian").attr("src",A.image),$(".villian-name").text(A.name)}function o(){setInterval(function(){$("#player-health").html(T),$("#villian-score").html(I)},500)}function r(){setInterval(function(){$("#round-no").text("Round "+H)},500)}function l(){setInterval(function(){$("#current-attack").text(w.currentAttack)},500)}function d(){setInterval(function(){$("#player-score").html(N)},500)}function u(){!0===M&&(Math.random()<w.accuracy?(I-=w.currentAttack,N+=w.currentAttack,Y="You have hit him!"):Y="Whooops! A miss...",w.currentAttack=w.attack,$("#battle-text").text(""+Y),M=!1,v(),k(),setTimeout(function(){m()},3e3))}function m(){!1===M&&(Math.random()<A.accuracy?(T-=A.attack,Y="He hit you!"):Y="You are safe!",$("#battle-text").text(""+Y),k(),M=!0,v())}function f(){$("#battle-text").text(""),M=!1,v(),A.attack-=w.defend,setTimeout(function(){m(),A.attack+=w.defend},2e3)}function h(){$("#battle-text").text(""),M=!1,v(),w.currentAttack+=w.warCry,setTimeout(function(){m()},2e3)}function k(){T<=0&&y(),I<=0&&($("#winner").text("You won this round!!! Ta-da!!").css({color:"red","font-size":"30px"}),M=!0,setTimeout(function(){g()},2e3))}function v(){!1===M&&$(".player-section img").removeClass("img-active"),!0===M&&$(".player-section img").addClass("img-active")}function g(){H+=1,I=25*H,T=20*H,Y="",$("#winner").text(""),$("#battle-text").text(""+Y)}function y(){K.addClass("hidden"),O.removeClass("hidden")}function C(){Y="",$("#battle-text").text(""+Y),T=20,I=20,H=1,N=0,M=!0}function p(){O.addClass("hidden"),C(),c()}function x(){O.addClass("hidden"),W.removeClass("hidden"),C()}var b=void 0,w=void 0,A=void 0,T=20,I=20,M=!0,Y=void 0,H=1,N=0,j={one:{name:"Nick",image:"public/assets/images/player1.gif",attack:4,currentAttack:4,warCry:2,defend:4,accuracy:.4},two:{name:"Ellen",image:"public/assets/images/player2.gif",attack:10,currentAttack:10,warCry:5,defend:5,accuracy:.6},three:{name:"Mutant Nick",image:"public/assets/images/player3.gif",attack:6,currentAttack:6,warCry:1,defend:2,accuracy:.5}},z={one:{name:"Henry",image:"public/assets/images/villian3.jpg",attack:5,accuracy:.5},two:{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:2,accuracy:.5},three:{name:"Medusa",image:"public/assets/images/villian3.gif",attack:4,accuracy:.56}},E=$(".instructions"),R=$("#instructions"),W=$(".welcome"),X=$("#back"),q=$("#play"),B=$(".character-screen"),D=$(".character"),F=$(".name"),G=$("#start"),J=$(".chosen-character"),K=$(".game-window"),L=$("#kick-off"),O=$(".game-over"),P=$("#attack"),Q=$("#warcry"),S=$("#defend"),U=$("#new-game"),V=$("#back-to-menu");R.on("click",t),X.on("click",e),q.on("click",a),G.on("click",n),F.on("keyup",i),D.on("click",s),L.on("click",c),P.on("click",u),Q.on("click",h),S.on("click",f),U.on("click",p),V.on("click",x)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiaGlkZVdpbmRvdzEiLCIkaW5zdHJ1Y3Rpb25zIiwicmVtb3ZlQ2xhc3MiLCJoaWRlV2luZG93MiIsImFkZENsYXNzIiwiZ29Ub0Nob2ljZVNjcmVlbiIsIiR3ZWxjb21lIiwidG9UaGVHYW1lIiwiJGNoYXJhY3RlclNjcmVlbiIsInN0YXJ0VGhlR2FtZSIsIiRjaG9zZW5DaGFyYWN0ZXIiLCIkZ2FtZVdpbmRvdyIsImRpc3BsYXlIZWFsdGgiLCJkaXNwbGF5U2NvcmUiLCJkaXNwbGF5Um91bmQiLCJnZXRUaGVOYW1lIiwicGxheWVyTmFtZSIsInZhbCIsImxlbmd0aCIsImFsZXJ0IiwidGV4dCIsInNlbGVjdENoYXJhY3RlciIsInRoaXMiLCJzaWJsaW5ncyIsImlkIiwiYXR0ciIsIiRzdGFydEJ0biIsInBsYXllckNob3NlbiIsImNoYXJhY3RlcnMiLCJ2aWxsaWFuQ2hvc2VuIiwiaW1hZ2UiLCJzZXRJbnRlcnZhbCIsImh0bWwiLCJwbGF5ZXJMaWZlIiwicm91bmQiLCJkaXNwbGF5Q3VycmVudEF0dGFjayIsImN1cnJlbnRBdHRhY2siLCJzY29yZSIsImF0dGFja1ZpbGxpYW4iLCJ0dXJuIiwiYWNjdXJhY3kiLCJ2aWxsaWFuTGlmZSIsInJvdW5kVGV4dCIsImF0dGFjayIsIndob3NlVHVybiIsImNoZWNrRm9yV2lubmVyIiwic2V0VGltZW91dCIsImF0dGFja1BsYXllciIsImRlZmVuZCIsIndhckNyeSIsImdhbWVPdmVyIiwiY3NzIiwiY29sb3IiLCJmb250LXNpemUiLCJuZXh0Um91bmQiLCJyZXNldERhdGEiLCJuZXdHYW1lIiwiJGdhbWVPdmVyU2NyZWVuIiwiYmFja1RvTWVudSIsIm9uZSIsIm5hbWUiLCJ0d28iLCJ0aHJlZSIsInZpbGxpYW5zIiwiJGluc3RydWN0aW9uc0J0biIsIiRiYWNrQnRuIiwiJHBsYXlCdG4iLCIkY2hhcmFjdGVyIiwiJG5hbWUiLCIka2lja09mZkJ0biIsIiRhdHRhY2siLCIk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LEtBQUEsU0FhZkUsTUFBTyxvQ0FDTEYsT0FBTSxFQUNOOUIsU0FBTyxNQWZYN0IsRUFBQUYsRUFBQSxpQkFzQk1pRSxFQUFtQmpFLEVBQUUsaUJBRHJCRSxFQUFBQSxFQUFBQSxZQUNBK0QsRUFBQUEsRUFBQUEsU0FDQTFELEVBQWFQLEVBQUEsU0FDYmtFLEVBQU5sRSxFQUFBLHFCQUNNbUUsRUFBYW5FLEVBQUEsY0FDYlMsRUFBQUEsRUFBQUEsU0FDQTJELEVBQWFwRSxFQUFFLFVBQ2ZxRSxFQUFOckUsRUFBQSxxQkFDTTJCLEVBQWMzQixFQUFBLGdCQUNkVyxFQUFBQSxFQUFBQSxhQUNBQyxFQUFnQlosRUFBQSxjQUNoQnNFLEVBQUFBLEVBQWN0RSxXQUNkMEQsRUFBQUEsRUFBQUEsV0FDQWEsRUFBWXZFLEVBQUEsV0FDWndFLEVBQVl4RSxFQUFBLGFBQ1p5RSxFQUFZekUsRUFBQSxnQkFtTGpCaUUsR0FBQVMsR0FBQSxRQUFBekUsR0FDRGdFLEVBQUFBLEdBQUFBLFFBQW9CN0QsR0FDcEI4RCxFQUFTUSxHQUFHLFFBQVN0RSxHQUNyQitELEVBQVNPLEdBQUcsUUFBU3BFLEdBQ3JCcUIsRUFBQUEsR0FBQUEsUUFBYVgsR0FDYnFELEVBQVNLLEdBQUEsUUFBUzFELEdBQ2xCb0QsRUFBV00sR0FBRyxRQUFTcEQsR0FDdkJnRCxFQUFBQSxHQUFBQSxRQUFlL0IsR0FDZmdDLEVBQVFHLEdBQUcsUUFBU25DLEdBQ3BCaUMsRUFBUUUsR0FBRyxRQUFTeEIsR0FDcEJ1QixFQUFRQyxHQUFHLFFBQVN6QixHQUNwQjBCLEVBQVlELEdBQUEsUUFBU2pCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBsZXQgcGxheWVyTmFtZTtcbiAgbGV0IHBsYXllckNob3NlbjtcbiAgbGV0IHZpbGxpYW5DaG9zZW47XG4gIGxldCBwbGF5ZXJMaWZlID0gMjA7XG4gIGxldCB2aWxsaWFuTGlmZSA9IDIwO1xuICBsZXQgdHVybiA9IHRydWU7XG4gIGxldCByb3VuZFRleHQ7XG4gIGxldCByb3VuZCA9IDE7XG4gIGxldCBzY29yZSA9IDA7XG4gIC8vIGNvbnN0ICRoaWdoU2NvcmUgPSAkKCcuaGlnaC1zY29yZScpO1xuICAvLyBsZXQgaGlnaFNjb3JlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZ2hTY29yZScpIHx8IDA7XG4gIC8vICRoaWdoU2NvcmUudGV4dChoaWdoU2NvcmUpO1xuXG4gIGNvbnN0IGNoYXJhY3RlcnMgPSB7XG4gICAgb25lOiB7XG4gICAgICBuYW1lOiAnTmljaycsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3BsYXllcjEuZ2lmJyxcbiAgICAgIGF0dGFjazogNCxcbiAgICAgIGN1cnJlbnRBdHRhY2s6IDQsXG4gICAgICB3YXJDcnk6IDIsXG4gICAgICBkZWZlbmQ6IDQsXG4gICAgICBhY2N1cmFjeTogMC40XG4gICAgfSxcbiAgICB0d286IHtcbiAgICAgIG5hbWU6ICdFbGxlbicsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3BsYXllcjIuZ2lmJyxcbiAgICAgIGF0dGFjazogMTAsXG4gICAgICBjdXJyZW50QXR0YWNrOiAxMCxcbiAgICAgIHdhckNyeTogNSxcbiAgICAgIGRlZmVuZDogNSxcbiAgICAgIGFjY3VyYWN5OiAwLjZcbiAgICB9LFxuICAgIHRocmVlOiB7XG4gICAgICBuYW1lOiAnTXV0YW50IE5pY2snLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIzLmdpZicsXG4gICAgICBhdHRhY2s6IDYsXG4gICAgICBjdXJyZW50QXR0YWNrOiA2LFxuICAgICAgd2FyQ3J5OiAxLFxuICAgICAgZGVmZW5kOiAyLFxuICAgICAgYWNjdXJhY3k6IDAuNVxuICAgIH1cbiAgfTtcbiAgY29uc3QgdmlsbGlhbnMgPSB7XG4gICAgb25lOiB7XG4gICAgICBuYW1lOiAnSGVucnknLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMy5qcGcnLFxuICAgICAgYXR0YWNrOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuNVxuICAgIH0sXG4gICAgdHdvOiB7XG4gICAgICBuYW1lOiAnWGVub21vcnBoJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjIuZ2lmJyxcbiAgICAgIGF0dGFjazogMixcbiAgICAgIGFjY3VyYWN5OiAwLjVcbiAgICB9LFxuICAgIHRocmVlOiB7XG4gICAgICBuYW1lOiAnTWVkdXNhJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjMuZ2lmJyxcbiAgICAgIGF0dGFjazogNCxcbiAgICAgIGFjY3VyYWN5OiAwLjU2XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0ICRpbnN0cnVjdGlvbnMgPSAkKCcuaW5zdHJ1Y3Rpb25zJyk7XG4gIGNvbnN0ICRpbnN0cnVjdGlvbnNCdG4gPSAkKCcjaW5zdHJ1Y3Rpb25zJyk7XG4gIGNvbnN0ICR3ZWxjb21lID0gJCgnLndlbGNvbWUnKTtcbiAgY29uc3QgJGJhY2tCdG4gPSAkKCcjYmFjaycpO1xuICBjb25zdCAkcGxheUJ0biA9ICQoJyNwbGF5Jyk7XG4gIGNvbnN0ICRjaGFyYWN0ZXJTY3JlZW4gPSAkKCcuY2hhcmFjdGVyLXNjcmVlbicpO1xuICBjb25zdCAkY2hhcmFjdGVyID0gJCgnLmNoYXJhY3RlcicpO1xuICBjb25zdCAkbmFtZSA9ICQoJy5uYW1lJyk7XG4gIGNvbnN0ICRzdGFydEJ0biA9ICQoJyNzdGFydCcpO1xuICBjb25zdCAkY2hvc2VuQ2hhcmFjdGVyID0gJCgnLmNob3Nlbi1jaGFyYWN0ZXInKTtcbiAgY29uc3QgJGdhbWVXaW5kb3cgPSAkKCcuZ2FtZS13aW5kb3cnKTtcbiAgY29uc3QgJGtpY2tPZmZCdG4gPSAkKCcja2ljay1vZmYnKTtcbiAgY29uc3QgJGdhbWVPdmVyU2NyZWVuID0gJCgnLmdhbWUtb3ZlcicpO1xuICBjb25zdCAkYXR0YWNrID0gJCgnI2F0dGFjaycpO1xuICBjb25zdCAkd2FyQ3J5ID0gJCgnI3dhcmNyeScpO1xuICBjb25zdCAkZGVmZW5kID0gJCgnI2RlZmVuZCcpO1xuICBjb25zdCAkbmV3R2FtZSA9ICQoJyNuZXctZ2FtZScpO1xuICBjb25zdCAkYmFja1RvTWVudSA9ICQoJyNiYWNrLXRvLW1lbnUnKTtcblxuXG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cxKCl7XG4gICAgJGluc3RydWN0aW9ucy5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cyKCl7XG4gICAgJGluc3RydWN0aW9ucy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGdvVG9DaG9pY2VTY3JlZW4oKXtcbiAgICAkd2VsY29tZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gdG9UaGVHYW1lKCl7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gc3RhcnRUaGVHYW1lKCl7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGdhbWVXaW5kb3cucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIGRpc3BsYXlIZWFsdGgoKTtcbiAgICBkaXNwbGF5U2NvcmUoKTtcbiAgICBkaXNwbGF5Um91bmQoKTtcbiAgICBkaXNwbGF5Q3VycmVudEF0dGFjaygpO1xuICB9XG4gIGZ1bmN0aW9uIGdldFRoZU5hbWUoKXtcbiAgICBwbGF5ZXJOYW1lID0gJCh0aGlzKS52YWwoKTtcbiAgICBpZiAocGxheWVyTmFtZS5sZW5ndGggPT09IDApe1xuICAgICAgYWxlcnQoJ1lvdSBtdXN0IHByb3ZpZGUgeW91ciBuYW1lJyk7XG4gICAgfVxuICAgICQoJy5wbGF5ZXItbmFtZScpLnRleHQocGxheWVyTmFtZSk7XG4gIH1cbiAgLy8gZnVuY3Rpb24gY3JlYXRlQ2hhcmFjdGVycygpe1xuICAvLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhcmFjdGVycy5sZW5ndGg7IGkrKyl7XG4gIC8vICAgICBsZXQgY2hhckVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgLy8gICAgIGNoYXJFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgJ2lbXScpO1xuICAvLyAgICAgJCgnLmNob2ljZXMnKS5hcHBlbmRDaGlsZChjaGFyRWxlbWVudCk7XG4gIC8vICAgfVxuICAvLyB9XG4gIGZ1bmN0aW9uIHNlbGVjdENoYXJhY3Rlcigpe1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IGlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgIGlmKGlkKXtcbiAgICAgICRzdGFydEJ0bi5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICB9XG4gICAgcGxheWVyQ2hvc2VuID0gY2hhcmFjdGVyc1tpZF07XG4gICAgdmlsbGlhbkNob3NlbiA9IHZpbGxpYW5zW2lkXTtcbiAgICAkKCcuY2hvc2VuLWNoYXJhY3RlciBpbWcsIC5wbGF5ZXInKS5hdHRyKCdzcmMnLCBwbGF5ZXJDaG9zZW4uaW1hZ2UpO1xuICAgICQoJy52aWxsaWFuJykuYXR0cignc3JjJywgdmlsbGlhbkNob3Nlbi5pbWFnZSk7XG4gICAgJCgnLnZpbGxpYW4tbmFtZScpLnRleHQodmlsbGlhbkNob3Nlbi5uYW1lKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVhbHRoKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgJCgnI3BsYXllci1oZWFsdGgnKS5odG1sKHBsYXllckxpZmUpO1xuICAgICAgJCgnI3ZpbGxpYW4tc2NvcmUnKS5odG1sKHZpbGxpYW5MaWZlKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlSb3VuZCgpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNyb3VuZC1ubycpLnRleHQoYFJvdW5kICR7cm91bmR9YCk7XG4gICAgfSwgNTAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5Q3VycmVudEF0dGFjaygpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNjdXJyZW50LWF0dGFjaycpLnRleHQocGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2spO1xuICAgIH0sIDUwMCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVNjb3JlKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgJCgnI3BsYXllci1zY29yZScpLmh0bWwoc2NvcmUpO1xuICAgIH0sIDUwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2tWaWxsaWFuKCl7XG4gICAgaWYodHVybiA9PT0gdHJ1ZSl7XG4gICAgICBpZihNYXRoLnJhbmRvbSgpIDwgcGxheWVyQ2hvc2VuLmFjY3VyYWN5KXtcbiAgICAgICAgdmlsbGlhbkxpZmUgLT0gcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2s7XG4gICAgICAgIHNjb3JlICs9IHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrO1xuICAgICAgICByb3VuZFRleHQgPSAnWW91IGhhdmUgaGl0IGhpbSEnO1xuICAgICAgfSBlbHNle1xuICAgICAgICByb3VuZFRleHQgPSAnV2hvb29wcyEgQSBtaXNzLi4uJztcbiAgICAgIH1cbiAgICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrID0gcGxheWVyQ2hvc2VuLmF0dGFjaztcbiAgICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgICAgdHVybiA9IGZhbHNlO1xuICAgICAgd2hvc2VUdXJuKCk7XG4gICAgICBjaGVja0Zvcldpbm5lcigpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGF0dGFja1BsYXllcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGF0dGFja1BsYXllcigpe1xuICAgIGlmKHR1cm4gPT09IGZhbHNlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCB2aWxsaWFuQ2hvc2VuLmFjY3VyYWN5KXtcbiAgICAgICAgcGxheWVyTGlmZSAtPSB2aWxsaWFuQ2hvc2VuLmF0dGFjaztcbiAgICAgICAgcm91bmRUZXh0ID0gJ0hlIGhpdCB5b3UhJztcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1lvdSBhcmUgc2FmZSEnO1xuICAgICAgfVxuICAgICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgICBjaGVja0Zvcldpbm5lcigpO1xuICAgICAgdHVybiA9IHRydWU7XG4gICAgICB3aG9zZVR1cm4oKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZGVmZW5kKCl7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dCgnJyk7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrIC09IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrICs9IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgfSwgMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gd2FyQ3J5KCl7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dCgnJyk7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrICs9IHBsYXllckNob3Nlbi53YXJDcnk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuICBmdW5jdGlvbiBjaGVja0Zvcldpbm5lcigpe1xuICAgIGlmIChwbGF5ZXJMaWZlIDw9IDApe1xuICAgICAgZ2FtZU92ZXIoKTtcbiAgICB9XG4gICAgaWYodmlsbGlhbkxpZmUgPD0gMCl7XG4gICAgICAkKCcjd2lubmVyJykudGV4dCgnWW91IHdvbiB0aGlzIHJvdW5kISEhIFRhLWRhISEnKS5jc3Moeydjb2xvcic6ICdyZWQnLCAnZm9udC1zaXplJzogJzMwcHgnfSk7XG4gICAgICB0dXJuID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBuZXh0Um91bmQoKTtcbiAgICAgIH0sIDIwMDApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB3aG9zZVR1cm4oKXtcbiAgICBpZiAodHVybiA9PT0gZmFsc2Upe1xuICAgICAgJCgnLnBsYXllci1zZWN0aW9uIGltZycpLnJlbW92ZUNsYXNzKCdpbWctYWN0aXZlJyk7XG4gICAgfVxuICAgIGlmICh0dXJuID09PSB0cnVlKXtcbiAgICAgICQoJy5wbGF5ZXItc2VjdGlvbiBpbWcnKS5hZGRDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBuZXh0Um91bmQoKXtcbiAgICByb3VuZCArPSAxO1xuICAgIHZpbGxpYW5MaWZlID0gMjUgKiByb3VuZDtcbiAgICBwbGF5ZXJMaWZlID0gMjAgICogcm91bmQ7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI3dpbm5lcicpLnRleHQoJycpO1xuICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICB9XG4gIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgJGdhbWVXaW5kb3cuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRnYW1lT3ZlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gcmVzZXREYXRhKCl7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgcGxheWVyTGlmZSA9IDIwO1xuICAgIHZpbGxpYW5MaWZlID0gMjA7XG4gICAgcm91bmQgPSAxO1xuICAgIHNjb3JlID0gMDtcbiAgICB0dXJuID0gdHJ1ZTtcbiAgfVxuICBmdW5jdGlvbiBuZXdHYW1lKCl7XG4gICAgJGdhbWVPdmVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICByZXNldERhdGEoKTtcbiAgICBzdGFydFRoZUdhbWUoKTtcbiAgfVxuICBmdW5jdGlvbiBiYWNrVG9NZW51KCl7XG4gICAgJGdhbWVPdmVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkd2VsY29tZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgcmVzZXREYXRhKCk7XG4gIH1cbiAgJGluc3RydWN0aW9uc0J0bi5vbignY2xpY2snLCBoaWRlV2luZG93MSk7XG4gICRiYWNrQnRuLm9uKCdjbGljaycsIGhpZGVXaW5kb3cyKTtcbiAgJHBsYXlCdG4ub24oJ2NsaWNrJywgZ29Ub0Nob2ljZVNjcmVlbik7XG4gICRzdGFydEJ0bi5vbignY2xpY2snLCB0b1RoZUdhbWUpO1xuICAkbmFtZS5vbigna2V5dXAnLCBnZXRUaGVOYW1lKTtcbiAgJGNoYXJhY3Rlci5vbignY2xpY2snLCBzZWxlY3RDaGFyYWN0ZXIpO1xuICAka2lja09mZkJ0bi5vbignY2xpY2snLCBzdGFydFRoZUdhbWUpO1xuICAkYXR0YWNrLm9uKCdjbGljaycsIGF0dGFja1ZpbGxpYW4pO1xuICAkd2FyQ3J5Lm9uKCdjbGljaycsIHdhckNyeSk7XG4gICRkZWZlbmQub24oJ2NsaWNrJywgZGVmZW5kKTtcbiAgJG5ld0dhbWUub24oJ2NsaWNrJywgbmV3R2FtZSk7XG4gICRiYWNrVG9NZW51Lm9uKCdjbGljaycsIGJhY2tUb01lbnUpO1xufSk7XG4iXX0=
