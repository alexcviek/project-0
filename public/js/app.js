"use strict";$(function(){function e(){z.removeClass("hidden"),R.addClass("hidden")}function t(){z.addClass("hidden"),R.removeClass("hidden")}function a(){R.addClass("hidden"),q.removeClass("hidden")}function n(){q.addClass("hidden"),G.removeClass("hidden")}function c(){G.addClass("hidden"),J.removeClass("hidden"),s(),l(),r()}function i(){x=$(this).val(),0===x.length&&alert("You must provide your name"),$("#name").text("Hello "+x+"!"),$(".player1-name").text(x)}function o(){$(this).addClass("active").siblings().removeClass("active");var e=$(this).attr("id");e&&F.attr("disabled",!1),b=N[e],w=j[e],$(".chosen-character img, .player1").attr("src",b.image),$(".villian").attr("src",w.image),$(".villian-name").text(w.name)}function s(){setInterval(function(){$("#player-health").html(A),$("#villian-score").html(T)},500)}function r(){setInterval(function(){$("#round-no").text("Round "+H)},500)}function l(){setInterval(function(){$("#player-score").html(I)},500)}function d(){!0===M&&(Math.random()<b.accuracy?(console.log(b.currentAttack),T-=b.currentAttack,b.currentAttack=b.attack,console.log(b.currentAttack),I+=5,Y="You have hit him!"):Y="Whooops! A miss...",$("#battle-text").text(""+Y),M=!1,k(),h(),setTimeout(function(){u()},3e3))}function u(){!1===M&&(Math.random()<w.accuracy?(A-=w.attack,Y="He hit you!"):Y="You are safe!",$("#battle-text").text(""+Y),h(),M=!0,k())}function m(){M=!1,k(),w.attack-=b.defend,setTimeout(function(){u(),w.attack+=b.defend},2e3)}function f(){M=!1,k(),b.currentAttack+=b.warCry,setTimeout(function(){u()},2e3)}function h(){A<=0&&(v(),M=!0),T<=0&&($("#winner").text("You won this round!!! Ta-da!!").css({color:"red","font-size":"30px"}),M=!0,setTimeout(function(){g()},2e3))}function k(){!1===M&&(console.log("not your turn"),$(".player-section img").removeClass("img-active")),!0===M&&(console.log("your turn"),$(".player-section img").addClass("img-active"))}function g(){H+=1,T=25*H,A=20*H,Y="",$("#winner").text(""),$("#battle-text").text(""+Y)}function v(){J.addClass("hidden"),L.removeClass("hidden")}function y(){Y="",$("#battle-text").text(""+Y),A=20,T=20,H=1,I=0}function C(){L.addClass("hidden"),y(),c()}function p(){L.addClass("hidden"),R.removeClass("hidden"),y()}var x=void 0,b=void 0,w=void 0,A=20,T=20,M=!0,Y=void 0,H=1,I=0,N={one:{name:"Nick",image:"public/assets/images/player1.gif",attack:4,currentAttack:4,warCry:2,defend:4,accuracy:.4},two:{name:"Ellen",image:"public/assets/images/player2.gif",attack:10,currentAttack:10,warCry:5,defend:5,accuracy:.7},three:{name:"Mutant Nick",image:"public/assets/images/player3.gif",attack:6,currentAttack:6,warCry:1,defend:2,accuracy:.5}},j={one:{name:"Henry",image:"public/assets/images/villian3.jpg",attack:5,accuracy:.5},two:{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:3,accuracy:.3},three:{name:"Medusa",image:"public/assets/images/villian3.gif",attack:4,accuracy:.56}},z=$(".instructions"),E=$("#instructions"),R=$(".welcome"),W=$("#back"),X=$("#play"),q=$(".character-screen"),B=$(".character"),D=$(".name"),F=$("#start"),G=$(".chosen-character"),J=$(".game-window"),K=$("#kick-off"),L=$(".game-over");E.on("click",e),W.on("click",t),X.on("click",a),F.on("click",n),D.on("keyup",i),B.on("click",o),K.on("click",c),$("#attack").on("click",d),$("#warcry").on("click",f),$("#defend").on("click",m),$("#yes").on("click",C),$("#no").on("click",p)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiaGlkZVdpbmRvdzEiLCIkaW5zdHJ1Y3Rpb25zIiwicmVtb3ZlQ2xhc3MiLCJoaWRlV2luZG93MiIsImFkZENsYXNzIiwiZ29Ub0Nob2ljZVNjcmVlbiIsIiR3ZWxjb21lIiwidG9UaGVHYW1lIiwiJGNoYXJhY3RlclNjcmVlbiIsInN0YXJ0VGhlR2FtZSIsIiRjaG9zZW5DaGFyYWN0ZXIiLCIkZ2FtZVdpbmRvdyIsImRpc3BsYXlIZWFsdGgiLCJkaXNwbGF5U2NvcmUiLCJnZXRUaGVOYW1lIiwicGxheWVyTmFtZSIsInZhbCIsImxlbmd0aCIsImFsZXJ0IiwidGV4dCIsInNlbGVjdENoYXJhY3RlciIsInRoaXMiLCJzaWJsaW5ncyIsImlkIiwiYXR0ciIsIiRzdGFydEJ0biIsInBsYXllckNob3NlbiIsImNoYXJhY3RlcnMiLCJ2aWxsaWFuQ2hvc2VuIiwiaW1hZ2UiLCJzZXRJbnRlcnZhbCIsImh0bWwiLCJwbGF5ZXJMaWZlIiwiZGlzcGxheVJvdW5kIiwicm91bmQiLCJzY29yZSIsImF0dGFja1ZpbGxpYW4iLCJ0dXJuIiwiYWNjdXJhY3kiLCJjb25zb2xlIiwicmFuZG9tIiwiY3VycmVudEF0dGFjayIsInZpbGxpYW5MaWZlIiwiYXR0YWNrIiwibG9nIiwicm91bmRUZXh0Iiwid2hvc2VUdXJuIiwiY2hlY2tGb3JXaW5uZXIiLCJzZXRUaW1lb3V0IiwiYXR0YWNrUGxheWVyIiwiZGVmZW5kIiwid2FyQ3J5IiwiZ2FtZU92ZXIiLCJjc3MiLCJjb2xvciIsImZvbnQtc2l6ZSIsIm5leHRSb3VuZCIsInJlc2V0RGF0YSIsIm5ld0dhbWUiLCIkZ2FtZU92ZXJTY3JlZW4iLCJiYWNrVG9NZW51Iiwib25lIiwibmFtZSIsInR3byIsInRocmVlIiwidmlsbGlhbnMiLCIkaW5zdHJ1Y3Rpb25zQnRuIiwiJGJhY2tCdG4iLCIkcGxheUJ0biIsIiRjaGFyYWN0ZXIiLCIkbmFtZSIsIm9uIiwiJGtpY2tPZmZCdG4iXSwibWFw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LEVBQUEsaUJBc0JNbUUsRUFBbUJuRSxFQUFFLGlCQURyQkUsRUFBQUEsRUFBQUEsWUFDQWlFLEVBQUFBLEVBQUFBLFNBQ0E1RCxFQUFhUCxFQUFBLFNBQ2JvRSxFQUFOcEUsRUFBQSxxQkFDTXFFLEVBQWFyRSxFQUFBLGNBQ2JTLEVBQUFBLEVBQUFBLFNBQ0E2RCxFQUFhdEUsRUFBRSxVQUNmdUUsRUFBTnZFLEVBQUEscUJBQ00wQixFQUFjMUIsRUFBQSxnQkFDZFcsRUFBQUEsRUFBQUEsYUFDQUMsRUFBZ0JaLEVBQUEsYUEwS3JCbUUsR0FBQUssR0FBQSxRQUFBdkUsR0FDRGtFLEVBQUFBLEdBQUFBLFFBQW9CL0QsR0FDcEJnRSxFQUFTSSxHQUFHLFFBQVNwRSxHQUNyQmlFLEVBQVNHLEdBQUcsUUFBU2xFLEdBQ3JCb0IsRUFBQUEsR0FBQUEsUUFBYVgsR0FDYndELEVBQVNDLEdBQUEsUUFBU3pELEdBQ2xCdUQsRUFBV0UsR0FBRyxRQUFTbkQsR0FDdkJvRCxFQUFBQSxXQUFZRCxHQUFHLFFBQVM5RCxHQUN4QlYsRUFBRSxXQUFXd0UsR0FBRyxRQUFTbkMsR0FDekJyQyxFQUFFLFdBQVd3RSxHQUFHLFFBQVNwQixHQUN6QnBELEVBQUUsUUFBQXdFLEdBQVdBLFFBQUdiLEdBQ2hCM0QsRUFBRSxPQUFGd0UsR0FBQSxRQUFBWCIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgbGV0IHBsYXllck5hbWU7XG4gIGxldCBwbGF5ZXJDaG9zZW47XG4gIGxldCB2aWxsaWFuQ2hvc2VuO1xuICBsZXQgcGxheWVyTGlmZSA9IDIwO1xuICBsZXQgdmlsbGlhbkxpZmUgPSAyMDtcbiAgbGV0IHR1cm4gPSB0cnVlO1xuICBsZXQgcm91bmRUZXh0O1xuICBsZXQgcm91bmQgPSAxO1xuICBsZXQgc2NvcmUgPSAwO1xuICAvLyBjb25zdCAkaGlnaFNjb3JlID0gJCgnLmhpZ2gtc2NvcmUnKTtcbiAgLy8gbGV0IGhpZ2hTY29yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaWdoU2NvcmUnKSB8fCAwO1xuICAvLyAkaGlnaFNjb3JlLnRleHQoaGlnaFNjb3JlKTtcblxuICBjb25zdCBjaGFyYWN0ZXJzID0ge1xuICAgIG9uZToge1xuICAgICAgbmFtZTogJ05pY2snLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIxLmdpZicsXG4gICAgICBhdHRhY2s6IDQsXG4gICAgICBjdXJyZW50QXR0YWNrOiA0LFxuICAgICAgd2FyQ3J5OiAyLFxuICAgICAgZGVmZW5kOiA0LFxuICAgICAgYWNjdXJhY3k6IDAuNFxuICAgIH0sXG4gICAgdHdvOiB7XG4gICAgICBuYW1lOiAnRWxsZW4nLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIyLmdpZicsXG4gICAgICBhdHRhY2s6IDEwLFxuICAgICAgY3VycmVudEF0dGFjazogMTAsXG4gICAgICB3YXJDcnk6IDUsXG4gICAgICBkZWZlbmQ6IDUsXG4gICAgICBhY2N1cmFjeTogMC43XG4gICAgfSxcbiAgICB0aHJlZToge1xuICAgICAgbmFtZTogJ011dGFudCBOaWNrJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMy5naWYnLFxuICAgICAgYXR0YWNrOiA2LFxuICAgICAgY3VycmVudEF0dGFjazogNixcbiAgICAgIHdhckNyeTogMSxcbiAgICAgIGRlZmVuZDogMixcbiAgICAgIGFjY3VyYWN5OiAwLjVcbiAgICB9XG4gIH07XG4gIGNvbnN0IHZpbGxpYW5zID0ge1xuICAgIG9uZToge1xuICAgICAgbmFtZTogJ0hlbnJ5JyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjMuanBnJyxcbiAgICAgIGF0dGFjazogNSxcbiAgICAgIGFjY3VyYWN5OiAwLjVcbiAgICB9LFxuICAgIHR3bzoge1xuICAgICAgbmFtZTogJ1hlbm9tb3JwaCcsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4yLmdpZicsXG4gICAgICBhdHRhY2s6IDMsXG4gICAgICBhY2N1cmFjeTogMC4zXG4gICAgfSxcbiAgICB0aHJlZToge1xuICAgICAgbmFtZTogJ01lZHVzYScsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4zLmdpZicsXG4gICAgICBhdHRhY2s6IDQsXG4gICAgICBhY2N1cmFjeTogMC41NlxuICAgIH1cbiAgfTtcblxuICBjb25zdCAkaW5zdHJ1Y3Rpb25zID0gJCgnLmluc3RydWN0aW9ucycpO1xuICBjb25zdCAkaW5zdHJ1Y3Rpb25zQnRuID0gJCgnI2luc3RydWN0aW9ucycpO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRiYWNrQnRuID0gJCgnI2JhY2snKTtcbiAgY29uc3QgJHBsYXlCdG4gPSAkKCcjcGxheScpO1xuICBjb25zdCAkY2hhcmFjdGVyU2NyZWVuID0gJCgnLmNoYXJhY3Rlci1zY3JlZW4nKTtcbiAgY29uc3QgJGNoYXJhY3RlciA9ICQoJy5jaGFyYWN0ZXInKTtcbiAgY29uc3QgJG5hbWUgPSAkKCcubmFtZScpO1xuICBjb25zdCAkc3RhcnRCdG4gPSAkKCcjc3RhcnQnKTtcbiAgY29uc3QgJGNob3NlbkNoYXJhY3RlciA9ICQoJy5jaG9zZW4tY2hhcmFjdGVyJyk7XG4gIGNvbnN0ICRnYW1lV2luZG93ID0gJCgnLmdhbWUtd2luZG93Jyk7XG4gIGNvbnN0ICRraWNrT2ZmQnRuID0gJCgnI2tpY2stb2ZmJyk7XG4gIGNvbnN0ICRnYW1lT3ZlclNjcmVlbiA9ICQoJy5nYW1lLW92ZXInKTtcblxuXG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cxKCl7XG4gICAgJGluc3RydWN0aW9ucy5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGhpZGVXaW5kb3cyKCl7XG4gICAgJGluc3RydWN0aW9ucy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJHdlbGNvbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIGdvVG9DaG9pY2VTY3JlZW4oKXtcbiAgICAkd2VsY29tZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gdG9UaGVHYW1lKCl7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gc3RhcnRUaGVHYW1lKCl7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGdhbWVXaW5kb3cucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgIGRpc3BsYXlIZWFsdGgoKTtcbiAgICBkaXNwbGF5U2NvcmUoKTtcbiAgICBkaXNwbGF5Um91bmQoKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRUaGVOYW1lKCl7XG4gICAgcGxheWVyTmFtZSA9ICQodGhpcykudmFsKCk7XG4gICAgaWYgKHBsYXllck5hbWUubGVuZ3RoID09PSAwKXtcbiAgICAgIGFsZXJ0KCdZb3UgbXVzdCBwcm92aWRlIHlvdXIgbmFtZScpO1xuICAgIH1cbiAgICAkKCcjbmFtZScpLnRleHQoYEhlbGxvICR7cGxheWVyTmFtZX0hYCk7XG4gICAgJCgnLnBsYXllcjEtbmFtZScpLnRleHQocGxheWVyTmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZWxlY3RDaGFyYWN0ZXIoKXtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICBjb25zdCBpZCA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICBpZihpZCl7XG4gICAgICAkc3RhcnRCdG4uYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIHBsYXllckNob3NlbiA9IGNoYXJhY3RlcnNbaWRdO1xuICAgIHZpbGxpYW5DaG9zZW4gPSB2aWxsaWFuc1tpZF07XG4gICAgJCgnLmNob3Nlbi1jaGFyYWN0ZXIgaW1nLCAucGxheWVyMScpLmF0dHIoJ3NyYycsIHBsYXllckNob3Nlbi5pbWFnZSk7XG4gICAgJCgnLnZpbGxpYW4nKS5hdHRyKCdzcmMnLCB2aWxsaWFuQ2hvc2VuLmltYWdlKTtcbiAgICAkKCcudmlsbGlhbi1uYW1lJykudGV4dCh2aWxsaWFuQ2hvc2VuLm5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlIZWFsdGgoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAkKCcjcGxheWVyLWhlYWx0aCcpLmh0bWwocGxheWVyTGlmZSk7XG4gICAgICAkKCcjdmlsbGlhbi1zY29yZScpLmh0bWwodmlsbGlhbkxpZmUpO1xuICAgIH0sIDUwMCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVJvdW5kKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgJCgnI3JvdW5kLW5vJykudGV4dChgUm91bmQgJHtyb3VuZH1gKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlTY29yZSgpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNwbGF5ZXItc2NvcmUnKS5odG1sKHNjb3JlKTtcbiAgICB9LCA1MDApO1xuICB9XG5cbiAgZnVuY3Rpb24gYXR0YWNrVmlsbGlhbigpe1xuICAgIGlmKHR1cm4gPT09IHRydWUpe1xuICAgICAgaWYoTWF0aC5yYW5kb20oKSA8IHBsYXllckNob3Nlbi5hY2N1cmFjeSl7XG4gICAgICAgIGNvbnNvbGUubG9nKHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrKTtcbiAgICAgICAgdmlsbGlhbkxpZmUgLT0gcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2s7XG4gICAgICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrID0gcGxheWVyQ2hvc2VuLmF0dGFjaztcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2spO1xuICAgICAgICBzY29yZSArPSA1O1xuICAgICAgICByb3VuZFRleHQgPSAnWW91IGhhdmUgaGl0IGhpbSEnO1xuICAgICAgfSBlbHNle1xuICAgICAgICByb3VuZFRleHQgPSAnV2hvb29wcyEgQSBtaXNzLi4uJztcbiAgICAgIH1cbiAgICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgICAgdHVybiA9IGZhbHNlO1xuICAgICAgd2hvc2VUdXJuKCk7XG4gICAgICBjaGVja0Zvcldpbm5lcigpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGF0dGFja1BsYXllcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGF0dGFja1BsYXllcigpe1xuICAgIGlmKHR1cm4gPT09IGZhbHNlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCB2aWxsaWFuQ2hvc2VuLmFjY3VyYWN5KXtcbiAgICAgICAgcGxheWVyTGlmZSAtPSB2aWxsaWFuQ2hvc2VuLmF0dGFjaztcbiAgICAgICAgcm91bmRUZXh0ID0gJ0hlIGhpdCB5b3UhJztcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1lvdSBhcmUgc2FmZSEnO1xuICAgICAgfVxuICAgICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgICBjaGVja0Zvcldpbm5lcigpO1xuICAgICAgdHVybiA9IHRydWU7XG4gICAgICB3aG9zZVR1cm4oKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZGVmZW5kKCl7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrIC09IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrICs9IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgfSwgMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gd2FyQ3J5KCl7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrICs9IHBsYXllckNob3Nlbi53YXJDcnk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuICBmdW5jdGlvbiBjaGVja0Zvcldpbm5lcigpe1xuICAgIGlmIChwbGF5ZXJMaWZlIDw9IDApe1xuICAgICAgZ2FtZU92ZXIoKTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgIH1cbiAgICBpZih2aWxsaWFuTGlmZSA8PSAwKXtcbiAgICAgICQoJyN3aW5uZXInKS50ZXh0KCdZb3Ugd29uIHRoaXMgcm91bmQhISEgVGEtZGEhIScpLmNzcyh7J2NvbG9yJzogJ3JlZCcsICdmb250LXNpemUnOiAnMzBweCd9KTtcbiAgICAgIHR1cm4gPSB0cnVlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIG5leHRSb3VuZCgpO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIHdob3NlVHVybigpe1xuICAgIGlmICh0dXJuID09PSBmYWxzZSl7XG4gICAgICBjb25zb2xlLmxvZygnbm90IHlvdXIgdHVybicpO1xuICAgICAgJCgnLnBsYXllci1zZWN0aW9uIGltZycpLnJlbW92ZUNsYXNzKCdpbWctYWN0aXZlJyk7XG4gICAgfVxuICAgIGlmICh0dXJuID09PSB0cnVlKXtcbiAgICAgIGNvbnNvbGUubG9nKCd5b3VyIHR1cm4nKTtcbiAgICAgICQoJy5wbGF5ZXItc2VjdGlvbiBpbWcnKS5hZGRDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBuZXh0Um91bmQoKXtcbiAgICByb3VuZCArPSAxO1xuICAgIHZpbGxpYW5MaWZlID0gMjUgKiByb3VuZDtcbiAgICBwbGF5ZXJMaWZlID0gMjAgICogcm91bmQ7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI3dpbm5lcicpLnRleHQoJycpO1xuICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICB9XG4gIGZ1bmN0aW9uIGdhbWVPdmVyKCl7XG4gICAgJGdhbWVXaW5kb3cuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRnYW1lT3ZlclNjcmVlbi5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gcmVzZXREYXRhKCl7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgcGxheWVyTGlmZSA9IDIwO1xuICAgIHZpbGxpYW5MaWZlID0gMjA7XG4gICAgcm91bmQgPSAxO1xuICAgIHNjb3JlID0gMDtcbiAgfVxuICBmdW5jdGlvbiBuZXdHYW1lKCl7XG4gICAgJGdhbWVPdmVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICByZXNldERhdGEoKTtcbiAgICBzdGFydFRoZUdhbWUoKTtcbiAgfVxuICBmdW5jdGlvbiBiYWNrVG9NZW51KCl7XG4gICAgJGdhbWVPdmVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkd2VsY29tZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgcmVzZXREYXRhKCk7XG4gIH1cbiAgJGluc3RydWN0aW9uc0J0bi5vbignY2xpY2snLCBoaWRlV2luZG93MSk7XG4gICRiYWNrQnRuLm9uKCdjbGljaycsIGhpZGVXaW5kb3cyKTtcbiAgJHBsYXlCdG4ub24oJ2NsaWNrJywgZ29Ub0Nob2ljZVNjcmVlbik7XG4gICRzdGFydEJ0bi5vbignY2xpY2snLCB0b1RoZUdhbWUpO1xuICAkbmFtZS5vbigna2V5dXAnLCBnZXRUaGVOYW1lKTtcbiAgJGNoYXJhY3Rlci5vbignY2xpY2snLCBzZWxlY3RDaGFyYWN0ZXIpO1xuICAka2lja09mZkJ0bi5vbignY2xpY2snLCBzdGFydFRoZUdhbWUpO1xuICAkKCcjYXR0YWNrJykub24oJ2NsaWNrJywgYXR0YWNrVmlsbGlhbik7XG4gICQoJyN3YXJjcnknKS5vbignY2xpY2snLCB3YXJDcnkpO1xuICAkKCcjZGVmZW5kJykub24oJ2NsaWNrJywgZGVmZW5kKTtcbiAgJCgnI3llcycpLm9uKCdjbGljaycsIG5ld0dhbWUpO1xuICAkKCcjbm8nKS5vbignY2xpY2snLCBiYWNrVG9NZW51KTtcbn0pO1xuIl19
