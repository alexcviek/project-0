"use strict";$(function(){function t(){E.removeClass("hidden"),W.addClass("hidden")}function e(){E.addClass("hidden"),W.removeClass("hidden")}function a(){W.addClass("hidden"),B.removeClass("hidden")}function n(){B.addClass("hidden"),K.removeClass("hidden")}function c(){K.addClass("hidden"),L.removeClass("hidden"),et.text(j),r(),d(),l(),u()}function i(){j=N>j?N:j,et.text(j)}function o(){w=$(this).val(),0===w.length&&alert("You must provide your name"),$(".player-name").text(w)}function s(){$(this).addClass("active").siblings().removeClass("active");var t=$(this).attr("id");t&&J.attr("disabled",!1),A=z[t],I=D[t],$(".chosen-character img, .player").attr("src",A.image),$(".villian").attr("src",I.image),$(".villian-name").text(I.name)}function r(){setInterval(function(){$("#player-health").html(T),$("#villian-health").html(M)},500)}function l(){setInterval(function(){$("#round-no").text("Round "+H)},500)}function u(){setInterval(function(){$("#current-attack").text(A.currentAttack)},500)}function d(){setInterval(function(){tt.html(N)},500)}function m(){!0===S&&(Math.random()<A.accuracy?(M-=A.currentAttack,N+=A.currentAttack,Y="You have hit him!",at.attr("src","public/assets/audio/punch.wav"),console.log(at)):Y="Whooops! A miss...",A.currentAttack=A.attack,$("#battle-text").text(""+Y),S=!1,v(),g(),i(),setTimeout(function(){h()},3e3))}function h(){!1===S&&(Math.random()<I.accuracy?(T-=I.attack,Y="He hit you!"):Y="You are safe!",$("#battle-text").text(""+Y),g(),S=!0,v())}function f(){$("#battle-text").text(""),S=!1,v(),I.attack-=A.defend,setTimeout(function(){h(),I.attack+=A.defend},2e3)}function k(){$("#battle-text").text(""),S=!1,v(),A.currentAttack+=A.warCry,setTimeout(function(){h()},2e3)}function g(){T<=0&&p(),M<=0&&($("#winner").text("You won this round!!! Ta-da!!").css({color:"#C5D200","font-size":"28px"}),S=!0,setTimeout(function(){y()},2e3))}function v(){!1===S&&$(".player-section img").removeClass("img-active"),!0===S&&$(".player-section img").addClass("img-active")}function y(){H+=1,M=25*H,T=20*H,Y="",$("#winner").text(""),$("#battle-text").text(""+Y)}function p(){localStorage.setItem("highScore",j),L.addClass("hidden"),P.removeClass("hidden")}function C(){Y="",$("#battle-text").text(""+Y),T=20,M=20,H=1,N=0,A.currentAttack=A.attack,S=!0}function x(){P.addClass("hidden"),C(),c()}function b(){P.addClass("hidden"),W.removeClass("hidden"),C()}var w=void 0,A=void 0,I=void 0,T=20,M=20,S=!0,Y=void 0,H=1,N=0,j=localStorage.getItem("highScore")||0,z={one:{name:"Nick",image:"public/assets/images/player1.gif",attack:4,currentAttack:4,warCry:2,defend:4,accuracy:.4},two:{name:"Ellen",image:"public/assets/images/player2.gif",attack:10,currentAttack:10,warCry:5,defend:5,accuracy:.8},three:{name:"Mutant Nick",image:"public/assets/images/player3.gif",attack:6,currentAttack:6,warCry:1,defend:2,accuracy:.5}},D={one:{name:"Henry",image:"public/assets/images/villian3.jpg",attack:5,accuracy:.5},two:{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:5,accuracy:.5},three:{name:"Medusa",image:"public/assets/images/villian3.gif",attack:4,accuracy:.56}},E=$(".instructions"),R=$("#instructions"),W=$(".welcome"),X=$("#back"),q=$("#play"),B=$(".character-screen"),F=$(".character"),G=$(".name"),J=$("#start"),K=$(".chosen-character"),L=$(".game-window"),O=$("#kick-off"),P=$(".game-over"),Q=$("#attack"),U=$("#warcry"),V=$("#defend"),Z=$("#new-game"),_=$("#back-to-menu"),tt=$("#player-score"),et=$(".high-score"),at=$("audio");R.on("click",t),X.on("click",e),q.on("click",a),J.on("click",n),G.on("keyup",o),F.on("click",s),O.on("click",c),Q.on("click",m),U.on("click",k),V.on("click",f),Z.on("click",x),_.on("click",b)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiJGF1ZGlvIiwiJGluc3RydWN0aW9ucyIsInJlbW92ZUNsYXNzIiwiJHdlbGNvbWUiLCJoaWRlV2luZG93MSIsImFkZENsYXNzIiwiaGlkZVdpbmRvdzIiLCIkY2hhcmFjdGVyU2NyZWVuIiwiZ29Ub0Nob2ljZVNjcmVlbiIsIiRjaG9zZW5DaGFyYWN0ZXIiLCIkZ2FtZVdpbmRvdyIsInN0YXJ0VGhlR2FtZSIsIiRoaWdoU2NvcmUiLCJkaXNwbGF5SGVhbHRoIiwiZGlzcGxheVNjb3JlIiwiZGlzcGxheUN1cnJlbnRBdHRhY2siLCJoaWdoU2NvcmUiLCJzY29yZSIsInVwZGF0ZUhpZ2hTY29yZSIsInBsYXllck5hbWUiLCJ0aGlzIiwidmFsIiwiZ2V0VGhlTmFtZSIsImFsZXJ0IiwidGV4dCIsInNlbGVjdENoYXJhY3RlciIsInNpYmxpbmdzIiwiaWQiLCIkc3RhcnRCdG4iLCJhdHRyIiwidmlsbGlhbkNob3NlbiIsInZpbGxpYW5zIiwicGxheWVyQ2hvc2VuIiwiaW1hZ2UiLCJzZXRJbnRlcnZhbCIsImh0bWwiLCJwbGF5ZXJMaWZlIiwidmlsbGlhbkxpZmUiLCJkaXNwbGF5Um91bmQiLCJyb3VuZCIsImN1cnJlbnRBdHRhY2siLCIkc2NvcmUiLCJhdHRhY2tWaWxsaWFuIiwidHVybiIsIk1hdGgiLCJhY2N1cmFjeSIsInJhbmRvbSIsInJvdW5kVGV4dCIsImNvbnNvbGUiLCJhdHRhY2siLCJ3aG9zZVR1cm4iLCJjaGVja0Zvcldpbm5lciIsInNldFRpbWVvdXQiLCJhdHRhY2tQbGF5ZXIiLCJkZWZlbmQiLCJ3YXJDcnkiLCJnYW1lT3ZlciIsImNzcyIsImNvbG9yIiwiZm9udC1zaXplIiwibmV4dFJvdW5kIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIiRnYW1lT3ZlclNjcmVlbiIsIm5ld0dhbWUiLCJyZXNldERhdGEiLCJiYWNrVG9NZW51IiwiZ2V0SXRlbSIsIm9uZSIsImNoYXJhY3RlcnMiLCJuYW1lIiwidHdvIiwidGhyZWUiLCIkaW5zdHJ1Y3Rpb25zQnRuIiwiJGJhY2tCdG4iLCIkcGxheUJ0biIsIiRjaGFyYWN0ZXIiLCIkbmFtZSIsIiRraWNrT2ZmQnRuIiwiJGF0dGFjayIsIiR3YXJDcnkiLCIkZGVmZW5kIiwiJG5ld0dhbWUiLCIkYmFja1RvTWVudSIsIm9uIiwidG9UaGVHYW1lIl0sIm1hcHBpbmdzIjoiWUFBQUEsR0FBRSxXQWtGQSxRQUFNQyxLQUdKQyxFQUFjQyxZQUFZLFVBRDVCQyxFQUFTQyxTQUFULFVBRUVELFFBQUFBLEtBQ0RGLEVBQUFJLFNBQUEsVUFDREYsRUFBU0csWUFBYSxVQUVwQkgsUUFBQUEsS0FDREEsRUFBQUUsU0FBQSxVQUNERSxFQUFTQyxZQUFrQixVQUV6QkQsUUFBQUEsS0FDREEsRUFBQUYsU0FBQSxVQUNESSxFQUFBUCxZQUFvQixVQUVsQk8sUUFBQUEsS0FDREEsRUFBQUosU0FBQSxVQUNESyxFQUFTQyxZQUFjLFVBQ3JCRixHQUFBQSxLQUFBQSxHQUNBQyxJQUNBRSxJQUNBQyxJQUNBQyxJQUVBQyxRQUFBQSxLQUNEQyxFQUFBQyxFQUFBRCxFQUFBQyxFQUFBRCxFQUNESixHQUFTTSxLQUFBQSxHQUVQTixRQUFBQSxLQUNETyxFQUFBcEIsRUFBQXFCLE1BQUFDLE1BQ29CLElBQXJCRixFQUFTRyxRQUNQSCxNQUFBQSw4QkFFRUksRUFBQUEsZ0JBQU1DLEtBQUFMLEdBR1QsUUFBQU0sS0FHQzFCLEVBQUVxQixNQUFNZixTQUFTLFVBQVVxQixXQUFXeEIsWUFBWSxTQURwRCxJQUFBeUIsR0FBU0YsRUFBQUEsTUFBQUEsS0FBVCxLQUNJRSxJQUNGQyxFQUFhQyxLQUFNQSxZQUFuQixHQUVFRCxFQUFVQyxFQUFLRixHQUNoQkcsRUFBQUMsRUFBQUosR0FDREssRUFBQUEsa0NBQUFILEtBQUEsTUFBQUcsRUFBQUMsT0FDQUgsRUFBQUEsWUFBQUEsS0FBZ0JDLE1BQVNKLEVBQXpCTSxPQUNBbEMsRUFBRSxpQkFBQXlCLEtBQUFNLEVBQWtDRCxNQUVwQzlCLFFBQUVjLEtBQ0hxQixZQUFBLFdBQ0RuQyxFQUFBLGtCQUFBb0MsS0FBd0JDLEdBQ3RCRixFQUFBQSxtQkFBWUMsS0FBTUUsSUFDaEJ0QyxLQUVELFFBSER1QyxLQUlESixZQUFBLFdBQ0RuQyxFQUFBLGFBQVN1QyxLQUFULFNBQXVCQyxJQUNyQkwsS0FFQyxRQUZEbkIsS0FHRG1CLFlBQUEsV0FDRG5DLEVBQUEsbUJBQVNnQixLQUFUaUIsRUFBK0JRLGdCQUM3Qk4sS0FFQyxRQUZEcEIsS0FHRG9CLFlBQUEsV0FDRE8sR0FBUzNCLEtBQUFBLElBQ1BvQixLQUdELFFBQUFRLE1BR2EsSUFBVEMsSUFETEMsS0FBU0YsU0FBVFYsRUFBd0JhLFVBQ25CRixHQUFjWCxFQUFBUSxjQUNmdkIsR0FBUTZCLEVBQVdkLGNBQ2pCSyxFQUFBQSxvQkFDQXBCLEdBQUFBLEtBQVNlLE1BQUFBLGlDQUNUZSxRQUFBQSxJQUFZL0MsS0FFWmdELEVBQVloRCxxQkFFWitDLEVBQUFBLGNBQVlmLEVBQVppQixPQUNEbEQsRUFBQSxnQkFBQXlCLEtBQUEsR0FBQXVCLEdBQ0RmLEdBQUFBLEVBQ0FqQyxJQUNBNEMsSUFDQU8sSUFDQUMsV0FBQUEsV0FDQWpDLEtBQ0FrQyxNQUdELFFBQUFDLE1BQ0YsSUFBQVYsSUFDREMsS0FBU1MsU0FBVHZCLEVBQXVCZSxVQUNsQkYsR0FBSGIsRUFBa0JtQixPQUNoQkYsRUFBUUQsZUFFTkMsRUFBWSxnQkFFWkEsRUFBQUEsZ0JBQVl2QixLQUFadUIsR0FBWUEsR0FDYkksSUFDRHBELEdBQUUsRUFDRm9ELEtBR0QsUUFBQUcsS0FDRnZELEVBQUEsZ0JBQUF5QixLQUFBLElBQ0RtQixHQUFTVyxFQUNQdkQsSUFDQTRDLEVBQUFNLFFBQUFqQixFQUFBc0IsT0FDQUosV0FBQUEsV0FDQXBCLElBQ0FzQixFQUFXSCxRQUFNakIsRUFBQXNCLFFBQ2ZELEtBRUQsUUFIREUsS0FJRHhELEVBQUEsZ0JBQUF5QixLQUFBLElBQ0RtQixHQUFTWSxFQUNQeEQsSUFDQTRDLEVBQUFILGVBQUFSLEVBQUF1QixPQUNBTCxXQUFBQSxXQUNBbEIsS0FDQW9CLEtBRUMsUUFGREQsS0FHRGYsR0FBQSxHQUNEb0IsSUFFSUEsR0FBQUEsSUFDRHpELEVBQUEsV0FBQXlCLEtBQUEsaUNBQUFpQyxLQUFBQyxNQUFBLFVBQUFDLFlBQUEsU0FDRGhCLEdBQUdOLEVBQ0R0QyxXQUFBLFdBQ0E0QyxLQUNBUyxNQUdELFFBQUFGLE1BQ0YsSUFBQVAsR0FDRDVDLEVBQUEsdUJBQW9CRyxZQUFBLGVBRWQsSUFBQXlDLEdBQ0g1QyxFQUFBLHVCQUFBTSxTQUFBLGNBR0EsUUFBQXVELEtBQ0ZyQixHQUFBLEVBQ0RGLEVBQVN1QixHQUFXckIsRUFDbEJBLEVBQUEsR0FBQUEsRUFDQUYsRUFBQUEsR0FDQUQsRUFBQUEsV0FBYVosS0FBTWUsSUFDbkJRLEVBQUFBLGdCQUFBdkIsS0FBQXVCLEdBQUFBLEdBRUFoRCxRQUFFeUQsS0FDSEssYUFBQUMsUUFBQSxZQUFBOUMsR0FDRE4sRUFBUzhDLFNBQVUsVUFDakJLLEVBQWFDLFlBQVEsVUFFckJDLFFBQUFBLEtBQ0RoQixFQUFBLEdBQ0RoRCxFQUFBLGdCQUFBeUIsS0FBQSxHQUFvQnVCLEdBQ2xCQSxFQUFZLEdBQ1poRCxFQUFFLEdBQ0ZxQyxFQUFBQSxFQUNBQyxFQUFBQSxFQUNBRSxFQUFBQyxjQUFBUixFQUFBaUIsT0FDQWhDLEdBQUFBLEVBRUEwQixRQUFPcUIsS0FDUkQsRUFBQTFELFNBQUEsVUFDRDRELElBQ0VGLElBRUFwRCxRQUFBQSxLQUNEb0QsRUFBQTFELFNBQUEsVUFDREYsRUFBUytELFlBQVksVUFDbkJILElBbFFGLEdBQUk1QyxPQUFBQSxHQURKYSxNQUFBQSxHQUNJYixNQUFBQSxHQUNBYSxFQUFBQSxHQUNBRixFQUFBQSxHQUNBTSxHQUFBQSxFQUNBQyxNQUFBQSxHQUNBTSxFQUFPLEVBQ1BJLEVBQUFBLEVBQ0FSLEVBQUpzQixhQUFBTSxRQUFBLGNBQUEsRUFFSW5ELEdBR0ZvRCxLQURJQyxLQUFBQSxPQUNKRCxNQUFLLG1DQUNIRSxPQUFNLEVBQ05yQyxjQUFPLEVBQ1BnQixPQUFRLEVBQ1JULE9BQUFBLEVBQ0FlLFNBTEcsSUFPSFYsS0FSZXlCLEtBQUEsUUFVakJDLE1BQUssbUNBQ0hELE9BQU0sR0FDTnJDLGNBQU8sR0FDUGdCLE9BQVEsRUFDUlQsT0FBQUEsRUFDQWUsU0FMRyxJQU9IVixPQWpCZXlCLEtBQUEsY0FtQmpCRSxNQUFPLG1DQUNMRixPQUFNLEVBQ05yQyxjQUFPLEVBQ1BnQixPQUFRLEVBQ1JULE9BQUFBLEVBQ0FlLFNBTEssS0FBQXhCLEdBbkJUcUMsS0E2Qk1yQyxLQUFBQSxRQUNKcUMsTUFBSyxvQ0FDSEUsT0FBTSxFQUNOckMsU0FBTyxJQUVQWSxLQUxheUIsS0FBQSxZQU9mQyxNQUFLLG9DQUNIRCxPQUFNLEVBQ05yQyxTQUFPLElBRVBZLE9BWGF5QixLQUFBLFNBYWZFLE1BQU8sb0NBQ0xGLE9BQU0sRUFDTnJDLFNBQU8sTUFmWGhDLEVBQUFGLEVBQUEsaUJBc0JNMEUsRUFBbUIxRSxFQUFFLGlCQURyQkUsRUFBQUEsRUFBQUEsWUFDQXdFLEVBQUFBLEVBQUFBLFNBQ0F0RSxFQUFhSixFQUFBLFNBQ2IyRSxFQUFOM0UsRUFBQSxxQkFDTTRFLEVBQWE1RSxFQUFBLGNBQ2JRLEVBQUFBLEVBQUFBLFNBQ0FxRSxFQUFhN0UsRUFBRSxVQUNmOEUsRUFBTjlFLEVBQUEscUJBQ002QixFQUFjN0IsRUFBQSxnQkFDZFUsRUFBQUEsRUFBQUEsYUFDQUMsRUFBZ0JYLEVBQUEsY0FDaEIrRSxFQUFBQSxFQUFjL0UsV0FDZGdFLEVBQUFBLEVBQUFBLFdBQ0FnQixFQUFZaEYsRUFBQSxXQUNaaUYsRUFBWWpGLEVBQUEsYUFDWmtGLEVBQVlsRixFQUFBLGlCQUNabUYsR0FBV25GLEVBQUUsaUJBQ2JvRixHQUFjcEYsRUFBRSxlQUNoQjBDLEdBQVcxQyxFQUFBLFFBcUxma0UsR0FBQUEsR0FBQUEsUUFBQUEsR0FDRFMsRUFBQVUsR0FBQSxRQUFBOUUsR0FDRG1FLEVBQUFBLEdBQUFBLFFBQW9CakUsR0FDcEJrRSxFQUFTVSxHQUFHLFFBQVM5RSxHQUNyQnFFLEVBQUFBLEdBQVNTLFFBQUc5RCxHQUNaTSxFQUFVd0QsR0FBRyxRQUFTQyxHQUN0QlIsRUFBU08sR0FBQSxRQUFTOUQsR0FDbEJzRCxFQUFBQSxHQUFXUSxRQUFHMUMsR0FDZG9DLEVBQUFBLEdBQUFBLFFBQWV2QixHQUNmd0IsRUFBUUssR0FBRyxRQUFTMUMsR0FDcEJzQyxFQUFRSSxHQUFHLFFBQVM3QixHQUNwQjBCLEVBQVdHLEdBQUEsUUFBUzlCIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICBsZXQgcGxheWVyTmFtZTtcbiAgbGV0IHBsYXllckNob3NlbjtcbiAgbGV0IHZpbGxpYW5DaG9zZW47XG4gIGxldCBwbGF5ZXJMaWZlID0gMjA7XG4gIGxldCB2aWxsaWFuTGlmZSA9IDIwO1xuICBsZXQgdHVybiA9IHRydWU7XG4gIGxldCByb3VuZFRleHQ7XG4gIGxldCByb3VuZCA9IDE7XG4gIGxldCBzY29yZSA9IDA7XG4gIGxldCBoaWdoU2NvcmUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnaGlnaFNjb3JlJykgfHwgMDtcblxuICBjb25zdCBjaGFyYWN0ZXJzID0ge1xuICAgIG9uZToge1xuICAgICAgbmFtZTogJ05pY2snLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIxLmdpZicsXG4gICAgICBhdHRhY2s6IDQsXG4gICAgICBjdXJyZW50QXR0YWNrOiA0LFxuICAgICAgd2FyQ3J5OiAyLFxuICAgICAgZGVmZW5kOiA0LFxuICAgICAgYWNjdXJhY3k6IDAuNFxuICAgIH0sXG4gICAgdHdvOiB7XG4gICAgICBuYW1lOiAnRWxsZW4nLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy9wbGF5ZXIyLmdpZicsXG4gICAgICBhdHRhY2s6IDEwLFxuICAgICAgY3VycmVudEF0dGFjazogMTAsXG4gICAgICB3YXJDcnk6IDUsXG4gICAgICBkZWZlbmQ6IDUsXG4gICAgICBhY2N1cmFjeTogMC44XG4gICAgfSxcbiAgICB0aHJlZToge1xuICAgICAgbmFtZTogJ011dGFudCBOaWNrJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMy5naWYnLFxuICAgICAgYXR0YWNrOiA2LFxuICAgICAgY3VycmVudEF0dGFjazogNixcbiAgICAgIHdhckNyeTogMSxcbiAgICAgIGRlZmVuZDogMixcbiAgICAgIGFjY3VyYWN5OiAwLjVcbiAgICB9XG4gIH07XG4gIGNvbnN0IHZpbGxpYW5zID0ge1xuICAgIG9uZToge1xuICAgICAgbmFtZTogJ0hlbnJ5JyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjMuanBnJyxcbiAgICAgIGF0dGFjazogNSxcbiAgICAgIGFjY3VyYWN5OiAwLjVcbiAgICB9LFxuICAgIHR3bzoge1xuICAgICAgbmFtZTogJ1hlbm9tb3JwaCcsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4yLmdpZicsXG4gICAgICBhdHRhY2s6IDUsXG4gICAgICBhY2N1cmFjeTogMC41XG4gICAgfSxcbiAgICB0aHJlZToge1xuICAgICAgbmFtZTogJ01lZHVzYScsXG4gICAgICBpbWFnZTogJ3B1YmxpYy9hc3NldHMvaW1hZ2VzL3ZpbGxpYW4zLmdpZicsXG4gICAgICBhdHRhY2s6IDQsXG4gICAgICBhY2N1cmFjeTogMC41NlxuICAgIH1cbiAgfTtcblxuICBjb25zdCAkaW5zdHJ1Y3Rpb25zID0gJCgnLmluc3RydWN0aW9ucycpO1xuICBjb25zdCAkaW5zdHJ1Y3Rpb25zQnRuID0gJCgnI2luc3RydWN0aW9ucycpO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRiYWNrQnRuID0gJCgnI2JhY2snKTtcbiAgY29uc3QgJHBsYXlCdG4gPSAkKCcjcGxheScpO1xuICBjb25zdCAkY2hhcmFjdGVyU2NyZWVuID0gJCgnLmNoYXJhY3Rlci1zY3JlZW4nKTtcbiAgY29uc3QgJGNoYXJhY3RlciA9ICQoJy5jaGFyYWN0ZXInKTtcbiAgY29uc3QgJG5hbWUgPSAkKCcubmFtZScpO1xuICBjb25zdCAkc3RhcnRCdG4gPSAkKCcjc3RhcnQnKTtcbiAgY29uc3QgJGNob3NlbkNoYXJhY3RlciA9ICQoJy5jaG9zZW4tY2hhcmFjdGVyJyk7XG4gIGNvbnN0ICRnYW1lV2luZG93ID0gJCgnLmdhbWUtd2luZG93Jyk7XG4gIGNvbnN0ICRraWNrT2ZmQnRuID0gJCgnI2tpY2stb2ZmJyk7XG4gIGNvbnN0ICRnYW1lT3ZlclNjcmVlbiA9ICQoJy5nYW1lLW92ZXInKTtcbiAgY29uc3QgJGF0dGFjayA9ICQoJyNhdHRhY2snKTtcbiAgY29uc3QgJHdhckNyeSA9ICQoJyN3YXJjcnknKTtcbiAgY29uc3QgJGRlZmVuZCA9ICQoJyNkZWZlbmQnKTtcbiAgY29uc3QgJG5ld0dhbWUgPSAkKCcjbmV3LWdhbWUnKTtcbiAgY29uc3QgJGJhY2tUb01lbnUgPSAkKCcjYmFjay10by1tZW51Jyk7XG4gIGNvbnN0ICRzY29yZSA9ICQoJyNwbGF5ZXItc2NvcmUnKTtcbiAgY29uc3QgJGhpZ2hTY29yZSA9ICQoJy5oaWdoLXNjb3JlJyk7XG4gIGNvbnN0ICRhdWRpbyA9ICQoJ2F1ZGlvJyk7XG5cbiAgZnVuY3Rpb24gaGlkZVdpbmRvdzEoKXtcbiAgICAkaW5zdHJ1Y3Rpb25zLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAkd2VsY29tZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gaGlkZVdpbmRvdzIoKXtcbiAgICAkaW5zdHJ1Y3Rpb25zLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkd2VsY29tZS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gZ29Ub0Nob2ljZVNjcmVlbigpe1xuICAgICR3ZWxjb21lLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkY2hhcmFjdGVyU2NyZWVuLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfVxuICBmdW5jdGlvbiB0b1RoZUdhbWUoKXtcbiAgICAkY2hhcmFjdGVyU2NyZWVuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkY2hvc2VuQ2hhcmFjdGVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgfVxuICBmdW5jdGlvbiBzdGFydFRoZUdhbWUoKXtcbiAgICAkY2hvc2VuQ2hhcmFjdGVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkZ2FtZVdpbmRvdy5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgJGhpZ2hTY29yZS50ZXh0KGhpZ2hTY29yZSk7XG4gICAgZGlzcGxheUhlYWx0aCgpO1xuICAgIGRpc3BsYXlTY29yZSgpO1xuICAgIGRpc3BsYXlSb3VuZCgpO1xuICAgIGRpc3BsYXlDdXJyZW50QXR0YWNrKCk7XG4gIH1cbiAgZnVuY3Rpb24gdXBkYXRlSGlnaFNjb3JlKCl7XG4gICAgaGlnaFNjb3JlID0gc2NvcmUgPiBoaWdoU2NvcmUgPyBzY29yZSA6IGhpZ2hTY29yZTtcbiAgICAkaGlnaFNjb3JlLnRleHQoaGlnaFNjb3JlKTtcbiAgfVxuICBmdW5jdGlvbiBnZXRUaGVOYW1lKCl7XG4gICAgcGxheWVyTmFtZSA9ICQodGhpcykudmFsKCk7XG4gICAgaWYgKHBsYXllck5hbWUubGVuZ3RoID09PSAwKXtcbiAgICAgIGFsZXJ0KCdZb3UgbXVzdCBwcm92aWRlIHlvdXIgbmFtZScpO1xuICAgIH1cbiAgICAkKCcucGxheWVyLW5hbWUnKS50ZXh0KHBsYXllck5hbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2VsZWN0Q2hhcmFjdGVyKCl7XG4gICAgJCh0aGlzKS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgY29uc3QgaWQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG4gICAgaWYoaWQpe1xuICAgICAgJHN0YXJ0QnRuLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH1cbiAgICBwbGF5ZXJDaG9zZW4gPSBjaGFyYWN0ZXJzW2lkXTtcbiAgICB2aWxsaWFuQ2hvc2VuID0gdmlsbGlhbnNbaWRdO1xuICAgICQoJy5jaG9zZW4tY2hhcmFjdGVyIGltZywgLnBsYXllcicpLmF0dHIoJ3NyYycsIHBsYXllckNob3Nlbi5pbWFnZSk7XG4gICAgJCgnLnZpbGxpYW4nKS5hdHRyKCdzcmMnLCB2aWxsaWFuQ2hvc2VuLmltYWdlKTtcbiAgICAkKCcudmlsbGlhbi1uYW1lJykudGV4dCh2aWxsaWFuQ2hvc2VuLm5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlIZWFsdGgoKXtcbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAkKCcjcGxheWVyLWhlYWx0aCcpLmh0bWwocGxheWVyTGlmZSk7XG4gICAgICAkKCcjdmlsbGlhbi1oZWFsdGgnKS5odG1sKHZpbGxpYW5MaWZlKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlSb3VuZCgpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNyb3VuZC1ubycpLnRleHQoYFJvdW5kICR7cm91bmR9YCk7XG4gICAgfSwgNTAwKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5Q3VycmVudEF0dGFjaygpe1xuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICQoJyNjdXJyZW50LWF0dGFjaycpLnRleHQocGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2spO1xuICAgIH0sIDUwMCk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVNjb3JlKCl7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgJHNjb3JlLmh0bWwoc2NvcmUpO1xuICAgIH0sIDUwMCk7XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2tWaWxsaWFuKCl7XG4gICAgaWYodHVybiA9PT0gdHJ1ZSl7XG4gICAgICBpZihNYXRoLnJhbmRvbSgpIDwgcGxheWVyQ2hvc2VuLmFjY3VyYWN5KXtcbiAgICAgICAgdmlsbGlhbkxpZmUgLT0gcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2s7XG4gICAgICAgIHNjb3JlICs9IHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrO1xuICAgICAgICByb3VuZFRleHQgPSAnWW91IGhhdmUgaGl0IGhpbSEnO1xuICAgICAgICAkYXVkaW8uYXR0cignc3JjJywncHVibGljL2Fzc2V0cy9hdWRpby9wdW5jaC53YXYnKTtcbiAgICAgICAgY29uc29sZS5sb2coJGF1ZGlvKTtcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1dob29vcHMhIEEgbWlzcy4uLic7XG4gICAgICB9XG4gICAgICBwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjayA9IHBsYXllckNob3Nlbi5hdHRhY2s7XG4gICAgICAkKCcjYmF0dGxlLXRleHQnKS50ZXh0KGAke3JvdW5kVGV4dH1gKTtcbiAgICAgIHR1cm4gPSBmYWxzZTtcbiAgICAgIHdob3NlVHVybigpO1xuICAgICAgY2hlY2tGb3JXaW5uZXIoKTtcbiAgICAgIHVwZGF0ZUhpZ2hTY29yZSgpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGF0dGFja1BsYXllcigpO1xuICAgICAgfSwgMzAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGF0dGFja1BsYXllcigpe1xuICAgIGlmKHR1cm4gPT09IGZhbHNlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCB2aWxsaWFuQ2hvc2VuLmFjY3VyYWN5KXtcbiAgICAgICAgcGxheWVyTGlmZSAtPSB2aWxsaWFuQ2hvc2VuLmF0dGFjaztcbiAgICAgICAgcm91bmRUZXh0ID0gJ0hlIGhpdCB5b3UhJztcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgcm91bmRUZXh0ID0gJ1lvdSBhcmUgc2FmZSEnO1xuICAgICAgfVxuICAgICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gICAgICBjaGVja0Zvcldpbm5lcigpO1xuICAgICAgdHVybiA9IHRydWU7XG4gICAgICB3aG9zZVR1cm4oKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gZGVmZW5kKCl7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dCgnJyk7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrIC09IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICAgIHZpbGxpYW5DaG9zZW4uYXR0YWNrICs9IHBsYXllckNob3Nlbi5kZWZlbmQ7XG4gICAgfSwgMjAwMCk7XG4gIH1cbiAgZnVuY3Rpb24gd2FyQ3J5KCl7XG4gICAgJCgnI2JhdHRsZS10ZXh0JykudGV4dCgnJyk7XG4gICAgdHVybiA9IGZhbHNlO1xuICAgIHdob3NlVHVybigpO1xuICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrICs9IHBsYXllckNob3Nlbi53YXJDcnk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBhdHRhY2tQbGF5ZXIoKTtcbiAgICB9LCAyMDAwKTtcbiAgfVxuICBmdW5jdGlvbiBjaGVja0Zvcldpbm5lcigpe1xuICAgIGlmIChwbGF5ZXJMaWZlIDw9IDApe1xuICAgICAgZ2FtZU92ZXIoKTtcbiAgICB9XG4gICAgaWYodmlsbGlhbkxpZmUgPD0gMCl7XG4gICAgICAkKCcjd2lubmVyJykudGV4dCgnWW91IHdvbiB0aGlzIHJvdW5kISEhIFRhLWRhISEnKS5jc3Moeydjb2xvcic6ICcjQzVEMjAwJywgJ2ZvbnQtc2l6ZSc6ICcyOHB4J30pO1xuICAgICAgdHVybiA9IHRydWU7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbmV4dFJvdW5kKCk7XG4gICAgICB9LCAyMDAwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gd2hvc2VUdXJuKCl7XG4gICAgaWYgKHR1cm4gPT09IGZhbHNlKXtcbiAgICAgICQoJy5wbGF5ZXItc2VjdGlvbiBpbWcnKS5yZW1vdmVDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgICBpZiAodHVybiA9PT0gdHJ1ZSl7XG4gICAgICAkKCcucGxheWVyLXNlY3Rpb24gaW1nJykuYWRkQ2xhc3MoJ2ltZy1hY3RpdmUnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbmV4dFJvdW5kKCl7XG4gICAgcm91bmQgKz0gMTtcbiAgICB2aWxsaWFuTGlmZSA9IDI1ICogcm91bmQ7XG4gICAgcGxheWVyTGlmZSA9IDIwICAqIHJvdW5kO1xuICAgIHJvdW5kVGV4dCA9ICcnO1xuICAgICQoJyN3aW5uZXInKS50ZXh0KCcnKTtcbiAgICAkKCcjYmF0dGxlLXRleHQnKS50ZXh0KGAke3JvdW5kVGV4dH1gKTtcbiAgfVxuICBmdW5jdGlvbiBnYW1lT3Zlcigpe1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdoaWdoU2NvcmUnLCBoaWdoU2NvcmUpO1xuICAgICRnYW1lV2luZG93LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAkZ2FtZU92ZXJTY3JlZW4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICB9XG4gIGZ1bmN0aW9uIHJlc2V0RGF0YSgpe1xuICAgIHJvdW5kVGV4dCA9ICcnO1xuICAgICQoJyNiYXR0bGUtdGV4dCcpLnRleHQoYCR7cm91bmRUZXh0fWApO1xuICAgIHBsYXllckxpZmUgPSAyMDtcbiAgICB2aWxsaWFuTGlmZSA9IDIwO1xuICAgIHJvdW5kID0gMTtcbiAgICBzY29yZSA9IDA7XG4gICAgcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2sgPSBwbGF5ZXJDaG9zZW4uYXR0YWNrO1xuICAgIHR1cm4gPSB0cnVlO1xuICB9XG4gIGZ1bmN0aW9uIG5ld0dhbWUoKXtcbiAgICAkZ2FtZU92ZXJTY3JlZW4uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgIHJlc2V0RGF0YSgpO1xuICAgIHN0YXJ0VGhlR2FtZSgpO1xuICB9XG4gIGZ1bmN0aW9uIGJhY2tUb01lbnUoKXtcbiAgICAkZ2FtZU92ZXJTY3JlZW4uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICR3ZWxjb21lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICByZXNldERhdGEoKTtcbiAgfVxuICAkaW5zdHJ1Y3Rpb25zQnRuLm9uKCdjbGljaycsIGhpZGVXaW5kb3cxKTtcbiAgJGJhY2tCdG4ub24oJ2NsaWNrJywgaGlkZVdpbmRvdzIpO1xuICAkcGxheUJ0bi5vbignY2xpY2snLCBnb1RvQ2hvaWNlU2NyZWVuKTtcbiAgJHN0YXJ0QnRuLm9uKCdjbGljaycsIHRvVGhlR2FtZSk7XG4gICRuYW1lLm9uKCdrZXl1cCcsIGdldFRoZU5hbWUpO1xuICAkY2hhcmFjdGVyLm9uKCdjbGljaycsIHNlbGVjdENoYXJhY3Rlcik7XG4gICRraWNrT2ZmQnRuLm9uKCdjbGljaycsIHN0YXJ0VGhlR2FtZSk7XG4gICRhdHRhY2sub24oJ2NsaWNrJywgYXR0YWNrVmlsbGlhbik7XG4gICR3YXJDcnkub24oJ2NsaWNrJywgd2FyQ3J5KTtcbiAgJGRlZmVuZC5vbignY2xpY2snLCBkZWZlbmQpO1xuICAkbmV3R2FtZS5vbignY2xpY2snLCBuZXdHYW1lKTtcbiAgJGJhY2tUb01lbnUub24oJ2NsaWNrJywgYmFja1RvTWVudSk7XG59KTtcbiJdfQ==
