"use strict";$(function(){function a(){P.removeClass("hidden").addClass("animated fadeIn"),j.addClass("hidden")}function e(){P.addClass("hidden").removeClass("animated fadeIn"),j.removeClass("hidden").addClass("animated fadeIn")}function c(){for(var a=0;a<W.length;a++){var e='\n      <div class="character" data-id='+a+'>\n      <img src="'+W[a].image+'">\n      <p class="underlined">'+W[a].name+"</p>\n      <p>Attack: "+W[a].attack+"</p>\n      <p>WarCry: "+W[a].warCry+"</p>\n      <p>Defend: "+W[a].defend+"</p>\n      <p>Accuracy: "+W[a].accuracy+"</p>\n      </div>\n      ";J.append(e)}}function t(){j.addClass("hidden"),G.removeClass("hidden").addClass("animated fadeIn"),c()}function n(){G.addClass("hidden"),O.removeClass("hidden").addClass("animated fadeIn")}function i(){O.addClass("hidden"),Q.removeClass("hidden").addClass("animated fadeIn"),na.text(N),setInterval(function(){u(),f(),o(),m(),l()},500)}function r(){N=M>N?M:N,na.text(N)}function s(){T=$(this).val(),0!==T.length&&U.attr("disabled",!1).addClass("animated infinite pulse"),ya.text(T)}function d(){$(this).addClass("active").siblings().removeClass("active");var a=$(this).attr("data-id");a&&L.attr("disabled",!1).addClass("animated infinite pulse"),E=W[a],S=R[a],$(".chosen-character img, .player-img").attr("src",E.image),$(".hexagon").css("background-image","url("+E.image+")"),Ca.attr("src",S.image),va.text(S.name),xa.text(S.attack)}function u(){ka.html(Y),Aa.html(z)}function l(){$a.html(E.currentAccuracy.toFixed(2)),ga.html(S.currentAccuracy.toFixed(2))}function o(){wa.text(""+H)}function m(){pa.text(E.currentAttack)}function f(){ta.html(M)}function y(){ba.text(""+F)}function h(){console.log(E.currentAccuracy),!0===D&&(Math.random()<E.currentAccuracy?(z-=E.currentAttack,M+=E.currentAttack,F="You have hit him!",Ca.addClass("animated shake"),ia.play()):(sa.play(),F="Whooops! A miss..."),E.currentAttack=E.attack,y(),ha.removeClass("animated shake"),D=!1,v(),C(),r(),setTimeout(function(){k()},3e3))}function k(){console.log(S.currentAccuracy),!1===D&&(Math.random()<S.currentAccuracy?(Y-=S.attack,F="He hit you!",ra.play(),ha.addClass("animated shake")):(da.play(),F="You are safe!"),Ca.removeClass("animated shake"),y(),C(),D=!0,setTimeout(function(){v()},1e3))}function p(){ba.text("DEFEND!!!"),D=!1,v(),S.attack-=E.defend,setTimeout(function(){k(),S.attack+=E.defend},2e3)}function g(){"Nick the Cat"===E.name?oa.play():"Catzilla"===E.name?ma.play():"Ellen Ripley"===E.name&&fa.play(),ba.text("You have used WarCry"),D=!1,v(),E.currentAttack+=E.warCry,setTimeout(function(){k()},2e3)}function C(){Y<=0&&(ua.play(),x()),z<=0&&(z=0,Ia.text("You won this round!!! Ta-da!!").css({color:"#204215","font-size":"28px"}),la.play(),D=!0,setTimeout(function(){A()},2e3))}function v(){!1===D&&ha.removeClass("img-active"),!0===D&&ha.addClass("img-active")}function A(){E.currentAccuracy+=.01,S.currentAccuracy+=.05,H+=1,z=20,Y=20+H,F="",Ia.text(""),y(),v()}function x(){localStorage.setItem("highScore",N),Q.addClass("hidden"),V.removeClass("hidden").addClass("animated fadeIn"),b()}function b(){F="",y(),Y=20,z=20,H=1,M=0,E.currentAttack=E.attack,E.currentAccuracy=E.accuracy,S.currentAccuracy=S.accuracy,D=!0,J.empty(),ha.removeClass("animated shake"),L.removeClass("animated infinite pulse")}function w(){V.addClass("hidden"),i()}function I(){V.addClass("hidden"),j.removeClass("hidden").addClass("animated fadeIn")}var T=void 0,E=void 0,S=void 0,Y=20,z=20,D=!0,F=void 0,H=1,M=0,N=localStorage.getItem("highScore")||0,W=[{name:"Nick the Cat",image:"public/assets/images/player1.gif",attack:20,currentAttack:20,warCry:3,defend:4,accuracy:.9,currentAccuracy:.9},{name:"Ellen Ripley",image:"public/assets/images/player2.gif",attack:5,currentAttack:5,warCry:2,defend:5,accuracy:.5,currentAccuracy:.5},{name:"Catzilla",image:"public/assets/images/player3.gif",attack:4,currentAttack:4,warCry:5,defend:2,accuracy:.5,currentAccuracy:.5}],R=[{name:"Henry the Hoover",image:"public/assets/images/villian1.gif",attack:5,accuracy:.3,currentAccuracy:.3},{name:"Xenomorph",image:"public/assets/images/villian2.gif",attack:5,accuracy:.3,currentAccuracy:.3},{name:"Pink Medusa",image:"public/assets/images/villian3.gif",attack:5,accuracy:.3,currentAccuracy:.3}],P=$(".instructions"),X=$("#instructions"),j=$(".welcome"),q=$("#back"),B=$("#play"),G=$(".character-screen"),J=$(".choices"),K=$(".name"),L=$("#start"),O=$(".chosen-character"),Q=$(".game-window"),U=$("#kick-off"),V=$(".game-over"),Z=$("#attack"),_=$("#warcry"),aa=$("#defend"),ea=$("#new-game"),ca=$("#back-to-menu"),ta=$("#player-score"),na=$(".high-score"),ia=$("audio")[0],ra=$("audio")[1],sa=$("audio")[2],da=$("audio")[3],ua=$("audio")[4],la=$("audio")[5],oa=$("audio")[6],ma=$("audio")[7],fa=$("audio")[8],ya=$(".player-name"),ha=$(".player-img"),ka=$("#player-life"),pa=$("#player-current-attack"),$a=$("#player-current-accuracy"),ga=$("#villian-current-accuracy"),Ca=$(".villian-img"),va=$(".villian-name"),Aa=$("#villian-life"),xa=$("#villian-attack"),ba=$("#turn-result"),wa=$("#round-no"),Ia=$("#round-message");X.on("click",a),q.on("click",e),B.on("click",t),L.on("click",n),K.on("keyup",s),J.on("click",".character",d),U.on("click",i),Z.on("click",h),_.on("click",g),aa.on("click",p),ea.on("click",w),ca.on("click",I)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyIkIiwiJHdlbGNvbWUiLCIkaW5zdHJ1Y3Rpb25zIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNyZWF0ZUNob2ljZXMiLCJjb250ZW50IiwiJGNob2ljZXMiLCJhcHBlbmQiLCJnb1RvQ2hvaWNlU2NyZWVuIiwiY2hhcmFjdGVycyIsImxlbmd0aCIsImkiLCIkY2hhcmFjdGVyU2NyZWVuIiwiaW1hZ2UiLCJuYW1lIiwiYXR0YWNrIiwiJGNob3NlbkNoYXJhY3RlciIsIndhckNyeSIsImRlZmVuZCIsInN0YXJ0VGhlR2FtZSIsImFjY3VyYWN5IiwiJGhpZ2hTY29yZSIsInRleHQiLCJoaWdoU2NvcmUiLCJkaXNwbGF5U2NvcmUiLCJkaXNwbGF5Um91bmQiLCJkaXNwbGF5Q3VycmVudEF0dGFjayIsImRpc3BsYXlBY2N1cmFjeSIsInRvVGhlR2FtZSIsInVwZGF0ZUhpZ2hTY29yZSIsInNjb3JlIiwicGxheWVyTmFtZSIsIiRraWNrT2ZmQnRuIiwiZGlzcGxheUhlYWx0aCIsIiRwbGF5ZXJOYW1lIiwiJHN0YXJ0QnRuIiwiYXR0ciIsInZpbGxpYW5DaG9zZW4iLCJ0aGlzIiwidmFsIiwiY3NzIiwiJHZpbGxpYW5JbWciLCIkdmlsbGlhbkF0dGFjayIsIiRwbGF5ZXJMaWZlIiwiJHZpbGxpYW5MaWZlIiwidmlsbGlhbkxpZmUiLCJpZCIsIiR2aWxsaWFuQ3VyckFjY3VyYWN5IiwidmlsbGlhbnMiLCJwbGF5ZXJDaG9zZW4iLCIkcm91bmROdW1iZXIiLCIkdmlsbGlhbk5hbWUiLCIkcGxheWVyQ3VycmVudEF0dGFjayIsIiRzY29yZSIsInBsYXllckxpZmUiLCJodG1sIiwiJHBsYXllckN1cnJBY2N1cmFjeSIsImN1cnJlbnRBY2N1cmFjeSIsInRvRml4ZWQiLCJ0dXJuIiwicmFuZG9tIiwicm91bmQiLCJyb3VuZFRleHQiLCJjdXJyZW50QXR0YWNrIiwiJHNsYXBBdWRpbyIsIiR0dXJuUmVzdWx0IiwiJHBsYXllckltZyIsIndob3NlVHVybiIsImNoZWNrRm9yV2lubmVyIiwic2V0VGltZW91dCIsImF0dGFja1BsYXllciIsInBsYXkiLCIkc3dvb3NoQXVkaW8iLCJjb25zb2xlIiwiJHB1bmNoQXVkaW8iLCIkc3dvb3NoQXVkaW8yIiwiTWF0aCIsIiRtZW93IiwiJGdldEF3YXkiLCIkZ2FtZU92ZXJBdWRpbyIsImdhbWVPdmVyIiwiJHJvdW5kTWVzc2FnZSIsIiRsZXZlbFVwQXVkaW8iLCJuZXh0Um91bmQiLCJjb2xvciIsImZvbnQtc2l6ZSIsInR1cm5SZXN1bHRUZXh0IiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsInJlc2V0RGF0YSIsImVtcHR5IiwiJGdhbWVXaW5kb3ciLCIkZ2FtZU92ZXJTY3JlZW4iLCJiYWNrVG9NZW51IiwiJGluc3RydWN0aW9uc0J0biIsImhpZGVXaW5kb3cxIiwiJGJhY2tCdG4iLCIkcGxheUJ0biIsIiRuYW1lIiwic2VsZWN0Q2hhcmFjdGVyIiwiJHdhckNyeSIsIm9uIiwiJGRlZmVuZCIsIiRuZXdHYW1lIiwiZ2V0SXRlbSIsIiRhdHRhY2siLCIkYmFja1RvTWVudSIsIiRyb2FyIiwiaGlkZVdpbmRvdzIiLCJnZXRUaGVOYW1lIiwiYXR0YWNrVmlsbGlhbiIsIm5ld0dhbWUiXSwibWFwcGluZ3MiOiJZQUFBQSxHQUFFLFdBcUhFQyxRQUFBQSxLQUNEQyxFQUFBQyxZQUFBLFVBQUFDLFNBQUEsbUJBQ0RILEVBQVNJLFNBQUFBLFVBRUwsUUFBTUMsS0FVTkMsRUFBU0MsU0FBT0YsVUFBaEJILFlBQUEsbUJBQ0RGLEVBQUFFLFlBQUEsVUFBQUMsU0FBQSxtQkFFSCxRQUFTSyxLQUNQUixJQUFBQSxHQUFBQSxHQUFTRyxFQUFBQSxFQUFTTSxFQUFsQkMsT0FBQUMsSUFBQSxDQUNBQyxHQUFBQSxHQUFBQSwwQ0FDQVIsRUFEQVEsc0JBRURILEVBQUFFLEdBQUFFLE1BRkNELG1DQUdrQkgsRUFBQUUsR0FBQUcsS0FIbEJGLDBCQUlBQSxFQUEwQkQsR0FBQUksT0FKMUJILDBCQUtBSSxFQUFpQmQsR0FBWWUsT0FMN0JMLDBCQU1ESCxFQUFBRSxHQUFBTyxPQU5DTiw0QkFPT08sRUFBY1IsR0FBQVMsU0FQckJSLDRCQVVBUyxHQUFXQyxPQUFLQyxJQUdkQyxRQUFBQSxLQUNBQyxFQUFBQSxTQUFBQSxVQUNBQyxFQUFBQSxZQUFBQSxVQUFBQSxTQUFBQSxtQkFDQUMsSUFFSCxRQUFBQyxLQUNEaEIsRUFBU2lCLFNBQWlCLFVBQ3hCTixFQUFZTyxZQUFBLFVBQUEzQixTQUE0Qm9CLG1CQUV6QyxRQUFBSixLQUNESCxFQUFBYixTQUFxQixVQUNuQjRCLEVBQUFBLFlBQWEsVUFBYjVCLFNBQUEsbUJBQ0FrQixHQUFJVSxLQUFXckIsR0FDYnNCLFlBQUFBLFdBQ0RDLElBQ0RDLElBQ0RULElBZEdDLElBZ0JKQyxLQUNJLEtBRUYsUUFBQUUsS0FDRU0sRUFBVUMsRUFBS2IsRUFBWU8sRUFBTzNCLEVBQ25Da0IsR0FBQUMsS0FBQUMsR0FFRGMsUUFBQUEsS0FDQXRDLEVBQUVBLEVBQUF1QyxNQUFBQyxNQUNnQixJQUFoQlIsRUFBWVMsUUFDZEMsRUFBWUwsS0FBSyxZQUFPQyxHQUFjeEIsU0FBdEMsMkJBRUE2QixHQUFBQSxLQUFlcEIsR0FHZnFCLFFBQUFBLEtBQ0FDLEVBQUFBLE1BQUFBLFNBQUEsVUFBa0JDLFdBQWxCM0MsWUFBQSxTQUNELElBQUE0QyxHQUFBL0MsRUFBQXVDLE1BQUFGLEtBQUEsVUFkSVUsSUFnQkxYLEVBQVNSLEtBQUFBLFlBQWlCLEdBQUF4QixTQUFBLDJCQUV4QjRDLEVBQUFBLEVBQTBCVixHQUMzQkEsRUFBQVcsRUFBQUYsR0FDRC9DLEVBQUEsc0NBQXVCcUMsS0FBQSxNQUFBYSxFQUFBcEMsT0FDckJxQyxFQUFBQSxZQUFhNUIsSUFBYixtQkFBQTRCLE9BQUFELEVBQUFwQyxNQUFBcUMsS0FDRFQsR0FBQUwsS0FBQSxNQUFBQyxFQUFBeEIsT0FDRHNDLEdBQVN6QixLQUFBQSxFQUFzQlosTUFDN0JzQyxHQUFBQSxLQUFBQSxFQUEwQkgsUUFFNUIsUUFBU3pCLEtBQ1A2QixHQUFZdkIsS0FBWndCLEdBQ0RWLEdBQUFXLEtBQUFWLEdBR0EsUUFBQWxCLEtBZEM2QixHQUFvQkQsS0FBS04sRUFBYVEsZ0JBQWdCQyxRQUFRLElBZ0JoRVgsR0FBQVEsS0FBd0JsQixFQUFBb0IsZ0JBQUFDLFFBQUEsSUFFdEIsUUFBR0MsS0FDRFQsR0FBUVUsS0FBUixHQUFHQyxHQUVEL0IsUUFBQUEsS0FDQWdDLEdBQVl4QyxLQUFBMkIsRUFBWmMsZUFFQUMsUUFBQUEsS0FDRFgsR0FOREUsS0FNTXpCLEdBRUpnQyxRQUFBQSxLQUNERyxHQUFBM0MsS0FBQSxHQUFBd0MsR0FHREksUUFBQUEsS0FDQVAsUUFBQUEsSUFBT1YsRUFBUFEsa0JBQ0FVLElBQUFBLElBQ0FDLEtBQUFBLFNBQUFBLEVBQUFBLGlCQUNBdkMsR0FBQUEsRUFBQUEsY0FDQXdDLEdBQVdwQixFQUFNYyxjQUNmTyxFQUFBQSxvQkFERjdCLEdBQUF0QyxTQUFBLGtCQUdENkQsR0FBQU8sU0FFSEMsR0FBU0YsT0FDUEcsRUFBWXBDLHNCQUVWWSxFQUFRVyxjQUFXdkIsRUFBY29CLE9BQy9CSCxJQUNBUSxHQUFBQSxZQUFZLGtCQUNaWSxHQUFBQSxFQUNBUixJQUNERSxJQUNDTyxJQUNBYixXQUFBQSxXQUNEUSxLQUNEN0IsTUFHQWtCLFFBQUFBLEtBQ0FVLFFBQUFBLElBQUFBLEVBQWlCWixrQkFDZlUsSUFBQUEsSUFDQVMsS0FGRmhCLFNBQUF2QixFQUFBb0IsaUJBR0RILEdBQUFqQixFQUFBdEIsT0FDRitDLEVBQUEsY0FDRFksR0FBaUJILE9BQ2ZOLEdBQVkzQyxTQUFLLG9CQUVqQjZDLEdBQUFBLE9BQ0E5QixFQUFjdEIsaUJBRVp1RCxHQUFBQSxZQUFBQSxrQkFDQWpDLElBRkYrQixJQUlEVCxHQUFBLEVBQ0RVLFdBQUEsV0FDTXBCLEtBQ0Y0QixNQUdELFFBQU0zRCxLQUNMNEQsR0FBU1AsS0FBVCxhQUNEWixHQUFBLEVBQ0RNLElBQ0FOLEVBQUE1QyxRQUFBa0MsRUFBQS9CLE9BQ0FpRCxXQUFBQSxXQUNBbEIsSUFDQW9CLEVBQVd0RCxRQUFNa0MsRUFBQS9CLFFBQ2ZvRCxLQUVILFFBQUFyRCxLQUN3QixpQkFBekJnQyxFQUFTbUIsS0FDUFMsR0FBSXZCLE9BQ0YsYUFBQXlCLEVBQUFqRSxLQUNBa0UsR0FBQUEsT0FDRCxpQkFBQS9CLEVBQUFuQyxNQUNEZ0UsR0FBR2pDLE9BRURvQyxHQUFBQSxLQUFjM0Qsd0JBQ2Q0RCxHQUFBQSxFQUNBdkIsSUFDQVUsRUFBV04sZUFBTWQsRUFBQWhDLE9BQ2ZrRSxXQUFBQSxXQUNEYixLQUNGLEtBRUgsUUFBU0gsS0FDSFIsR0FBSixJQUNFTyxHQUFXaEUsT0FDWjhFLEtBRUNkLEdBQVcvRCxJQUNaMEMsRUFBQSxFQUNGb0MsR0FBQTNELEtBQUEsaUNBQUFrQixLQUFBNEMsTUFBQSxVQUFBQyxZQUFBLFNBQ0RILEdBQUFYLE9BQ0V0QixHQUFBQSxFQUNBWixXQUFBQSxXQUNBd0IsS0FDQWhCLE1BR0FvQyxRQUFBQSxNQUNBSyxJQUFBQSxHQUNBbkIsR0FBQUEsWUFBQUEsZUFHT2EsSUFBVHJCLEdBQ0U0QixHQUFhQyxTQUFRLGNBR3JCQyxRQUFBQSxLQUNEeEMsRUFBQVEsaUJBQUEsSUFDRHBCLEVBQVNvRCxpQkFBVyxJQUNsQjNCLEdBQUFBLEVBQ0F3QixFQUFBQSxHQUNBaEMsRUFBYSxHQUFiTyxFQUNBaEIsRUFBQUEsR0FDQWdCLEdBQUF2QyxLQUFBLElBQ0FRLElBQ0FtQixJQUdBVSxRQUFPcUIsS0FDUDFFLGFBQVNvRixRQUFULFlBQUFuRSxHQUNBb0UsRUFBQ2xELFNBQWF5QixVQUNkMEIsRUFBY3pELFlBQVdqQyxVQUFZQyxTQUFBLG1CQUN0Q3NGLElBRUNHLFFBQUFBLEtBQ0F6RSxFQUFBQSxHQUNEbUUsSUFDRGhDLEVBQVN1QyxHQUNQRCxFQUFBQSxHQUNBNUYsRUFBQUEsRUFDRDhCLEVBQUEsRUFDRGdFLEVBQUFBLGNBQTZCQyxFQUE3QmhGLE9BQ0FpRixFQUFZdkMsZ0JBQVpSLEVBQUE3QixTQUNBNkUsRUFBWXhDLGdCQUFTakQsRUFBckJZLFNBQ0FlLEdBQUFBLEVBQ0ErRCxFQUFTUixRQUNHeEIsR0FBU2hFLFlBQWNpRyxrQkFDcEJoRSxFQUFTaEIsWUFBeEIsMkJBRUFpRixRQUFRQyxLQUNSQyxFQUFBbkcsU0FBQSxVQUNBb0csSUE3VkYsUUFBQVYsS0FnVklELEVBQWdCekYsU0FBUyxVQUN6QkgsRUFBU0UsWUFBWSxVQUFVQyxTQUFTLG1CQWhWMUMsR0FBSTRCLE9BQUFBLEdBREprQixNQUFBQSxHQUNJbEIsTUFBQUEsR0FDQWtCLEVBQUFBLEdBQ0FaLEVBQUFBLEdBQ0FpQixHQUFBQSxFQUNBVCxNQUFBQSxHQUNBYyxFQUFPLEVBQ1BHLEVBQUFBLEVBQ0FELEVBQUowQixhQUFBaUIsUUFBQSxjQUFBLEVBRUlqRixJQUVFZCxLQUFBQSxlQUVGSyxNQUFNLG1DQUNORCxPQUFPLEdBQ1BFLGNBSEYsR0FJRWdELE9BQUFBLEVBQ0E5QyxPQUxGLEVBTUVDLFNBTkYsR0FPRUUsZ0JBUEYsS0FXRU4sS0FBTSxlQUNORCxNQUFPLG1DQUNQRSxPQUhGLEVBSUVnRCxjQUpGLEVBS0U5QyxPQUxGLEVBTUVDLE9BTkYsRUFPRUUsU0FBVSxHQUNWcUMsZ0JBQWlCLEtBSWpCNUMsS0FBTyxXQUNQRSxNQUhGLG1DQUlFZ0QsT0FBQUEsRUFDQTlDLGNBTEYsRUFNRUMsT0FORixFQU9FRSxPQUFVLEVBQ1ZxQyxTQUFBQSxHQTdCSkEsZ0JBQUEsS0FtQ0k1QyxJQUVBTyxLQUFBQSxtQkFDQXFDLE1BQUFBLG9DQUVGMUMsT0FBQSxFQUNFRCxTQUFNLEdBQ05ELGdCQUFPLEtBR1A0QyxLQUFBQSxZQUVGNUMsTUFBQSxvQ0FDRUMsT0FBTSxFQUNORCxTQUFPLEdBQ1BFLGdCQUhGLEtBZkZELEtBQUEsY0FpQklELE1BQU8sb0NBT0xaLE9BQUFBLEVBQ0E2RixTQUFBQSxHQUNBOUYsZ0JBQWEsS0FJYk0sRUFBYVAsRUFBQSxpQkFDYm1HLEVBQU5uRyxFQUFBLGlCQUNNb0MsRUFBWXBDLEVBQUUsWUFDZGlCLEVBQUFBLEVBQUFBLFNBQ0EyRSxFQUFBQSxFQUFjNUYsU0FDZGlDLEVBQWdCakMsRUFBQSxxQkFDaEI2RixFQUFBQSxFQUFBQSxZQUNBYSxFQUFVMUcsRUFBRSxTQUNacUcsRUFBWXJHLEVBQUEsVUFDWnVHLEVBQVV2RyxFQUFoQixxQkFDTXdHLEVBQWF4RyxFQUFBLGdCQUNiMkcsRUFBZ0IzRyxFQUFBLGFBQ2hCc0QsRUFBV3RELEVBQUEsY0FDWHNCLEVBQUFBLEVBQWF0QixXQUNiaUUsRUFBQUEsRUFBYWpFLFdBQ2IyRSxHQUFBQSxFQUFjM0UsV0FDZHlFLEdBQUFBLEVBQWV6RSxhQUNmNEUsR0FBZ0I1RSxFQUFFLGlCQUNsQmdGLEdBQUFBLEVBQUFBLGlCQUNBRyxHQUFBQSxFQUFnQm5GLGVBQ2hCOEUsR0FBVTlFLEVBQUYsU0FBZCxHQUNNNEcsR0FBVTVHLEVBQUYsU0FBZCxHQUNNK0UsR0FBYS9FLEVBQUEsU0FBbkIsR0FDTW1DLEdBQWdCbkMsRUFBQSxTQUFBLEdBQ2hCbUUsR0FBZW5FLEVBQUEsU0FBckIsR0FDTTRDLEdBQWdCNUMsRUFBQSxTQUFBLEdBQ2hCcUQsR0FBQUEsRUFBQUEsU0FBQUEsR0FDQUksR0FBQUEsRUFBQUEsU0FBQUEsR0FDQVQsR0FBQUEsRUFBQUEsU0FBdUJoRCxHQUN2QjBDLEdBQWdCMUMsRUFBQSxnQkFDaEJvRCxHQUFlcEQsRUFBRSxlQUNqQjZDLEdBQWU3QyxFQUFFLGdCQUNqQjJDLEdBQW1CM0MsRUFBQSwwQkFDbkJrRSxHQUFnQmxFLEVBQUEsNEJBQ2hCbUQsR0FBaUJuRCxFQUFBLDZCQUNqQmtGLEdBQWdCbEYsRUFBRSxnQkFMbEJvRCxHQUFlcEQsRUFBRSxpQkFPdkI2QyxHQUFBN0MsRUFBc0IsaUJBQ3BCRSxHQUFjQyxFQUFBQSxtQkFDZEYsR0FBa0JELEVBQUEsZ0JBQ25CbUQsR0FBQW5ELEVBQUEsYUFDRGtGLEdBQUFsRixFQUFzQixpQkFnT3RCK0YsR0FBaUJPLEdBQUcsUUFBU04sR0FDN0JDLEVBQVNLLEdBQUcsUUFBU08sR0FDckJYLEVBQVNJLEdBQUcsUUFBUzdGLEdBQ3JCMkIsRUFBVWtFLEdBQUcsUUFBU3pFLEdBQ3RCc0UsRUFBTUcsR0FBRyxRQUFTUSxHQUNsQnZHLEVBQVMrRixHQUFHLFFBQVMsYUFBY0YsR0FDbkNuRSxFQUFZcUUsR0FBRyxRQUFTbEYsR0FDeEJzRixFQUFRSixHQUFHLFFBQVNTLEdBQ3BCVixFQUFRQyxHQUFHLFFBQVNwRixHQUNwQnFGLEdBQVFELEdBQUcsUUFBU25GLEdBQ3BCcUYsR0FBU0YsR0FBRyxRQUFTVSxHQUNyQkwsR0FBWUwsR0FBRyxRQUFTUiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKCgpID0+IHtcbiAgbGV0IHBsYXllck5hbWU7XG4gIGxldCBwbGF5ZXJDaG9zZW47XG4gIGxldCB2aWxsaWFuQ2hvc2VuO1xuICBsZXQgcGxheWVyTGlmZSA9IDIwO1xuICBsZXQgdmlsbGlhbkxpZmUgPSAyMDtcbiAgbGV0IHR1cm4gPSB0cnVlO1xuICBsZXQgcm91bmRUZXh0O1xuICBsZXQgcm91bmQgPSAxO1xuICBsZXQgc2NvcmUgPSAwO1xuICBsZXQgaGlnaFNjb3JlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZ2hTY29yZScpIHx8IDA7XG5cbiAgY29uc3QgY2hhcmFjdGVycyA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnTmljayB0aGUgQ2F0JyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMS5naWYnLFxuICAgICAgYXR0YWNrOiAyMCxcbiAgICAgIGN1cnJlbnRBdHRhY2s6IDIwLFxuICAgICAgd2FyQ3J5OiAzLFxuICAgICAgZGVmZW5kOiA0LFxuICAgICAgYWNjdXJhY3k6IDAuOSxcbiAgICAgIGN1cnJlbnRBY2N1cmFjeTogMC45XG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnRWxsZW4gUmlwbGV5JyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMi5naWYnLFxuICAgICAgYXR0YWNrOiA1LFxuICAgICAgY3VycmVudEF0dGFjazogNSxcbiAgICAgIHdhckNyeTogMixcbiAgICAgIGRlZmVuZDogNSxcbiAgICAgIGFjY3VyYWN5OiAwLjUsXG4gICAgICBjdXJyZW50QWNjdXJhY3k6IDAuNVxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ0NhdHppbGxhJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvcGxheWVyMy5naWYnLFxuICAgICAgYXR0YWNrOiA0LFxuICAgICAgY3VycmVudEF0dGFjazogNCxcbiAgICAgIHdhckNyeTogNSxcbiAgICAgIGRlZmVuZDogMixcbiAgICAgIGFjY3VyYWN5OiAwLjUsXG4gICAgICBjdXJyZW50QWNjdXJhY3k6IDAuNVxuICAgIH1cbiAgXTtcbiAgY29uc3QgdmlsbGlhbnMgPSBbXG4gICAge1xuICAgICAgbmFtZTogJ0hlbnJ5IHRoZSBIb292ZXInLFxuICAgICAgaW1hZ2U6ICdwdWJsaWMvYXNzZXRzL2ltYWdlcy92aWxsaWFuMS5naWYnLFxuICAgICAgYXR0YWNrOiA1LFxuICAgICAgYWNjdXJhY3k6IDAuMyxcbiAgICAgIGN1cnJlbnRBY2N1cmFjeTogMC4zXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnWGVub21vcnBoJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjIuZ2lmJyxcbiAgICAgIGF0dGFjazogNSxcbiAgICAgIGFjY3VyYWN5OiAwLjMsXG4gICAgICBjdXJyZW50QWNjdXJhY3k6IDAuM1xuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ1BpbmsgTWVkdXNhJyxcbiAgICAgIGltYWdlOiAncHVibGljL2Fzc2V0cy9pbWFnZXMvdmlsbGlhbjMuZ2lmJyxcbiAgICAgIGF0dGFjazogNSxcbiAgICAgIGFjY3VyYWN5OiAwLjMsXG4gICAgICBjdXJyZW50QWNjdXJhY3k6IDAuM1xuICAgIH1cbiAgXTtcblxuICBjb25zdCAkaW5zdHJ1Y3Rpb25zID0gJCgnLmluc3RydWN0aW9ucycpO1xuICBjb25zdCAkaW5zdHJ1Y3Rpb25zQnRuID0gJCgnI2luc3RydWN0aW9ucycpO1xuICBjb25zdCAkd2VsY29tZSA9ICQoJy53ZWxjb21lJyk7XG4gIGNvbnN0ICRiYWNrQnRuID0gJCgnI2JhY2snKTtcbiAgY29uc3QgJHBsYXlCdG4gPSAkKCcjcGxheScpO1xuICBjb25zdCAkY2hhcmFjdGVyU2NyZWVuID0gJCgnLmNoYXJhY3Rlci1zY3JlZW4nKTtcbiAgY29uc3QgJGNob2ljZXMgPSAkKCcuY2hvaWNlcycpO1xuICBjb25zdCAkbmFtZSA9ICQoJy5uYW1lJyk7XG4gIGNvbnN0ICRzdGFydEJ0biA9ICQoJyNzdGFydCcpO1xuICBjb25zdCAkY2hvc2VuQ2hhcmFjdGVyID0gJCgnLmNob3Nlbi1jaGFyYWN0ZXInKTtcbiAgY29uc3QgJGdhbWVXaW5kb3cgPSAkKCcuZ2FtZS13aW5kb3cnKTtcbiAgY29uc3QgJGtpY2tPZmZCdG4gPSAkKCcja2ljay1vZmYnKTtcbiAgY29uc3QgJGdhbWVPdmVyU2NyZWVuID0gJCgnLmdhbWUtb3ZlcicpO1xuICBjb25zdCAkYXR0YWNrID0gJCgnI2F0dGFjaycpO1xuICBjb25zdCAkd2FyQ3J5ID0gJCgnI3dhcmNyeScpO1xuICBjb25zdCAkZGVmZW5kID0gJCgnI2RlZmVuZCcpO1xuICBjb25zdCAkbmV3R2FtZSA9ICQoJyNuZXctZ2FtZScpO1xuICBjb25zdCAkYmFja1RvTWVudSA9ICQoJyNiYWNrLXRvLW1lbnUnKTtcbiAgY29uc3QgJHNjb3JlID0gJCgnI3BsYXllci1zY29yZScpO1xuICBjb25zdCAkaGlnaFNjb3JlID0gJCgnLmhpZ2gtc2NvcmUnKTtcbiAgY29uc3QgJHNsYXBBdWRpbyA9ICQoJ2F1ZGlvJylbMF07XG4gIGNvbnN0ICRwdW5jaEF1ZGlvID0gJCgnYXVkaW8nKVsxXTtcbiAgY29uc3QgJHN3b29zaEF1ZGlvID0gJCgnYXVkaW8nKVsyXTtcbiAgY29uc3QgJHN3b29zaEF1ZGlvMiA9ICQoJ2F1ZGlvJylbM107XG4gIGNvbnN0ICRnYW1lT3ZlckF1ZGlvID0gJCgnYXVkaW8nKVs0XTtcbiAgY29uc3QgJGxldmVsVXBBdWRpbyA9ICQoJ2F1ZGlvJylbNV07XG4gIGNvbnN0ICRtZW93ID0gJCgnYXVkaW8nKVs2XTtcbiAgY29uc3QgJHJvYXIgPSAkKCdhdWRpbycpWzddO1xuICBjb25zdCAkZ2V0QXdheSA9ICQoJ2F1ZGlvJylbOF07XG4gIGNvbnN0ICRwbGF5ZXJOYW1lID0gJCgnLnBsYXllci1uYW1lJyk7XG4gIGNvbnN0ICRwbGF5ZXJJbWcgPSAkKCcucGxheWVyLWltZycpO1xuICBjb25zdCAkcGxheWVyTGlmZSA9ICQoJyNwbGF5ZXItbGlmZScpO1xuICBjb25zdCAkcGxheWVyQ3VycmVudEF0dGFjayA9ICQoJyNwbGF5ZXItY3VycmVudC1hdHRhY2snKTtcbiAgY29uc3QgJHBsYXllckN1cnJBY2N1cmFjeSA9ICQoJyNwbGF5ZXItY3VycmVudC1hY2N1cmFjeScpO1xuICBjb25zdCAkdmlsbGlhbkN1cnJBY2N1cmFjeSA9ICQoJyN2aWxsaWFuLWN1cnJlbnQtYWNjdXJhY3knKTtcbiAgY29uc3QgJHZpbGxpYW5JbWcgPSAkKCcudmlsbGlhbi1pbWcnKTtcbiAgY29uc3QgJHZpbGxpYW5OYW1lID0gJCgnLnZpbGxpYW4tbmFtZScpO1xuICBjb25zdCAkdmlsbGlhbkxpZmUgPSAkKCcjdmlsbGlhbi1saWZlJyk7XG4gIGNvbnN0ICR2aWxsaWFuQXR0YWNrID0gJCgnI3ZpbGxpYW4tYXR0YWNrJyk7XG4gIGNvbnN0ICR0dXJuUmVzdWx0ID0gJCgnI3R1cm4tcmVzdWx0Jyk7XG4gIGNvbnN0ICRyb3VuZE51bWJlciA9ICQoJyNyb3VuZC1ubycpO1xuICBjb25zdCAkcm91bmRNZXNzYWdlID0gJCgnI3JvdW5kLW1lc3NhZ2UnKTtcblxuICBmdW5jdGlvbiBoaWRlV2luZG93MSgpe1xuICAgICRpbnN0cnVjdGlvbnMucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgICAkd2VsY29tZS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gIH1cbiAgZnVuY3Rpb24gaGlkZVdpbmRvdzIoKXtcbiAgICAkaW5zdHJ1Y3Rpb25zLmFkZENsYXNzKCdoaWRkZW4nKS5yZW1vdmVDbGFzcygnYW5pbWF0ZWQgZmFkZUluJyk7XG4gICAgJHdlbGNvbWUucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgfVxuICBmdW5jdGlvbiBjcmVhdGVDaG9pY2VzKCl7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IGNoYXJhY3RlcnMubGVuZ3RoOyBpKyspe1xuICAgICAgY29uc3QgY29udGVudCA9IGBcbiAgICAgIDxkaXYgY2xhc3M9XCJjaGFyYWN0ZXJcIiBkYXRhLWlkPSR7aX0+XG4gICAgICA8aW1nIHNyYz1cIiR7Y2hhcmFjdGVyc1tpXS5pbWFnZX1cIj5cbiAgICAgIDxwIGNsYXNzPVwidW5kZXJsaW5lZFwiPiR7Y2hhcmFjdGVyc1tpXS5uYW1lfTwvcD5cbiAgICAgIDxwPkF0dGFjazogJHtjaGFyYWN0ZXJzW2ldLmF0dGFja308L3A+XG4gICAgICA8cD5XYXJDcnk6ICR7Y2hhcmFjdGVyc1tpXS53YXJDcnl9PC9wPlxuICAgICAgPHA+RGVmZW5kOiAke2NoYXJhY3RlcnNbaV0uZGVmZW5kfTwvcD5cbiAgICAgIDxwPkFjY3VyYWN5OiAke2NoYXJhY3RlcnNbaV0uYWNjdXJhY3l9PC9wPlxuICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgICAgJGNob2ljZXMuYXBwZW5kKGNvbnRlbnQpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBnb1RvQ2hvaWNlU2NyZWVuKCl7XG4gICAgJHdlbGNvbWUuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRjaGFyYWN0ZXJTY3JlZW4ucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpLmFkZENsYXNzKCdhbmltYXRlZCBmYWRlSW4nKTtcbiAgICBjcmVhdGVDaG9pY2VzKCk7XG4gIH1cbiAgZnVuY3Rpb24gdG9UaGVHYW1lKCl7XG4gICAgJGNoYXJhY3RlclNjcmVlbi5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGNob3NlbkNoYXJhY3Rlci5yZW1vdmVDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ2FuaW1hdGVkIGZhZGVJbicpO1xuICB9XG4gIGZ1bmN0aW9uIHN0YXJ0VGhlR2FtZSgpe1xuICAgICRjaG9zZW5DaGFyYWN0ZXIuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICRnYW1lV2luZG93LnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluJyk7XG4gICAgJGhpZ2hTY29yZS50ZXh0KGhpZ2hTY29yZSk7XG4gICAgc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgZGlzcGxheUhlYWx0aCgpO1xuICAgICAgZGlzcGxheVNjb3JlKCk7XG4gICAgICBkaXNwbGF5Um91bmQoKTtcbiAgICAgIGRpc3BsYXlDdXJyZW50QXR0YWNrKCk7XG4gICAgICBkaXNwbGF5QWNjdXJhY3koKTtcbiAgICB9LCA1MDApO1xuICB9XG4gIGZ1bmN0aW9uIHVwZGF0ZUhpZ2hTY29yZSgpe1xuICAgIGhpZ2hTY29yZSA9IHNjb3JlID4gaGlnaFNjb3JlID8gc2NvcmUgOiBoaWdoU2NvcmU7XG4gICAgJGhpZ2hTY29yZS50ZXh0KGhpZ2hTY29yZSk7XG4gIH1cbiAgZnVuY3Rpb24gZ2V0VGhlTmFtZSgpe1xuICAgIHBsYXllck5hbWUgPSAkKHRoaXMpLnZhbCgpO1xuICAgIGlmIChwbGF5ZXJOYW1lLmxlbmd0aCAhPT0gMCl7XG4gICAgICAka2lja09mZkJ0bi5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKS5hZGRDbGFzcygnYW5pbWF0ZWQgaW5maW5pdGUgcHVsc2UnKTtcbiAgICB9XG4gICAgJHBsYXllck5hbWUudGV4dChwbGF5ZXJOYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNlbGVjdENoYXJhY3Rlcigpe1xuICAgICQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgaWYoaWQpe1xuICAgICAgJHN0YXJ0QnRuLmF0dHIoJ2Rpc2FibGVkJywgZmFsc2UpLmFkZENsYXNzKCdhbmltYXRlZCBpbmZpbml0ZSBwdWxzZScpO1xuICAgIH1cbiAgICBwbGF5ZXJDaG9zZW4gPSBjaGFyYWN0ZXJzW2lkXTtcbiAgICB2aWxsaWFuQ2hvc2VuID0gdmlsbGlhbnNbaWRdO1xuICAgICQoJy5jaG9zZW4tY2hhcmFjdGVyIGltZywgLnBsYXllci1pbWcnKS5hdHRyKCdzcmMnLCBwbGF5ZXJDaG9zZW4uaW1hZ2UpO1xuICAgICQoJy5oZXhhZ29uJykuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgYHVybCgke3BsYXllckNob3Nlbi5pbWFnZX0pYCk7XG4gICAgJHZpbGxpYW5JbWcuYXR0cignc3JjJywgdmlsbGlhbkNob3Nlbi5pbWFnZSk7XG4gICAgJHZpbGxpYW5OYW1lLnRleHQodmlsbGlhbkNob3Nlbi5uYW1lKTtcbiAgICAkdmlsbGlhbkF0dGFjay50ZXh0KHZpbGxpYW5DaG9zZW4uYXR0YWNrKTtcbiAgfVxuICBmdW5jdGlvbiBkaXNwbGF5SGVhbHRoKCl7XG4gICAgJHBsYXllckxpZmUuaHRtbChwbGF5ZXJMaWZlKTtcbiAgICAkdmlsbGlhbkxpZmUuaHRtbCh2aWxsaWFuTGlmZSk7XG4gIH1cblxuICBmdW5jdGlvbiBkaXNwbGF5QWNjdXJhY3koKXtcbiAgICAkcGxheWVyQ3VyckFjY3VyYWN5Lmh0bWwocGxheWVyQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeS50b0ZpeGVkKDIpKTtcbiAgICAkdmlsbGlhbkN1cnJBY2N1cmFjeS5odG1sKHZpbGxpYW5DaG9zZW4uY3VycmVudEFjY3VyYWN5LnRvRml4ZWQoMikpO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlSb3VuZCgpe1xuICAgICRyb3VuZE51bWJlci50ZXh0KGAke3JvdW5kfWApO1xuICB9XG4gIGZ1bmN0aW9uIGRpc3BsYXlDdXJyZW50QXR0YWNrKCl7XG4gICAgJHBsYXllckN1cnJlbnRBdHRhY2sudGV4dChwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjayk7XG4gIH1cbiAgZnVuY3Rpb24gZGlzcGxheVNjb3JlKCl7XG4gICAgJHNjb3JlLmh0bWwoc2NvcmUpO1xuICB9XG4gIGZ1bmN0aW9uIHR1cm5SZXN1bHRUZXh0KCl7XG4gICAgJHR1cm5SZXN1bHQudGV4dChgJHtyb3VuZFRleHR9YCk7XG4gIH1cblxuICBmdW5jdGlvbiBhdHRhY2tWaWxsaWFuKCl7XG4gICAgY29uc29sZS5sb2cocGxheWVyQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeSk7XG4gICAgaWYodHVybiA9PT0gdHJ1ZSl7XG4gICAgICBpZihNYXRoLnJhbmRvbSgpIDwgcGxheWVyQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeSl7XG4gICAgICAgIHZpbGxpYW5MaWZlIC09IHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrO1xuICAgICAgICBzY29yZSArPSBwbGF5ZXJDaG9zZW4uY3VycmVudEF0dGFjaztcbiAgICAgICAgcm91bmRUZXh0ID0gJ1lvdSBoYXZlIGhpdCBoaW0hJztcbiAgICAgICAgJHZpbGxpYW5JbWcuYWRkQ2xhc3MoJ2FuaW1hdGVkIHNoYWtlJyk7XG4gICAgICAgICRzbGFwQXVkaW8ucGxheSgpO1xuICAgICAgfSBlbHNle1xuICAgICAgICAkc3dvb3NoQXVkaW8ucGxheSgpO1xuICAgICAgICByb3VuZFRleHQgPSAnV2hvb29wcyEgQSBtaXNzLi4uJztcbiAgICAgIH1cbiAgICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrID0gcGxheWVyQ2hvc2VuLmF0dGFjaztcbiAgICAgIHR1cm5SZXN1bHRUZXh0KCk7XG4gICAgICAkcGxheWVySW1nLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBzaGFrZScpO1xuICAgICAgdHVybiA9IGZhbHNlO1xuICAgICAgd2hvc2VUdXJuKCk7XG4gICAgICBjaGVja0Zvcldpbm5lcigpO1xuICAgICAgdXBkYXRlSGlnaFNjb3JlKCk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgICB9LCAzMDAwKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gYXR0YWNrUGxheWVyKCl7XG4gICAgY29uc29sZS5sb2codmlsbGlhbkNob3Nlbi5jdXJyZW50QWNjdXJhY3kpO1xuICAgIGlmKHR1cm4gPT09IGZhbHNlKXtcbiAgICAgIGlmKE1hdGgucmFuZG9tKCkgPCB2aWxsaWFuQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeSl7XG4gICAgICAgIHBsYXllckxpZmUgLT0gdmlsbGlhbkNob3Nlbi5hdHRhY2s7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdIZSBoaXQgeW91ISc7XG4gICAgICAgICRwdW5jaEF1ZGlvLnBsYXkoKTtcbiAgICAgICAgJHBsYXllckltZy5hZGRDbGFzcygnYW5pbWF0ZWQgc2hha2UnKTtcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgJHN3b29zaEF1ZGlvMi5wbGF5KCk7XG4gICAgICAgIHJvdW5kVGV4dCA9ICdZb3UgYXJlIHNhZmUhJztcbiAgICAgIH1cbiAgICAgICR2aWxsaWFuSW1nLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBzaGFrZScpO1xuICAgICAgdHVyblJlc3VsdFRleHQoKTtcbiAgICAgIGNoZWNrRm9yV2lubmVyKCk7XG4gICAgICB0dXJuID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB3aG9zZVR1cm4oKTtcbiAgICAgIH0sMTAwMCk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGRlZmVuZCgpe1xuICAgICR0dXJuUmVzdWx0LnRleHQoJ0RFRkVORCEhIScpO1xuICAgIHR1cm4gPSBmYWxzZTtcbiAgICB3aG9zZVR1cm4oKTtcbiAgICB2aWxsaWFuQ2hvc2VuLmF0dGFjayAtPSBwbGF5ZXJDaG9zZW4uZGVmZW5kO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgYXR0YWNrUGxheWVyKCk7XG4gICAgICB2aWxsaWFuQ2hvc2VuLmF0dGFjayArPSBwbGF5ZXJDaG9zZW4uZGVmZW5kO1xuICAgIH0sIDIwMDApO1xuICB9XG4gIGZ1bmN0aW9uIHdhckNyeSgpe1xuICAgIGlmIChwbGF5ZXJDaG9zZW4ubmFtZSA9PT0gJ05pY2sgdGhlIENhdCcpe1xuICAgICAgJG1lb3cucGxheSgpO1xuICAgIH0gZWxzZSBpZiAocGxheWVyQ2hvc2VuLm5hbWUgPT09ICdDYXR6aWxsYScpe1xuICAgICAgJHJvYXIucGxheSgpO1xuICAgIH0gZWxzZSBpZiAocGxheWVyQ2hvc2VuLm5hbWUgPT09ICdFbGxlbiBSaXBsZXknKXtcbiAgICAgICRnZXRBd2F5LnBsYXkoKTtcbiAgICB9XG4gICAgJHR1cm5SZXN1bHQudGV4dCgnWW91IGhhdmUgdXNlZCBXYXJDcnknKTtcbiAgICB0dXJuID0gZmFsc2U7XG4gICAgd2hvc2VUdXJuKCk7XG4gICAgcGxheWVyQ2hvc2VuLmN1cnJlbnRBdHRhY2sgKz0gcGxheWVyQ2hvc2VuLndhckNyeTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGF0dGFja1BsYXllcigpO1xuICAgIH0sIDIwMDApO1xuICB9XG4gIGZ1bmN0aW9uIGNoZWNrRm9yV2lubmVyKCl7XG4gICAgaWYgKHBsYXllckxpZmUgPD0gMCl7XG4gICAgICAkZ2FtZU92ZXJBdWRpby5wbGF5KCk7XG4gICAgICBnYW1lT3ZlcigpO1xuICAgIH1cbiAgICBpZih2aWxsaWFuTGlmZSA8PSAwKXtcbiAgICAgIHZpbGxpYW5MaWZlID0gMDtcbiAgICAgICRyb3VuZE1lc3NhZ2UudGV4dCgnWW91IHdvbiB0aGlzIHJvdW5kISEhIFRhLWRhISEnKS5jc3Moeydjb2xvcic6ICcjMjA0MjE1JywgJ2ZvbnQtc2l6ZSc6ICcyOHB4J30pO1xuICAgICAgJGxldmVsVXBBdWRpby5wbGF5KCk7XG4gICAgICB0dXJuID0gdHJ1ZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBuZXh0Um91bmQoKTtcbiAgICAgIH0sIDIwMDApO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiB3aG9zZVR1cm4oKXtcbiAgICBpZiAodHVybiA9PT0gZmFsc2Upe1xuICAgICAgJHBsYXllckltZy5yZW1vdmVDbGFzcygnaW1nLWFjdGl2ZScpO1xuICAgIH1cbiAgICBpZiAodHVybiA9PT0gdHJ1ZSl7XG4gICAgICAkcGxheWVySW1nLmFkZENsYXNzKCdpbWctYWN0aXZlJyk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG5leHRSb3VuZCgpe1xuICAgIHBsYXllckNob3Nlbi5jdXJyZW50QWNjdXJhY3kgKz0gMC4wMTtcbiAgICB2aWxsaWFuQ2hvc2VuLmN1cnJlbnRBY2N1cmFjeSArPSAwLjA1O1xuICAgIHJvdW5kICs9IDE7XG4gICAgdmlsbGlhbkxpZmUgPSAyMDtcbiAgICBwbGF5ZXJMaWZlID0gMjAgICsgcm91bmQ7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgJHJvdW5kTWVzc2FnZS50ZXh0KCcnKTtcbiAgICB0dXJuUmVzdWx0VGV4dCgpO1xuICAgIHdob3NlVHVybigpO1xuXG4gIH1cbiAgZnVuY3Rpb24gZ2FtZU92ZXIoKXtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaGlnaFNjb3JlJywgaGlnaFNjb3JlKTtcbiAgICAkZ2FtZVdpbmRvdy5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgJGdhbWVPdmVyU2NyZWVuLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluJyk7XG4gICAgcmVzZXREYXRhKCk7XG4gIH1cbiAgZnVuY3Rpb24gcmVzZXREYXRhKCl7XG4gICAgcm91bmRUZXh0ID0gJyc7XG4gICAgdHVyblJlc3VsdFRleHQoKTtcbiAgICBwbGF5ZXJMaWZlID0gMjA7XG4gICAgdmlsbGlhbkxpZmUgPSAyMDtcbiAgICByb3VuZCA9IDE7XG4gICAgc2NvcmUgPSAwO1xuICAgIHBsYXllckNob3Nlbi5jdXJyZW50QXR0YWNrID0gcGxheWVyQ2hvc2VuLmF0dGFjaztcbiAgICBwbGF5ZXJDaG9zZW4uY3VycmVudEFjY3VyYWN5ID0gcGxheWVyQ2hvc2VuLmFjY3VyYWN5O1xuICAgIHZpbGxpYW5DaG9zZW4uY3VycmVudEFjY3VyYWN5ID0gdmlsbGlhbkNob3Nlbi5hY2N1cmFjeTtcbiAgICB0dXJuID0gdHJ1ZTtcbiAgICAkY2hvaWNlcy5lbXB0eSgpO1xuICAgICgkdmlsbGlhbkltZywgJHBsYXllckltZykucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkIHNoYWtlJyk7XG4gICAgKCRraWNrT2ZmQnRuLCAkc3RhcnRCdG4pLnJlbW92ZUNsYXNzKCdhbmltYXRlZCBpbmZpbml0ZSBwdWxzZScpO1xuICB9XG4gIGZ1bmN0aW9uIG5ld0dhbWUoKXtcbiAgICAkZ2FtZU92ZXJTY3JlZW4uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgIHN0YXJ0VGhlR2FtZSgpO1xuICB9XG4gIGZ1bmN0aW9uIGJhY2tUb01lbnUoKXtcbiAgICAkZ2FtZU92ZXJTY3JlZW4uYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICR3ZWxjb21lLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5hZGRDbGFzcygnYW5pbWF0ZWQgZmFkZUluJyk7XG4gIH1cbiAgJGluc3RydWN0aW9uc0J0bi5vbignY2xpY2snLCBoaWRlV2luZG93MSk7XG4gICRiYWNrQnRuLm9uKCdjbGljaycsIGhpZGVXaW5kb3cyKTtcbiAgJHBsYXlCdG4ub24oJ2NsaWNrJywgZ29Ub0Nob2ljZVNjcmVlbik7XG4gICRzdGFydEJ0bi5vbignY2xpY2snLCB0b1RoZUdhbWUpO1xuICAkbmFtZS5vbigna2V5dXAnLCBnZXRUaGVOYW1lKTtcbiAgJGNob2ljZXMub24oJ2NsaWNrJywgJy5jaGFyYWN0ZXInLCBzZWxlY3RDaGFyYWN0ZXIpO1xuICAka2lja09mZkJ0bi5vbignY2xpY2snLCBzdGFydFRoZUdhbWUpO1xuICAkYXR0YWNrLm9uKCdjbGljaycsIGF0dGFja1ZpbGxpYW4pO1xuICAkd2FyQ3J5Lm9uKCdjbGljaycsIHdhckNyeSk7XG4gICRkZWZlbmQub24oJ2NsaWNrJywgZGVmZW5kKTtcbiAgJG5ld0dhbWUub24oJ2NsaWNrJywgbmV3R2FtZSk7XG4gICRiYWNrVG9NZW51Lm9uKCdjbGljaycsIGJhY2tUb01lbnUpO1xufSk7XG4iXX0=
